var Ea=Object.defineProperty;var wa=(x,D,_t)=>D in x?Ea(x,D,{enumerable:!0,configurable:!0,writable:!0,value:_t}):x[D]=_t;var Pn=(x,D,_t)=>(wa(x,typeof D!="symbol"?D+"":D,_t),_t),or=(x,D,_t)=>{if(!D.has(x))throw TypeError("Cannot "+_t)};var y=(x,D,_t)=>(or(x,D,"read from private field"),_t?_t.call(x):D.get(x)),mt=(x,D,_t)=>{if(D.has(x))throw TypeError("Cannot add the same private member more than once");D instanceof WeakSet?D.add(x):D.set(x,_t)},Ut=(x,D,_t,L)=>(or(x,D,"write to private field"),L?L.call(x,_t):D.set(x,_t),_t);var yi=(x,D,_t,L)=>({set _($){Ut(x,D,$,_t)},get _(){return y(x,D,L)}}),xt=(x,D,_t)=>(or(x,D,"access private method"),_t);import{g as getAugmentedNamespace,r as reactExports,G as GenIcon,a as reactResponsiveExports,m as mediaBreakpoints,j as jsxRuntimeExports}from"./index-VnRKIq3i.js";import{u as useDownloadPdf}from"./useDownloadPdf-P6mlwAYD.js";import{I as IoMdDownload}from"./index-h77AuihW.js";var lib$2={exports:{}},core_min={};function commonjsRequire(x){throw new Error('Could not dynamically require "'+x+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(D,_t){module.exports=D.pdfjsLib=_t()})(globalThis,()=>(()=>{var __webpack_modules__=[,(x,D)=>{var Je;Object.defineProperty(D,"__esModule",{value:!0}),D.VerbosityLevel=D.Util=D.UnknownErrorException=D.UnexpectedResponseException=D.TextRenderingMode=D.RenderingIntentFlag=D.PromiseCapability=D.PermissionFlag=D.PasswordResponses=D.PasswordException=D.PageActionEventType=D.OPS=D.MissingPDFException=D.MAX_IMAGE_SIZE_TO_CACHE=D.LINE_FACTOR=D.LINE_DESCENT_FACTOR=D.InvalidPDFException=D.ImageKind=D.IDENTITY_MATRIX=D.FormatError=D.FeatureTest=D.FONT_IDENTITY_MATRIX=D.DocumentActionEventType=D.CMapCompressionType=D.BaseException=D.BASELINE_FACTOR=D.AnnotationType=D.AnnotationReplyType=D.AnnotationPrefix=D.AnnotationMode=D.AnnotationFlag=D.AnnotationFieldFlag=D.AnnotationEditorType=D.AnnotationEditorPrefix=D.AnnotationEditorParamsType=D.AnnotationBorderStyleType=D.AnnotationActionEventType=D.AbortException=void 0,D.assert=Yt,D.bytesToString=yt,D.createValidAbsoluteUrl=de,D.getModificationDate=fe,D.getUuid=qe,D.getVerbosityLevel=Rt,D.info=Wt,D.isArrayBuffer=Zt,D.isArrayEqual=ge,D.isNodeJS=void 0,D.normalizeUnicode=We,D.objectFromMap=Jt,D.objectSize=Gt,D.setVerbosityLevel=it,D.shadow=_e,D.string32=Bt,D.stringToBytes=zt,D.stringToPDFString=te,D.stringToUTF8String=jt,D.unreachable=Ct,D.utf8StringToString=It,D.warn=qt;const _t=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");D.isNodeJS=_t;const L=[1,0,0,1,0,0];D.IDENTITY_MATRIX=L;const $=[.001,0,0,.001,0,0];D.FONT_IDENTITY_MATRIX=$;const _=1e7;D.MAX_IMAGE_SIZE_TO_CACHE=_;const ot=1.35;D.LINE_FACTOR=ot;const $t=.35;D.LINE_DESCENT_FACTOR=$t;const pt=$t/ot;D.BASELINE_FACTOR=pt;const lt={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};D.RenderingIntentFlag=lt;const U={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};D.AnnotationMode=U;const vt="pdfjs_internal_editor_";D.AnnotationEditorPrefix=vt;const gt={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};D.AnnotationEditorType=gt;const nt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};D.AnnotationEditorParamsType=nt;const X={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};D.PermissionFlag=X;const Q={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};D.TextRenderingMode=Q;const V={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};D.ImageKind=V;const J={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};D.AnnotationType=J;const st={GROUP:"Group",REPLY:"R"};D.AnnotationReplyType=st;const rt={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};D.AnnotationFlag=rt;const tt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};D.AnnotationFieldFlag=tt;const O={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};D.AnnotationBorderStyleType=O;const H={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};D.AnnotationActionEventType=H;const ct={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};D.DocumentActionEventType=ct;const q={O:"PageOpen",C:"PageClose"};D.PageActionEventType=q;const N={ERRORS:0,WARNINGS:1,INFOS:5};D.VerbosityLevel=N;const at={NONE:0,BINARY:1};D.CMapCompressionType=at;const Y={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};D.OPS=Y;const St={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};D.PasswordResponses=St;let kt=N.WARNINGS;function it(Xt){Number.isInteger(Xt)&&(kt=Xt)}function Rt(){return kt}function Wt(Xt){kt>=N.INFOS&&console.log(`Info: ${Xt}`)}function qt(Xt){kt>=N.WARNINGS&&console.log(`Warning: ${Xt}`)}function Ct(Xt){throw new Error(Xt)}function Yt(Xt,Mt){Xt||Ct(Mt)}function ne(Xt){switch(Xt==null?void 0:Xt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function de(Xt,Mt=null,wt=null){if(!Xt)return null;try{if(wt&&typeof Xt=="string"){if(wt.addDefaultProtocol&&Xt.startsWith("www.")){const Kt=Xt.match(/\./g);(Kt==null?void 0:Kt.length)>=2&&(Xt=`http://${Xt}`)}if(wt.tryConvertEncoding)try{Xt=jt(Xt)}catch{}}const ae=Mt?new URL(Xt,Mt):new URL(Xt);if(ne(ae))return ae}catch{}return null}function _e(Xt,Mt,wt,ae=!1){return Object.defineProperty(Xt,Mt,{value:wt,enumerable:!ae,configurable:!0,writable:!1}),wt}const et=function(){function Mt(wt,ae){this.constructor===Mt&&Ct("Cannot initialize BaseException."),this.message=wt,this.name=ae}return Mt.prototype=new Error,Mt.constructor=Mt,Mt}();D.BaseException=et;class w extends et{constructor(Mt,wt){super(Mt,"PasswordException"),this.code=wt}}D.PasswordException=w;class R extends et{constructor(Mt,wt){super(Mt,"UnknownErrorException"),this.details=wt}}D.UnknownErrorException=R;class T extends et{constructor(Mt){super(Mt,"InvalidPDFException")}}D.InvalidPDFException=T;class B extends et{constructor(Mt){super(Mt,"MissingPDFException")}}D.MissingPDFException=B;class j extends et{constructor(Mt,wt){super(Mt,"UnexpectedResponseException"),this.status=wt}}D.UnexpectedResponseException=j;class K extends et{constructor(Mt){super(Mt,"FormatError")}}D.FormatError=K;class ut extends et{constructor(Mt){super(Mt,"AbortException")}}D.AbortException=ut;function yt(Xt){(typeof Xt!="object"||(Xt==null?void 0:Xt.length)===void 0)&&Ct("Invalid argument for bytesToString");const Mt=Xt.length,wt=8192;if(Mt<wt)return String.fromCharCode.apply(null,Xt);const ae=[];for(let Kt=0;Kt<Mt;Kt+=wt){const an=Math.min(Kt+wt,Mt),mn=Xt.subarray(Kt,an);ae.push(String.fromCharCode.apply(null,mn))}return ae.join("")}function zt(Xt){typeof Xt!="string"&&Ct("Invalid argument for stringToBytes");const Mt=Xt.length,wt=new Uint8Array(Mt);for(let ae=0;ae<Mt;++ae)wt[ae]=Xt.charCodeAt(ae)&255;return wt}function Bt(Xt){return String.fromCharCode(Xt>>24&255,Xt>>16&255,Xt>>8&255,Xt&255)}function Gt(Xt){return Object.keys(Xt).length}function Jt(Xt){const Mt=Object.create(null);for(const[wt,ae]of Xt)Mt[wt]=ae;return Mt}function le(){const Xt=new Uint8Array(4);return Xt[0]=1,new Uint32Array(Xt.buffer,0,1)[0]===1}function Qt(){try{return new Function(""),!0}catch{return!1}}class Se{static get isLittleEndian(){return _e(this,"isLittleEndian",le())}static get isEvalSupported(){return _e(this,"isEvalSupported",Qt())}static get isOffscreenCanvasSupported(){return _e(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?_e(this,"platform",{isWin:!1,isMac:!1}):_e(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Mt,wt;return _e(this,"isCSSRoundSupported",(wt=(Mt=globalThis.CSS)==null?void 0:Mt.supports)==null?void 0:wt.call(Mt,"width: round(1.5px, 1px)"))}}D.FeatureTest=Se;const Re=[...Array(256).keys()].map(Xt=>Xt.toString(16).padStart(2,"0"));class ce{static makeHexColor(Mt,wt,ae){return`#${Re[Mt]}${Re[wt]}${Re[ae]}`}static scaleMinMax(Mt,wt){let ae;Mt[0]?(Mt[0]<0&&(ae=wt[0],wt[0]=wt[1],wt[1]=ae),wt[0]*=Mt[0],wt[1]*=Mt[0],Mt[3]<0&&(ae=wt[2],wt[2]=wt[3],wt[3]=ae),wt[2]*=Mt[3],wt[3]*=Mt[3]):(ae=wt[0],wt[0]=wt[2],wt[2]=ae,ae=wt[1],wt[1]=wt[3],wt[3]=ae,Mt[1]<0&&(ae=wt[2],wt[2]=wt[3],wt[3]=ae),wt[2]*=Mt[1],wt[3]*=Mt[1],Mt[2]<0&&(ae=wt[0],wt[0]=wt[1],wt[1]=ae),wt[0]*=Mt[2],wt[1]*=Mt[2]),wt[0]+=Mt[4],wt[1]+=Mt[4],wt[2]+=Mt[5],wt[3]+=Mt[5]}static transform(Mt,wt){return[Mt[0]*wt[0]+Mt[2]*wt[1],Mt[1]*wt[0]+Mt[3]*wt[1],Mt[0]*wt[2]+Mt[2]*wt[3],Mt[1]*wt[2]+Mt[3]*wt[3],Mt[0]*wt[4]+Mt[2]*wt[5]+Mt[4],Mt[1]*wt[4]+Mt[3]*wt[5]+Mt[5]]}static applyTransform(Mt,wt){const ae=Mt[0]*wt[0]+Mt[1]*wt[2]+wt[4],Kt=Mt[0]*wt[1]+Mt[1]*wt[3]+wt[5];return[ae,Kt]}static applyInverseTransform(Mt,wt){const ae=wt[0]*wt[3]-wt[1]*wt[2],Kt=(Mt[0]*wt[3]-Mt[1]*wt[2]+wt[2]*wt[5]-wt[4]*wt[3])/ae,an=(-Mt[0]*wt[1]+Mt[1]*wt[0]+wt[4]*wt[1]-wt[5]*wt[0])/ae;return[Kt,an]}static getAxialAlignedBoundingBox(Mt,wt){const ae=this.applyTransform(Mt,wt),Kt=this.applyTransform(Mt.slice(2,4),wt),an=this.applyTransform([Mt[0],Mt[3]],wt),mn=this.applyTransform([Mt[2],Mt[1]],wt);return[Math.min(ae[0],Kt[0],an[0],mn[0]),Math.min(ae[1],Kt[1],an[1],mn[1]),Math.max(ae[0],Kt[0],an[0],mn[0]),Math.max(ae[1],Kt[1],an[1],mn[1])]}static inverseTransform(Mt){const wt=Mt[0]*Mt[3]-Mt[1]*Mt[2];return[Mt[3]/wt,-Mt[1]/wt,-Mt[2]/wt,Mt[0]/wt,(Mt[2]*Mt[5]-Mt[4]*Mt[3])/wt,(Mt[4]*Mt[1]-Mt[5]*Mt[0])/wt]}static singularValueDecompose2dScale(Mt){const wt=[Mt[0],Mt[2],Mt[1],Mt[3]],ae=Mt[0]*wt[0]+Mt[1]*wt[2],Kt=Mt[0]*wt[1]+Mt[1]*wt[3],an=Mt[2]*wt[0]+Mt[3]*wt[2],mn=Mt[2]*wt[1]+Mt[3]*wt[3],Dt=(ae+mn)/2,ue=Math.sqrt((ae+mn)**2-4*(ae*mn-an*Kt))/2,Te=Dt+ue||1,me=Dt-ue||1;return[Math.sqrt(Te),Math.sqrt(me)]}static normalizeRect(Mt){const wt=Mt.slice(0);return Mt[0]>Mt[2]&&(wt[0]=Mt[2],wt[2]=Mt[0]),Mt[1]>Mt[3]&&(wt[1]=Mt[3],wt[3]=Mt[1]),wt}static intersect(Mt,wt){const ae=Math.max(Math.min(Mt[0],Mt[2]),Math.min(wt[0],wt[2])),Kt=Math.min(Math.max(Mt[0],Mt[2]),Math.max(wt[0],wt[2]));if(ae>Kt)return null;const an=Math.max(Math.min(Mt[1],Mt[3]),Math.min(wt[1],wt[3])),mn=Math.min(Math.max(Mt[1],Mt[3]),Math.max(wt[1],wt[3]));return an>mn?null:[ae,an,Kt,mn]}static bezierBoundingBox(Mt,wt,ae,Kt,an,mn,Dt,ue){const Te=[],me=[[],[]];let ke,Me,un,oe,nn,Pe,dt,A;for(let Ft=0;Ft<2;++Ft){if(Ft===0?(Me=6*Mt-12*ae+6*an,ke=-3*Mt+9*ae-9*an+3*Dt,un=3*ae-3*Mt):(Me=6*wt-12*Kt+6*mn,ke=-3*wt+9*Kt-9*mn+3*ue,un=3*Kt-3*wt),Math.abs(ke)<1e-12){if(Math.abs(Me)<1e-12)continue;oe=-un/Me,0<oe&&oe<1&&Te.push(oe);continue}dt=Me*Me-4*un*ke,A=Math.sqrt(dt),!(dt<0)&&(nn=(-Me+A)/(2*ke),0<nn&&nn<1&&Te.push(nn),Pe=(-Me-A)/(2*ke),0<Pe&&Pe<1&&Te.push(Pe))}let G=Te.length,ft;const Pt=G;for(;G--;)oe=Te[G],ft=1-oe,me[0][G]=ft*ft*ft*Mt+3*ft*ft*oe*ae+3*ft*oe*oe*an+oe*oe*oe*Dt,me[1][G]=ft*ft*ft*wt+3*ft*ft*oe*Kt+3*ft*oe*oe*mn+oe*oe*oe*ue;return me[0][Pt]=Mt,me[1][Pt]=wt,me[0][Pt+1]=Dt,me[1][Pt+1]=ue,me[0].length=me[1].length=Pt+2,[Math.min(...me[0]),Math.min(...me[1]),Math.max(...me[0]),Math.max(...me[1])]}}D.Util=ce;const Ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function te(Xt){if(Xt[0]>="ï"){let wt;if(Xt[0]==="þ"&&Xt[1]==="ÿ"?wt="utf-16be":Xt[0]==="ÿ"&&Xt[1]==="þ"?wt="utf-16le":Xt[0]==="ï"&&Xt[1]==="»"&&Xt[2]==="¿"&&(wt="utf-8"),wt)try{const ae=new TextDecoder(wt,{fatal:!0}),Kt=zt(Xt);return ae.decode(Kt)}catch(ae){qt(`stringToPDFString: "${ae}".`)}}const Mt=[];for(let wt=0,ae=Xt.length;wt<ae;wt++){const Kt=Ce[Xt.charCodeAt(wt)];Mt.push(Kt?String.fromCharCode(Kt):Xt.charAt(wt))}return Mt.join("")}function jt(Xt){return decodeURIComponent(escape(Xt))}function It(Xt){return unescape(encodeURIComponent(Xt))}function Zt(Xt){return typeof Xt=="object"&&(Xt==null?void 0:Xt.byteLength)!==void 0}function ge(Xt,Mt){if(Xt.length!==Mt.length)return!1;for(let wt=0,ae=Xt.length;wt<ae;wt++)if(Xt[wt]!==Mt[wt])return!1;return!0}function fe(Xt=new Date){return[Xt.getUTCFullYear().toString(),(Xt.getUTCMonth()+1).toString().padStart(2,"0"),Xt.getUTCDate().toString().padStart(2,"0"),Xt.getUTCHours().toString().padStart(2,"0"),Xt.getUTCMinutes().toString().padStart(2,"0"),Xt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Oe{constructor(){mt(this,Je,!1);this.promise=new Promise((Mt,wt)=>{this.resolve=ae=>{Ut(this,Je,!0),Mt(ae)},this.reject=ae=>{Ut(this,Je,!0),wt(ae)}})}get settled(){return y(this,Je)}}Je=new WeakMap,D.PromiseCapability=Oe;let ze=null,Ne=null;function We(Xt){return ze||(ze=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ne=new Map([["ﬅ","ſt"]])),Xt.replaceAll(ze,(Mt,wt,ae)=>wt?wt.normalize("NFKC"):Ne.get(ae))}function qe(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Xt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Xt);else for(let Mt=0;Mt<32;Mt++)Xt[Mt]=Math.floor(Math.random()*255);return yt(Xt)}const Fe="pdfjs_internal_id_";D.AnnotationPrefix=Fe},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var x,_t,L,$,fi,ot,Ii,pt,lt,U,vt,gt,nt,X,Q,V,Oi,st,rt,lr,O,H;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(q){if(typeof q=="string"||q instanceof URL?q={url:q}:(0,_util.isArrayBuffer)(q)&&(q={data:q}),typeof q!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!q.url&&!q.data&&!q.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const N=new PDFDocumentLoadingTask,{docId:at}=N,Y=q.url?getUrlProp(q.url):null,St=q.data?getDataProp(q.data):null,kt=q.httpHeaders||null,it=q.withCredentials===!0,Rt=q.password??null,Wt=q.range instanceof PDFDataRangeTransport?q.range:null,qt=Number.isInteger(q.rangeChunkSize)&&q.rangeChunkSize>0?q.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Ct=q.worker instanceof PDFWorker?q.worker:null;const Yt=q.verbosity,ne=typeof q.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(q.docBaseUrl)?q.docBaseUrl:null,de=typeof q.cMapUrl=="string"?q.cMapUrl:null,_e=q.cMapPacked!==!1,et=q.CMapReaderFactory||DefaultCMapReaderFactory,w=typeof q.standardFontDataUrl=="string"?q.standardFontDataUrl:null,R=q.StandardFontDataFactory||DefaultStandardFontDataFactory,T=q.stopAtErrors!==!0,B=Number.isInteger(q.maxImageSize)&&q.maxImageSize>-1?q.maxImageSize:-1,j=q.isEvalSupported!==!1,K=typeof q.isOffscreenCanvasSupported=="boolean"?q.isOffscreenCanvasSupported:!_util.isNodeJS,ut=Number.isInteger(q.canvasMaxAreaInBytes)?q.canvasMaxAreaInBytes:-1,yt=typeof q.disableFontFace=="boolean"?q.disableFontFace:_util.isNodeJS,zt=q.fontExtraProperties===!0,Bt=q.enableXfa===!0,Gt=q.ownerDocument||globalThis.document,Jt=q.disableRange===!0,le=q.disableStream===!0,Qt=q.disableAutoFetch===!0,Se=q.pdfBug===!0,Re=Wt?Wt.length:q.length??NaN,ce=typeof q.useSystemFonts=="boolean"?q.useSystemFonts:!_util.isNodeJS&&!yt,Ce=typeof q.useWorkerFetch=="boolean"?q.useWorkerFetch:et===_display_utils.DOMCMapReaderFactory&&R===_display_utils.DOMStandardFontDataFactory&&de&&w&&(0,_display_utils.isValidFetchUrl)(de,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(w,document.baseURI),te=q.canvasFactory||new DefaultCanvasFactory({ownerDocument:Gt}),jt=q.filterFactory||new DefaultFilterFactory({docId:at,ownerDocument:Gt}),It=null;(0,_util.setVerbosityLevel)(Yt);const Zt={canvasFactory:te,filterFactory:jt};if(Ce||(Zt.cMapReaderFactory=new et({baseUrl:de,isCompressed:_e}),Zt.standardFontDataFactory=new R({baseUrl:w})),!Ct){const Oe={verbosity:Yt,port:_worker_options.GlobalWorkerOptions.workerPort};Ct=Oe.port?PDFWorker.fromPort(Oe):new PDFWorker(Oe),N._worker=Ct}const ge={docId:at,apiVersion:"3.11.174",data:St,password:Rt,disableAutoFetch:Qt,rangeChunkSize:qt,length:Re,docBaseUrl:ne,enableXfa:Bt,evaluatorOptions:{maxImageSize:B,disableFontFace:yt,ignoreErrors:T,isEvalSupported:j,isOffscreenCanvasSupported:K,canvasMaxAreaInBytes:ut,fontExtraProperties:zt,useSystemFonts:ce,cMapUrl:Ce?de:null,standardFontDataUrl:Ce?w:null}},fe={ignoreErrors:T,isEvalSupported:j,disableFontFace:yt,fontExtraProperties:zt,enableXfa:Bt,ownerDocument:Gt,disableAutoFetch:Qt,pdfBug:Se,styleElement:It};return Ct.promise.then(function(){if(N.destroyed)throw new Error("Loading aborted");const Oe=_fetchDocument(Ct,ge),ze=new Promise(function(Ne){let We;Wt?We=new _transport_stream.PDFDataTransportStream({length:Re,initialData:Wt.initialData,progressiveDone:Wt.progressiveDone,contentDispositionFilename:Wt.contentDispositionFilename,disableRange:Jt,disableStream:le},Wt):St||(We=(Fe=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Fe):(0,_display_utils.isValidFetchUrl)(Fe.url)?new _displayFetch_stream.PDFFetchStream(Fe):new _displayNetwork.PDFNetworkStream(Fe))({url:Y,length:Re,httpHeaders:kt,withCredentials:it,rangeChunkSize:qt,disableRange:Jt,disableStream:le})),Ne(We)});return Promise.all([Oe,ze]).then(function([Ne,We]){if(N.destroyed)throw new Error("Loading aborted");const qe=new _message_handler.MessageHandler(at,Ne,Ct.port),Fe=new WorkerTransport(qe,N,We,fe,Zt);N._transport=Fe,qe.send("Ready",null)})}).catch(N._capability.reject),N}async function _fetchDocument(q,N){if(q.destroyed)throw new Error("Worker was destroyed");const at=await q.messageHandler.sendWithPromise("GetDocRequest",N,N.data?[N.data.buffer]:null);if(q.destroyed)throw new Error("Worker was destroyed");return at}function getUrlProp(q){if(q instanceof URL)return q.href;try{return new URL(q,window.location).href}catch{if(_util.isNodeJS&&typeof q=="string")return q}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(q){if(_util.isNodeJS&&typeof Buffer<"u"&&q instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(q instanceof Uint8Array&&q.byteLength===q.buffer.byteLength)return q;if(typeof q=="string")return(0,_util.stringToBytes)(q);if(typeof q=="object"&&!isNaN(q==null?void 0:q.length)||(0,_util.isArrayBuffer)(q))return new Uint8Array(q);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const D=class D{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${yi(D,x)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var N,at,Y;this.destroyed=!0;try{(N=this._worker)!=null&&N.port&&(this._worker._pendingDestroy=!0),await((at=this._transport)==null?void 0:at.destroy())}catch(St){throw(Y=this._worker)!=null&&Y.port&&delete this._worker._pendingDestroy,St}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};x=new WeakMap,mt(D,x,0);let PDFDocumentLoadingTask=D;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(N,at,Y=!1,St=null){this.length=N,this.initialData=at,this.progressiveDone=Y,this.contentDispositionFilename=St,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(N){this._rangeListeners.push(N)}addProgressListener(N){this._progressListeners.push(N)}addProgressiveReadListener(N){this._progressiveReadListeners.push(N)}addProgressiveDoneListener(N){this._progressiveDoneListeners.push(N)}onDataRange(N,at){for(const Y of this._rangeListeners)Y(N,at)}onDataProgress(N,at){this._readyCapability.promise.then(()=>{for(const Y of this._progressListeners)Y(N,at)})}onDataProgressiveRead(N){this._readyCapability.promise.then(()=>{for(const at of this._progressiveReadListeners)at(N)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const N of this._progressiveDoneListeners)N()})}transportReady(){this._readyCapability.resolve()}requestDataRange(N,at){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(N,at){this._pdfInfo=N,this._transport=at,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Y=>{if(!Y)return Y;const St=[];for(const kt in Y)St.push(...Y[kt]);return St}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(N){return this._transport.getPage(N)}getPageIndex(N){return this._transport.getPageIndex(N)}getDestinations(){return this._transport.getDestinations()}getDestination(N){return this._transport.getDestination(N)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(N=!1){return this._transport.startCleanup(N||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(N,at,Y,St=!1){mt(this,$);mt(this,ot);mt(this,_t,null);mt(this,L,!1);this._pageIndex=N,this._pageInfo=at,this._transport=Y,this._stats=St?new _display_utils.StatTimer:null,this._pdfBug=St,this.commonObjs=Y.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:N,rotation:at=this.rotate,offsetX:Y=0,offsetY:St=0,dontFlip:kt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:N,rotation:at,offsetX:Y,offsetY:St,dontFlip:kt})}getAnnotations({intent:N="display"}={}){const at=this._transport.getRenderingIntent(N);return this._transport.getAnnotations(this._pageIndex,at.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var N;return((N=this._transport._htmlForXfa)==null?void 0:N.children[this._pageIndex])||null}render({canvasContext:N,viewport:at,intent:Y="display",annotationMode:St=_util.AnnotationMode.ENABLE,transform:kt=null,background:it=null,optionalContentConfigPromise:Rt=null,annotationCanvasMap:Wt=null,pageColors:qt=null,printAnnotationStorage:Ct=null}){var R,T;(R=this._stats)==null||R.time("Overall");const Yt=this._transport.getRenderingIntent(Y,St,Ct);Ut(this,L,!1),xt(this,ot,Ii).call(this),Rt||(Rt=this._transport.getOptionalContentConfig());let ne=this._intentStates.get(Yt.cacheKey);ne||(ne=Object.create(null),this._intentStates.set(Yt.cacheKey,ne)),ne.streamReaderCancelTimeout&&(clearTimeout(ne.streamReaderCancelTimeout),ne.streamReaderCancelTimeout=null);const de=!!(Yt.renderingIntent&_util.RenderingIntentFlag.PRINT);ne.displayReadyCapability||(ne.displayReadyCapability=new _util.PromiseCapability,ne.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(Yt));const _e=B=>{var j,K;ne.renderTasks.delete(et),(this._maybeCleanupAfterRender||de)&&Ut(this,L,!0),xt(this,$,fi).call(this,!de),B?(et.capability.reject(B),this._abortOperatorList({intentState:ne,reason:B instanceof Error?B:new Error(B)})):et.capability.resolve(),(j=this._stats)==null||j.timeEnd("Rendering"),(K=this._stats)==null||K.timeEnd("Overall")},et=new InternalRenderTask({callback:_e,params:{canvasContext:N,viewport:at,transform:kt,background:it},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Wt,operatorList:ne.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!de,pdfBug:this._pdfBug,pageColors:qt});(ne.renderTasks||(ne.renderTasks=new Set)).add(et);const w=et.task;return Promise.all([ne.displayReadyCapability.promise,Rt]).then(([B,j])=>{var K;if(this.destroyed){_e();return}(K=this._stats)==null||K.time("Rendering"),et.initializeGraphics({transparency:B,optionalContentConfig:j}),et.operatorListChanged()}).catch(_e),w}getOperatorList({intent:N="display",annotationMode:at=_util.AnnotationMode.ENABLE,printAnnotationStorage:Y=null}={}){var Wt;function St(){it.operatorList.lastChunk&&(it.opListReadCapability.resolve(it.operatorList),it.renderTasks.delete(Rt))}const kt=this._transport.getRenderingIntent(N,at,Y,!0);let it=this._intentStates.get(kt.cacheKey);it||(it=Object.create(null),this._intentStates.set(kt.cacheKey,it));let Rt;return it.opListReadCapability||(Rt=Object.create(null),Rt.operatorListChanged=St,it.opListReadCapability=new _util.PromiseCapability,(it.renderTasks||(it.renderTasks=new Set)).add(Rt),it.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Wt=this._stats)==null||Wt.time("Page Request"),this._pumpOperatorList(kt)),it.opListReadCapability.promise}streamTextContent({includeMarkedContent:N=!1,disableNormalization:at=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:N===!0,disableNormalization:at===!0},{highWaterMark:100,size(St){return St.items.length}})}getTextContent(N={}){if(this._transport._htmlForXfa)return this.getXfa().then(Y=>_xfa_text.XfaText.textContent(Y));const at=this.streamTextContent(N);return new Promise(function(Y,St){function kt(){it.read().then(function({value:Wt,done:qt}){if(qt){Y(Rt);return}Object.assign(Rt.styles,Wt.styles),Rt.items.push(...Wt.items),kt()},St)}const it=at.getReader(),Rt={items:[],styles:Object.create(null)};kt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const N=[];for(const at of this._intentStates.values())if(this._abortOperatorList({intentState:at,reason:new Error("Page was destroyed."),force:!0}),!at.opListReadCapability)for(const Y of at.renderTasks)N.push(Y.completed),Y.cancel();return this.objs.clear(),Ut(this,L,!1),xt(this,ot,Ii).call(this),Promise.all(N)}cleanup(N=!1){Ut(this,L,!0);const at=xt(this,$,fi).call(this,!1);return N&&at&&this._stats&&(this._stats=new _display_utils.StatTimer),at}_startRenderPage(N,at){var St,kt;const Y=this._intentStates.get(at);Y&&((St=this._stats)==null||St.timeEnd("Page Request"),(kt=Y.displayReadyCapability)==null||kt.resolve(N))}_renderPageChunk(N,at){for(let Y=0,St=N.length;Y<St;Y++)at.operatorList.fnArray.push(N.fnArray[Y]),at.operatorList.argsArray.push(N.argsArray[Y]);at.operatorList.lastChunk=N.lastChunk,at.operatorList.separateAnnots=N.separateAnnots;for(const Y of at.renderTasks)Y.operatorListChanged();N.lastChunk&&xt(this,$,fi).call(this,!0)}_pumpOperatorList({renderingIntent:N,cacheKey:at,annotationStorageSerializable:Y}){const{map:St,transfers:kt}=Y,Rt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:N,cacheKey:at,annotationStorage:St},kt).getReader(),Wt=this._intentStates.get(at);Wt.streamReader=Rt;const qt=()=>{Rt.read().then(({value:Ct,done:Yt})=>{if(Yt){Wt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Ct,Wt),qt())},Ct=>{if(Wt.streamReader=null,!this._transport.destroyed){if(Wt.operatorList){Wt.operatorList.lastChunk=!0;for(const Yt of Wt.renderTasks)Yt.operatorListChanged();xt(this,$,fi).call(this,!0)}if(Wt.displayReadyCapability)Wt.displayReadyCapability.reject(Ct);else if(Wt.opListReadCapability)Wt.opListReadCapability.reject(Ct);else throw Ct}})};qt()}_abortOperatorList({intentState:N,reason:at,force:Y=!1}){if(N.streamReader){if(N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null),!Y){if(N.renderTasks.size>0)return;if(at instanceof _display_utils.RenderingCancelledException){let St=RENDERING_CANCELLED_TIMEOUT;at.extraDelay>0&&at.extraDelay<1e3&&(St+=at.extraDelay),N.streamReaderCancelTimeout=setTimeout(()=>{N.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:N,reason:at,force:!0})},St);return}}if(N.streamReader.cancel(new _util.AbortException(at.message)).catch(()=>{}),N.streamReader=null,!this._transport.destroyed){for(const[St,kt]of this._intentStates)if(kt===N){this._intentStates.delete(St);break}this.cleanup()}}}get stats(){return this._stats}}_t=new WeakMap,L=new WeakMap,$=new WeakSet,fi=function(N=!1){if(xt(this,ot,Ii).call(this),!y(this,L)||this.destroyed)return!1;if(N)return Ut(this,_t,setTimeout(()=>{Ut(this,_t,null),xt(this,$,fi).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:at,operatorList:Y}of this._intentStates.values())if(at.size>0||!Y.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Ut(this,L,!1),!0},ot=new WeakSet,Ii=function(){y(this,_t)&&(clearTimeout(y(this,_t)),Ut(this,_t,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){mt(this,pt,new Set);mt(this,lt,Promise.resolve())}postMessage(N,at){const Y={data:structuredClone(N,at?{transfer:at}:null)};y(this,lt).then(()=>{for(const St of y(this,pt))St.call(this,Y)})}addEventListener(N,at){y(this,pt).add(at)}removeEventListener(N,at){y(this,pt).delete(at)}terminate(){y(this,pt).clear()}}pt=new WeakMap,lt=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const q=(U=document==null?void 0:document.currentScript)==null?void 0:U.src;q&&(PDFWorkerUtil.fallbackWorkerSrc=q.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(q,N){let at;try{if(at=new URL(q),!at.origin||at.origin==="null")return!1}catch{return!1}const Y=new URL(N,at);return at.origin===Y.origin},PDFWorkerUtil.createCDNWrapper=function(q){const N=`importScripts("${q}");`;return URL.createObjectURL(new Blob([N]))}}const _PDFWorker=class _PDFWorker{constructor({name:q=null,port:N=null,verbosity:at=(0,_util.getVerbosityLevel)()}={}){var Y;if(this.name=q,this.destroyed=!1,this.verbosity=at,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,N){if((Y=y(_PDFWorker,vt))!=null&&Y.has(N))throw new Error("Cannot use more than one PDFWorker per port.");(y(_PDFWorker,vt)||Ut(_PDFWorker,vt,new WeakMap)).set(N,this),this._initializeFromPort(N);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(q){this._port=q,this._messageHandler=new _message_handler.MessageHandler("main","worker",q),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:q}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,q)||(q=PDFWorkerUtil.createCDNWrapper(new URL(q,window.location).href));const N=new Worker(q),at=new _message_handler.MessageHandler("main","worker",N),Y=()=>{N.removeEventListener("error",St),at.destroy(),N.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},St=()=>{this._webWorker||Y()};N.addEventListener("error",St),at.on("test",it=>{if(N.removeEventListener("error",St),this.destroyed){Y();return}it?(this._messageHandler=at,this._port=N,this._webWorker=N,this._readyCapability.resolve(),at.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),at.destroy(),N.terminate())}),at.on("ready",it=>{if(N.removeEventListener("error",St),this.destroyed){Y();return}try{kt()}catch{this._setupFakeWorker()}});const kt=()=>{const it=new Uint8Array;at.send("test",it,[it.buffer])};kt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(q=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const N=new LoopbackPort;this._port=N;const at=`fake${PDFWorkerUtil.fakeWorkerId++}`,Y=new _message_handler.MessageHandler(at+"_worker",at,N);q.setup(Y,N);const St=new _message_handler.MessageHandler(at,at+"_worker",N);this._messageHandler=St,this._readyCapability.resolve(),St.send("configure",{verbosity:this.verbosity})}).catch(q=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${q.message}".`))})}destroy(){var q;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(q=y(_PDFWorker,vt))==null||q.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(q){var at;if(!(q!=null&&q.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const N=(at=y(this,vt))==null?void 0:at.get(q.port);if(N){if(N._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return N}return new _PDFWorker(q)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var q;try{return((q=globalThis.pdfjsWorker)==null?void 0:q.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};vt=new WeakMap,mt(_PDFWorker,vt,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(N,at,Y,St,kt){mt(this,V);mt(this,gt,new Map);mt(this,nt,new Map);mt(this,X,new Map);mt(this,Q,null);this.messageHandler=N,this.loadingTask=at,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:St.ownerDocument,styleElement:St.styleElement}),this._params=St,this.canvasFactory=kt.canvasFactory,this.filterFactory=kt.filterFactory,this.cMapReaderFactory=kt.cMapReaderFactory,this.standardFontDataFactory=kt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Y,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(N,at=_util.AnnotationMode.ENABLE,Y=null,St=!1){let kt=_util.RenderingIntentFlag.DISPLAY,it=_annotation_storage.SerializableEmpty;switch(N){case"any":kt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":kt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${N}`)}switch(at){case _util.AnnotationMode.DISABLE:kt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:kt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:kt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,it=(kt&_util.RenderingIntentFlag.PRINT&&Y instanceof _annotation_storage.PrintAnnotationStorage?Y:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${at}`)}return St&&(kt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:kt,cacheKey:`${kt}_${it.hash}`,annotationStorageSerializable:it}}destroy(){var Y;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Y=y(this,Q))==null||Y.reject(new Error("Worker was destroyed during onPassword callback"));const N=[];for(const St of y(this,nt).values())N.push(St._destroy());y(this,nt).clear(),y(this,X).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const at=this.messageHandler.sendWithPromise("Terminate",null);return N.push(at),Promise.all(N).then(()=>{var St;this.commonObjs.clear(),this.fontLoader.clear(),y(this,gt).clear(),this.filterFactory.destroy(),(St=this._networkStream)==null||St.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:N,loadingTask:at}=this;N.on("GetReader",(Y,St)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=kt=>{this._lastProgress={loaded:kt.loaded,total:kt.total}},St.onPull=()=>{this._fullReader.read().then(function({value:kt,done:it}){if(it){St.close();return}(0,_util.assert)(kt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),St.enqueue(new Uint8Array(kt),1,[kt])}).catch(kt=>{St.error(kt)})},St.onCancel=kt=>{this._fullReader.cancel(kt),St.ready.catch(it=>{if(!this.destroyed)throw it})}}),N.on("ReaderHeadersReady",Y=>{const St=new _util.PromiseCapability,kt=this._fullReader;return kt.headersReady.then(()=>{var it;(!kt.isStreamingSupported||!kt.isRangeSupported)&&(this._lastProgress&&((it=at.onProgress)==null||it.call(at,this._lastProgress)),kt.onProgress=Rt=>{var Wt;(Wt=at.onProgress)==null||Wt.call(at,{loaded:Rt.loaded,total:Rt.total})}),St.resolve({isStreamingSupported:kt.isStreamingSupported,isRangeSupported:kt.isRangeSupported,contentLength:kt.contentLength})},St.reject),St.promise}),N.on("GetRangeReader",(Y,St)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const kt=this._networkStream.getRangeReader(Y.begin,Y.end);if(!kt){St.close();return}St.onPull=()=>{kt.read().then(function({value:it,done:Rt}){if(Rt){St.close();return}(0,_util.assert)(it instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),St.enqueue(new Uint8Array(it),1,[it])}).catch(it=>{St.error(it)})},St.onCancel=it=>{kt.cancel(it),St.ready.catch(Rt=>{if(!this.destroyed)throw Rt})}}),N.on("GetDoc",({pdfInfo:Y})=>{this._numPages=Y.numPages,this._htmlForXfa=Y.htmlForXfa,delete Y.htmlForXfa,at._capability.resolve(new PDFDocumentProxy(Y,this))}),N.on("DocException",function(Y){let St;switch(Y.name){case"PasswordException":St=new _util.PasswordException(Y.message,Y.code);break;case"InvalidPDFException":St=new _util.InvalidPDFException(Y.message);break;case"MissingPDFException":St=new _util.MissingPDFException(Y.message);break;case"UnexpectedResponseException":St=new _util.UnexpectedResponseException(Y.message,Y.status);break;case"UnknownErrorException":St=new _util.UnknownErrorException(Y.message,Y.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}at._capability.reject(St)}),N.on("PasswordRequest",Y=>{if(Ut(this,Q,new _util.PromiseCapability),at.onPassword){const St=kt=>{kt instanceof Error?y(this,Q).reject(kt):y(this,Q).resolve({password:kt})};try{at.onPassword(St,Y.code)}catch(kt){y(this,Q).reject(kt)}}else y(this,Q).reject(new _util.PasswordException(Y.message,Y.code));return y(this,Q).promise}),N.on("DataLoaded",Y=>{var St;(St=at.onProgress)==null||St.call(at,{loaded:Y.length,total:Y.length}),this.downloadInfoCapability.resolve(Y)}),N.on("StartRenderPage",Y=>{if(this.destroyed)return;y(this,nt).get(Y.pageIndex)._startRenderPage(Y.transparency,Y.cacheKey)}),N.on("commonobj",([Y,St,kt])=>{var it;if(!this.destroyed&&!this.commonObjs.has(Y))switch(St){case"Font":const Rt=this._params;if("error"in kt){const Ct=kt.error;(0,_util.warn)(`Error during font loading: ${Ct}`),this.commonObjs.resolve(Y,Ct);break}const Wt=Rt.pdfBug&&((it=globalThis.FontInspector)!=null&&it.enabled)?(Ct,Yt)=>globalThis.FontInspector.fontAdded(Ct,Yt):null,qt=new _font_loader.FontFaceObject(kt,{isEvalSupported:Rt.isEvalSupported,disableFontFace:Rt.disableFontFace,ignoreErrors:Rt.ignoreErrors,inspectFont:Wt});this.fontLoader.bind(qt).catch(Ct=>N.sendWithPromise("FontFallback",{id:Y})).finally(()=>{!Rt.fontExtraProperties&&qt.data&&(qt.data=null),this.commonObjs.resolve(Y,qt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Y,kt);break;default:throw new Error(`Got unknown common object type ${St}`)}}),N.on("obj",([Y,St,kt,it])=>{var Wt;if(this.destroyed)return;const Rt=y(this,nt).get(St);if(!Rt.objs.has(Y))switch(kt){case"Image":if(Rt.objs.resolve(Y,it),it){let qt;if(it.bitmap){const{width:Ct,height:Yt}=it;qt=Ct*Yt*4}else qt=((Wt=it.data)==null?void 0:Wt.length)||0;qt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Rt._maybeCleanupAfterRender=!0)}break;case"Pattern":Rt.objs.resolve(Y,it);break;default:throw new Error(`Got unknown object type ${kt}`)}}),N.on("DocProgress",Y=>{var St;this.destroyed||(St=at.onProgress)==null||St.call(at,{loaded:Y.loaded,total:Y.total})}),N.on("FetchBuiltInCMap",Y=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Y):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),N.on("FetchStandardFontData",Y=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Y):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Y;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:N,transfers:at}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:N,filename:((Y=this._fullReader)==null?void 0:Y.filename)??null},at).finally(()=>{this.annotationStorage.resetModified()})}getPage(N){if(!Number.isInteger(N)||N<=0||N>this._numPages)return Promise.reject(new Error("Invalid page request."));const at=N-1,Y=y(this,X).get(at);if(Y)return Y;const St=this.messageHandler.sendWithPromise("GetPage",{pageIndex:at}).then(kt=>{if(this.destroyed)throw new Error("Transport destroyed");const it=new PDFPageProxy(at,kt,this,this._params.pdfBug);return y(this,nt).set(at,it),it});return y(this,X).set(at,St),St}getPageIndex(N){return typeof N!="object"||N===null||!Number.isInteger(N.num)||N.num<0||!Number.isInteger(N.gen)||N.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:N.num,gen:N.gen})}getAnnotations(N,at){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:N,intent:at})}getFieldObjects(){return xt(this,V,Oi).call(this,"GetFieldObjects")}hasJSActions(){return xt(this,V,Oi).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(N){return typeof N!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:N})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return xt(this,V,Oi).call(this,"GetDocJSActions")}getPageJSActions(N){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:N})}getStructTree(N){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:N})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(N=>new _optional_content_config.OptionalContentConfig(N))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const N="GetMetadata",at=y(this,gt).get(N);if(at)return at;const Y=this.messageHandler.sendWithPromise(N,null).then(St=>{var kt,it;return{info:St[0],metadata:St[1]?new _metadata.Metadata(St[1]):null,contentDispositionFilename:((kt=this._fullReader)==null?void 0:kt.filename)??null,contentLength:((it=this._fullReader)==null?void 0:it.contentLength)??null}});return y(this,gt).set(N,Y),Y}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(N=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const at of y(this,nt).values())if(!at.cleanup())throw new Error(`startCleanup: Page ${at.pageNumber} is currently rendering.`);this.commonObjs.clear(),N||this.fontLoader.clear(),y(this,gt).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:N,enableXfa:at}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:N,enableXfa:at})}}gt=new WeakMap,nt=new WeakMap,X=new WeakMap,Q=new WeakMap,V=new WeakSet,Oi=function(N,at=null){const Y=y(this,gt).get(N);if(Y)return Y;const St=this.messageHandler.sendWithPromise(N,at);return y(this,gt).set(N,St),St};class PDFObjects{constructor(){mt(this,rt);mt(this,st,Object.create(null))}get(N,at=null){if(at){const St=xt(this,rt,lr).call(this,N);return St.capability.promise.then(()=>at(St.data)),null}const Y=y(this,st)[N];if(!(Y!=null&&Y.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${N}.`);return Y.data}has(N){const at=y(this,st)[N];return(at==null?void 0:at.capability.settled)||!1}resolve(N,at=null){const Y=xt(this,rt,lr).call(this,N);Y.data=at,Y.capability.resolve()}clear(){var N;for(const at in y(this,st)){const{data:Y}=y(this,st)[at];(N=Y==null?void 0:Y.bitmap)==null||N.close()}Ut(this,st,Object.create(null))}}st=new WeakMap,rt=new WeakSet,lr=function(N){var at;return(at=y(this,st))[N]||(at[N]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(N){mt(this,O,null);Ut(this,O,N),this.onContinue=null}get promise(){return y(this,O).capability.promise}cancel(N=0){y(this,O).cancel(null,N)}get separateAnnots(){const{separateAnnots:N}=y(this,O).operatorList;if(!N)return!1;const{annotationCanvasMap:at}=y(this,O);return N.form||N.canvas&&(at==null?void 0:at.size)>0}}O=new WeakMap,exports.RenderTask=RenderTask;const ct=class ct{constructor({callback:N,params:at,objs:Y,commonObjs:St,annotationCanvasMap:kt,operatorList:it,pageIndex:Rt,canvasFactory:Wt,filterFactory:qt,useRequestAnimationFrame:Ct=!1,pdfBug:Yt=!1,pageColors:ne=null}){this.callback=N,this.params=at,this.objs=Y,this.commonObjs=St,this.annotationCanvasMap=kt,this.operatorListIdx=null,this.operatorList=it,this._pageIndex=Rt,this.canvasFactory=Wt,this.filterFactory=qt,this._pdfBug=Yt,this.pageColors=ne,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Ct===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=at.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:N=!1,optionalContentConfig:at}){var Rt,Wt;if(this.cancelled)return;if(this._canvas){if(y(ct,H).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");y(ct,H).add(this._canvas)}this._pdfBug&&((Rt=globalThis.StepperManager)!=null&&Rt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Y,viewport:St,transform:kt,background:it}=this.params;this.gfx=new _canvas.CanvasGraphics(Y,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:at},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:kt,viewport:St,transparency:N,background:it}),this.operatorListIdx=0,this.graphicsReady=!0,(Wt=this.graphicsReadyCallback)==null||Wt.call(this)}cancel(N=null,at=0){var Y;this.running=!1,this.cancelled=!0,(Y=this.gfx)==null||Y.endDrawing(),y(ct,H).delete(this._canvas),this.callback(N||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,at))}operatorListChanged(){var N;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(N=this.stepper)==null||N.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),y(ct,H).delete(this._canvas),this.callback())))}};H=new WeakMap,mt(ct,H,new WeakSet);let InternalRenderTask=ct;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(x,D,_t)=>{var lt,U,vt,as,nt;Object.defineProperty(D,"__esModule",{value:!0}),D.SerializableEmpty=D.PrintAnnotationStorage=D.AnnotationStorage=void 0;var L=_t(1),$=_t(4),_=_t(8);const ot=Object.freeze({map:null,hash:"",transfers:void 0});D.SerializableEmpty=ot;class $t{constructor(){mt(this,vt);mt(this,lt,!1);mt(this,U,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(Q,V){const J=y(this,U).get(Q);return J===void 0?V:Object.assign(V,J)}getRawValue(Q){return y(this,U).get(Q)}remove(Q){if(y(this,U).delete(Q),y(this,U).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const V of y(this,U).values())if(V instanceof $.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(Q,V){const J=y(this,U).get(Q);let st=!1;if(J!==void 0)for(const[rt,tt]of Object.entries(V))J[rt]!==tt&&(st=!0,J[rt]=tt);else st=!0,y(this,U).set(Q,V);st&&xt(this,vt,as).call(this),V instanceof $.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(V.constructor._type)}has(Q){return y(this,U).has(Q)}getAll(){return y(this,U).size>0?(0,L.objectFromMap)(y(this,U)):null}setAll(Q){for(const[V,J]of Object.entries(Q))this.setValue(V,J)}get size(){return y(this,U).size}resetModified(){y(this,lt)&&(Ut(this,lt,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new pt(this)}get serializable(){if(y(this,U).size===0)return ot;const Q=new Map,V=new _.MurmurHash3_64,J=[],st=Object.create(null);let rt=!1;for(const[tt,O]of y(this,U)){const H=O instanceof $.AnnotationEditor?O.serialize(!1,st):O;H&&(Q.set(tt,H),V.update(`${tt}:${JSON.stringify(H)}`),rt||(rt=!!H.bitmap))}if(rt)for(const tt of Q.values())tt.bitmap&&J.push(tt.bitmap);return Q.size>0?{map:Q,hash:V.hexdigest(),transfers:J}:ot}}lt=new WeakMap,U=new WeakMap,vt=new WeakSet,as=function(){y(this,lt)||(Ut(this,lt,!0),typeof this.onSetModified=="function"&&this.onSetModified())},D.AnnotationStorage=$t;class pt extends $t{constructor(V){super();mt(this,nt,void 0);const{map:J,hash:st,transfers:rt}=V.serializable,tt=structuredClone(J,rt?{transfer:rt}:null);Ut(this,nt,{map:tt,hash:st,transfers:rt})}get print(){(0,L.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return y(this,nt)}}nt=new WeakMap,D.PrintAnnotationStorage=pt},(x,D,_t)=>{var pt,lt,U,vt,gt,nt,X,Q,V,J,st,rt,tt,O,H,cr,q,ur,at,hr,St,dr,it,os,Wt,ls,Ct,cs,ne,fr,_e,us;Object.defineProperty(D,"__esModule",{value:!0}),D.AnnotationEditor=void 0;var L=_t(5),$=_t(1),_=_t(6);const w=class w{constructor(T){mt(this,H);mt(this,q);mt(this,St);mt(this,it);mt(this,Wt);mt(this,Ct);mt(this,ne);mt(this,_e);mt(this,pt,"");mt(this,lt,!1);mt(this,U,null);mt(this,vt,null);mt(this,gt,null);mt(this,nt,!1);mt(this,X,null);mt(this,Q,this.focusin.bind(this));mt(this,V,this.focusout.bind(this));mt(this,J,!1);mt(this,st,!1);mt(this,rt,!1);Pn(this,"_initialOptions",Object.create(null));Pn(this,"_uiManager",null);Pn(this,"_focusEventsAllowed",!0);Pn(this,"_l10nPromise",null);mt(this,tt,!1);mt(this,O,w._zIndex++);this.constructor===w&&(0,$.unreachable)("Cannot initialize AnnotationEditor."),this.parent=T.parent,this.id=T.id,this.width=this.height=null,this.pageIndex=T.parent.pageIndex,this.name=T.name,this.div=null,this._uiManager=T.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=T.isCentered,this._structTreeParentId=null;const{rotation:B,rawDims:{pageWidth:j,pageHeight:K,pageX:ut,pageY:yt}}=this.parent.viewport;this.rotation=B,this.pageRotation=(360+B-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[j,K],this.pageTranslation=[ut,yt];const[zt,Bt]=this.parentDimensions;this.x=T.x/zt,this.y=T.y/Bt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,$.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(T){const B=new $t({id:T.parent.getNextId(),parent:T.parent,uiManager:T._uiManager});B.annotationElementId=T.annotationElementId,B.deleted=!0,B._uiManager.addToAnnotationStorage(B)}static initialize(T,B=null){if(w._l10nPromise||(w._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(K=>[K,T.get(K)]))),B!=null&&B.strings)for(const K of B.strings)w._l10nPromise.set(K,T.get(K));if(w._borderLineWidth!==-1)return;const j=getComputedStyle(document.documentElement);w._borderLineWidth=parseFloat(j.getPropertyValue("--outline-width"))||0}static updateDefaultParams(T,B){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(T){return!1}static paste(T,B){(0,$.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return y(this,tt)}set _isDraggable(T){var B;Ut(this,tt,T),(B=this.div)==null||B.classList.toggle("draggable",T)}center(){const[T,B]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*B/(T*2),this.y+=this.width*T/(B*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*B/(T*2),this.y-=this.width*T/(B*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(T){this._uiManager.addCommands(T)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=y(this,O)}setParent(T){T!==null&&(this.pageIndex=T.pageIndex,this.pageDimensions=T.pageDimensions),this.parent=T}focusin(T){this._focusEventsAllowed&&(y(this,J)?Ut(this,J,!1):this.parent.setSelected(this))}focusout(T){var j;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const B=T.relatedTarget;B!=null&&B.closest(`#${this.id}`)||(T.preventDefault(),(j=this.parent)!=null&&j.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(T,B,j,K){const[ut,yt]=this.parentDimensions;[j,K]=this.screenToPageTranslation(j,K),this.x=(T+j)/ut,this.y=(B+K)/yt,this.fixAndSetPosition()}translate(T,B){xt(this,H,cr).call(this,this.parentDimensions,T,B)}translateInPage(T,B){xt(this,H,cr).call(this,this.pageDimensions,T,B),this.div.scrollIntoView({block:"nearest"})}drag(T,B){const[j,K]=this.parentDimensions;if(this.x+=T/j,this.y+=B/K,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Gt,y:Jt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Gt,Jt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:ut,y:yt}=this;const[zt,Bt]=xt(this,q,ur).call(this);ut+=zt,yt+=Bt,this.div.style.left=`${(100*ut).toFixed(2)}%`,this.div.style.top=`${(100*yt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[T,B]=this.pageDimensions;let{x:j,y:K,width:ut,height:yt}=this;switch(ut*=T,yt*=B,j*=T,K*=B,this.rotation){case 0:j=Math.max(0,Math.min(T-ut,j)),K=Math.max(0,Math.min(B-yt,K));break;case 90:j=Math.max(0,Math.min(T-yt,j)),K=Math.min(B,Math.max(ut,K));break;case 180:j=Math.min(T,Math.max(ut,j)),K=Math.min(B,Math.max(yt,K));break;case 270:j=Math.min(T,Math.max(yt,j)),K=Math.max(0,Math.min(B-ut,K));break}this.x=j/=T,this.y=K/=B;const[zt,Bt]=xt(this,q,ur).call(this);j+=zt,K+=Bt;const{style:Gt}=this.div;Gt.left=`${(100*j).toFixed(2)}%`,Gt.top=`${(100*K).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(T,B){var j;return xt(j=w,at,hr).call(j,T,B,this.parentRotation)}pageTranslationToScreen(T,B){var j;return xt(j=w,at,hr).call(j,T,B,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:T,pageDimensions:[B,j]}=this,K=B*T,ut=j*T;return $.FeatureTest.isCSSRoundSupported?[Math.round(K),Math.round(ut)]:[K,ut]}setDims(T,B){var ut;const[j,K]=this.parentDimensions;this.div.style.width=`${(100*T/j).toFixed(2)}%`,y(this,nt)||(this.div.style.height=`${(100*B/K).toFixed(2)}%`),(ut=y(this,U))==null||ut.classList.toggle("small",T<w.SMALL_EDITOR_SIZE||B<w.SMALL_EDITOR_SIZE)}fixDims(){const{style:T}=this.div,{height:B,width:j}=T,K=j.endsWith("%"),ut=!y(this,nt)&&B.endsWith("%");if(K&&ut)return;const[yt,zt]=this.parentDimensions;K||(T.width=`${(100*parseFloat(j)/yt).toFixed(2)}%`),!y(this,nt)&&!ut&&(T.height=`${(100*parseFloat(B)/zt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(y(this,U))return;const T=Ut(this,U,document.createElement("button"));T.className="altText";const B=await w._l10nPromise.get("editor_alt_text_button_label");T.textContent=B,T.setAttribute("aria-label",B),T.tabIndex="0",T.addEventListener("contextmenu",_.noContextMenu),T.addEventListener("pointerdown",j=>j.stopPropagation()),T.addEventListener("click",j=>{j.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),T.addEventListener("keydown",j=>{j.target===T&&j.key==="Enter"&&(j.preventDefault(),this._uiManager.editAltText(this))}),xt(this,ne,fr).call(this),this.div.append(T),w.SMALL_EDITOR_SIZE||(w.SMALL_EDITOR_SIZE=Math.min(128,Math.round(T.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:y(this,pt),decorative:y(this,lt)}}set altTextData({altText:T,decorative:B}){y(this,pt)===T&&y(this,lt)===B||(Ut(this,pt,T),Ut(this,lt,B),xt(this,ne,fr).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",y(this,Q)),this.div.addEventListener("focusout",y(this,V));const[T,B]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*B/T).toFixed(2)}%`,this.div.style.maxHeight=`${(100*T/B).toFixed(2)}%`);const[j,K]=this.getInitialTranslation();return this.translate(j,K),(0,L.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(T){const{isMac:B}=$.FeatureTest.platform;if(T.button!==0||T.ctrlKey&&B){T.preventDefault();return}Ut(this,J,!0),xt(this,_e,us).call(this,T)}moveInDOM(){var T;(T=this.parent)==null||T.moveEditorInDOM(this)}_setParentAndPosition(T,B,j){T.changeParent(this),this.x=B,this.y=j,this.fixAndSetPosition()}getRect(T,B){const j=this.parentScale,[K,ut]=this.pageDimensions,[yt,zt]=this.pageTranslation,Bt=T/j,Gt=B/j,Jt=this.x*K,le=this.y*ut,Qt=this.width*K,Se=this.height*ut;switch(this.rotation){case 0:return[Jt+Bt+yt,ut-le-Gt-Se+zt,Jt+Bt+Qt+yt,ut-le-Gt+zt];case 90:return[Jt+Gt+yt,ut-le+Bt+zt,Jt+Gt+Se+yt,ut-le+Bt+Qt+zt];case 180:return[Jt-Bt-Qt+yt,ut-le+Gt+zt,Jt-Bt+yt,ut-le+Gt+Se+zt];case 270:return[Jt-Gt-Se+yt,ut-le-Bt-Qt+zt,Jt-Gt+yt,ut-le-Bt+zt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(T,B){const[j,K,ut,yt]=T,zt=ut-j,Bt=yt-K;switch(this.rotation){case 0:return[j,B-yt,zt,Bt];case 90:return[j,B-K,Bt,zt];case 180:return[ut,B-K,zt,Bt];case 270:return[ut,B-yt,Bt,zt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Ut(this,rt,!0)}disableEditMode(){Ut(this,rt,!1)}isInEditMode(){return y(this,rt)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var T,B;(T=this.div)==null||T.addEventListener("focusin",y(this,Q)),(B=this.div)==null||B.addEventListener("focusout",y(this,V))}serialize(T=!1,B=null){(0,$.unreachable)("An editor must be serializable")}static deserialize(T,B,j){const K=new this.prototype.constructor({parent:B,id:B.getNextId(),uiManager:j});K.rotation=T.rotation;const[ut,yt]=K.pageDimensions,[zt,Bt,Gt,Jt]=K.getRectInCurrentCoords(T.rect,yt);return K.x=zt/ut,K.y=Bt/yt,K.width=Gt/ut,K.height=Jt/yt,K}remove(){var T;this.div.removeEventListener("focusin",y(this,Q)),this.div.removeEventListener("focusout",y(this,V)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(T=y(this,U))==null||T.remove(),Ut(this,U,null),Ut(this,vt,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(xt(this,it,os).call(this),y(this,X).classList.remove("hidden"))}select(){var T;this.makeResizable(),(T=this.div)==null||T.classList.add("selectedEditor")}unselect(){var T,B,j;(T=y(this,X))==null||T.classList.add("hidden"),(B=this.div)==null||B.classList.remove("selectedEditor"),(j=this.div)!=null&&j.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(T,B){}disableEditing(){y(this,U)&&(y(this,U).hidden=!0)}enableEditing(){y(this,U)&&(y(this,U).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return y(this,st)}set isEditing(T){Ut(this,st,T),this.parent&&(T?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(T,B){Ut(this,nt,!0);const j=T/B,{style:K}=this.div;K.aspectRatio=j,K.height="auto"}static get MIN_SIZE(){return 16}};pt=new WeakMap,lt=new WeakMap,U=new WeakMap,vt=new WeakMap,gt=new WeakMap,nt=new WeakMap,X=new WeakMap,Q=new WeakMap,V=new WeakMap,J=new WeakMap,st=new WeakMap,rt=new WeakMap,tt=new WeakMap,O=new WeakMap,H=new WeakSet,cr=function([T,B],j,K){[j,K]=this.screenToPageTranslation(j,K),this.x+=j/T,this.y+=K/B,this.fixAndSetPosition()},q=new WeakSet,ur=function(){const[T,B]=this.parentDimensions,{_borderLineWidth:j}=w,K=j/T,ut=j/B;switch(this.rotation){case 90:return[-K,ut];case 180:return[K,ut];case 270:return[K,-ut];default:return[-K,-ut]}},at=new WeakSet,hr=function(T,B,j){switch(j){case 90:return[B,-T];case 180:return[-T,-B];case 270:return[-B,T];default:return[T,B]}},St=new WeakSet,dr=function(T){switch(T){case 90:{const[B,j]=this.pageDimensions;return[0,-B/j,j/B,0]}case 180:return[-1,0,0,-1];case 270:{const[B,j]=this.pageDimensions;return[0,B/j,-j/B,0]}default:return[1,0,0,1]}},it=new WeakSet,os=function(){if(y(this,X))return;Ut(this,X,document.createElement("div")),y(this,X).classList.add("resizers");const T=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||T.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const B of T){const j=document.createElement("div");y(this,X).append(j),j.classList.add("resizer",B),j.addEventListener("pointerdown",xt(this,Wt,ls).bind(this,B)),j.addEventListener("contextmenu",_.noContextMenu)}this.div.prepend(y(this,X))},Wt=new WeakSet,ls=function(T,B){B.preventDefault();const{isMac:j}=$.FeatureTest.platform;if(B.button!==0||B.ctrlKey&&j)return;const K=xt(this,Ct,cs).bind(this,T),ut=this._isDraggable;this._isDraggable=!1;const yt={passive:!0,capture:!0};window.addEventListener("pointermove",K,yt);const zt=this.x,Bt=this.y,Gt=this.width,Jt=this.height,le=this.parent.div.style.cursor,Qt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(B.target).cursor;const Se=()=>{this._isDraggable=ut,window.removeEventListener("pointerup",Se),window.removeEventListener("blur",Se),window.removeEventListener("pointermove",K,yt),this.parent.div.style.cursor=le,this.div.style.cursor=Qt;const Re=this.x,ce=this.y,Ce=this.width,te=this.height;Re===zt&&ce===Bt&&Ce===Gt&&te===Jt||this.addCommands({cmd:()=>{this.width=Ce,this.height=te,this.x=Re,this.y=ce;const[jt,It]=this.parentDimensions;this.setDims(jt*Ce,It*te),this.fixAndSetPosition()},undo:()=>{this.width=Gt,this.height=Jt,this.x=zt,this.y=Bt;const[jt,It]=this.parentDimensions;this.setDims(jt*Gt,It*Jt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Se),window.addEventListener("blur",Se)},Ct=new WeakSet,cs=function(T,B){const[j,K]=this.parentDimensions,ut=this.x,yt=this.y,zt=this.width,Bt=this.height,Gt=w.MIN_SIZE/j,Jt=w.MIN_SIZE/K,le=ae=>Math.round(ae*1e4)/1e4,Qt=xt(this,St,dr).call(this,this.rotation),Se=(ae,Kt)=>[Qt[0]*ae+Qt[2]*Kt,Qt[1]*ae+Qt[3]*Kt],Re=xt(this,St,dr).call(this,360-this.rotation),ce=(ae,Kt)=>[Re[0]*ae+Re[2]*Kt,Re[1]*ae+Re[3]*Kt];let Ce,te,jt=!1,It=!1;switch(T){case"topLeft":jt=!0,Ce=(ae,Kt)=>[0,0],te=(ae,Kt)=>[ae,Kt];break;case"topMiddle":Ce=(ae,Kt)=>[ae/2,0],te=(ae,Kt)=>[ae/2,Kt];break;case"topRight":jt=!0,Ce=(ae,Kt)=>[ae,0],te=(ae,Kt)=>[0,Kt];break;case"middleRight":It=!0,Ce=(ae,Kt)=>[ae,Kt/2],te=(ae,Kt)=>[0,Kt/2];break;case"bottomRight":jt=!0,Ce=(ae,Kt)=>[ae,Kt],te=(ae,Kt)=>[0,0];break;case"bottomMiddle":Ce=(ae,Kt)=>[ae/2,Kt],te=(ae,Kt)=>[ae/2,0];break;case"bottomLeft":jt=!0,Ce=(ae,Kt)=>[0,Kt],te=(ae,Kt)=>[ae,0];break;case"middleLeft":It=!0,Ce=(ae,Kt)=>[0,Kt/2],te=(ae,Kt)=>[ae,Kt/2];break}const Zt=Ce(zt,Bt),ge=te(zt,Bt);let fe=Se(...ge);const Oe=le(ut+fe[0]),ze=le(yt+fe[1]);let Ne=1,We=1,[qe,Fe]=this.screenToPageTranslation(B.movementX,B.movementY);if([qe,Fe]=ce(qe/j,Fe/K),jt){const ae=Math.hypot(zt,Bt);Ne=We=Math.max(Math.min(Math.hypot(ge[0]-Zt[0]-qe,ge[1]-Zt[1]-Fe)/ae,1/zt,1/Bt),Gt/zt,Jt/Bt)}else It?Ne=Math.max(Gt,Math.min(1,Math.abs(ge[0]-Zt[0]-qe)))/zt:We=Math.max(Jt,Math.min(1,Math.abs(ge[1]-Zt[1]-Fe)))/Bt;const Je=le(zt*Ne),Xt=le(Bt*We);fe=Se(...te(Je,Xt));const Mt=Oe-fe[0],wt=ze-fe[1];this.width=Je,this.height=Xt,this.x=Mt,this.y=wt,this.setDims(j*Je,K*Xt),this.fixAndSetPosition()},ne=new WeakSet,fr=async function(){var j;const T=y(this,U);if(!T)return;if(!y(this,pt)&&!y(this,lt)){T.classList.remove("done"),(j=y(this,vt))==null||j.remove();return}w._l10nPromise.get("editor_alt_text_edit_button_label").then(K=>{T.setAttribute("aria-label",K)});let B=y(this,vt);if(!B){Ut(this,vt,B=document.createElement("span")),B.className="tooltip",B.setAttribute("role","tooltip");const K=B.id=`alt-text-tooltip-${this.id}`;T.setAttribute("aria-describedby",K);const ut=100;T.addEventListener("mouseenter",()=>{Ut(this,gt,setTimeout(()=>{Ut(this,gt,null),y(this,vt).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},ut))}),T.addEventListener("mouseleave",()=>{var yt;clearTimeout(y(this,gt)),Ut(this,gt,null),(yt=y(this,vt))==null||yt.classList.remove("show")})}T.classList.add("done"),B.innerText=y(this,lt)?await w._l10nPromise.get("editor_alt_text_decorative_tooltip"):y(this,pt),B.parentNode||T.append(B)},_e=new WeakSet,us=function(T){if(!this._isDraggable)return;const B=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let j,K;B&&(j={passive:!0,capture:!0},K=yt=>{const[zt,Bt]=this.screenToPageTranslation(yt.movementX,yt.movementY);this._uiManager.dragSelectedEditors(zt,Bt)},window.addEventListener("pointermove",K,j));const ut=()=>{if(window.removeEventListener("pointerup",ut),window.removeEventListener("blur",ut),B&&window.removeEventListener("pointermove",K,j),Ut(this,J,!1),!this._uiManager.endDragSession()){const{isMac:yt}=$.FeatureTest.platform;T.ctrlKey&&!yt||T.shiftKey||T.metaKey&&yt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",ut),window.addEventListener("blur",ut)},mt(w,at),Pn(w,"_borderLineWidth",-1),Pn(w,"_colorManager",new L.ColorManager),Pn(w,"_zIndex",1),Pn(w,"SMALL_EDITOR_SIZE",0);let ot=w;D.AnnotationEditor=ot;class $t extends ot{constructor(T){super(T),this.annotationElementId=T.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(x,D,_t)=>{var nt,X,Q,V,J,pr,tt,O,H,ct,q,hs,Y,St,kt,it,Rt,Wt,qt,Ct,Yt,ne,de,_e,et,w,R,T,B,j,K,ut,yt,zt,Bt,Gt,Jt,le,Qt,Se,Re,ce,Ce,te,jt,It,Zt,ds,fe,gr,ze,mr,We,Ni,Fe,vr,Xt,br,wt,Kn,Kt,Ai,mn,fs,ue,ps,me,_r,Me,Si,oe,yr;Object.defineProperty(D,"__esModule",{value:!0}),D.KeyboardManager=D.CommandManager=D.ColorManager=D.AnnotationEditorUIManager=void 0,D.bindEvents=_,D.opacityToHex=ot;var L=_t(1),$=_t(6);function _(dt,A,G){for(const ft of G)A.addEventListener(ft,dt[ft].bind(dt))}function ot(dt){return Math.round(Math.min(255,Math.max(1,255*dt))).toString(16).padStart(2,"0")}class $t{constructor(){mt(this,nt,0)}getId(){return`${L.AnnotationEditorPrefix}${yi(this,nt)._++}`}}nt=new WeakMap;const rt=class rt{constructor(){mt(this,J);mt(this,X,(0,L.getUuid)());mt(this,Q,0);mt(this,V,null)}static get _isSVGFittingCanvas(){const A='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',ft=new OffscreenCanvas(1,3).getContext("2d"),Pt=new Image;Pt.src=A;const Ft=Pt.decode().then(()=>(ft.drawImage(Pt,0,0,1,1,0,0,1,3),new Uint32Array(ft.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,L.shadow)(this,"_isSVGFittingCanvas",Ft)}async getFromFile(A){const{lastModified:G,name:ft,size:Pt,type:Ft}=A;return xt(this,J,pr).call(this,`${G}_${ft}_${Pt}_${Ft}`,A)}async getFromUrl(A){return xt(this,J,pr).call(this,A,A)}async getFromId(A){y(this,V)||Ut(this,V,new Map);const G=y(this,V).get(A);return G?G.bitmap?(G.refCounter+=1,G):G.file?this.getFromFile(G.file):this.getFromUrl(G.url):null}getSvgUrl(A){const G=y(this,V).get(A);return G!=null&&G.isSvg?G.svgUrl:null}deleteId(A){y(this,V)||Ut(this,V,new Map);const G=y(this,V).get(A);G&&(G.refCounter-=1,G.refCounter===0&&(G.bitmap=null))}isValidId(A){return A.startsWith(`image_${y(this,X)}_`)}};X=new WeakMap,Q=new WeakMap,V=new WeakMap,J=new WeakSet,pr=async function(A,G){y(this,V)||Ut(this,V,new Map);let ft=y(this,V).get(A);if(ft===null)return null;if(ft!=null&&ft.bitmap)return ft.refCounter+=1,ft;try{ft||(ft={bitmap:null,id:`image_${y(this,X)}_${yi(this,Q)._++}`,refCounter:0,isSvg:!1});let Pt;if(typeof G=="string"){ft.url=G;const Ft=await fetch(G);if(!Ft.ok)throw new Error(Ft.statusText);Pt=await Ft.blob()}else Pt=ft.file=G;if(Pt.type==="image/svg+xml"){const Ft=rt._isSVGFittingCanvas,Vt=new FileReader,re=new Image,ye=new Promise((ve,Ve)=>{re.onload=()=>{ft.bitmap=re,ft.isSvg=!0,ve()},Vt.onload=async()=>{const Ee=ft.svgUrl=Vt.result;re.src=await Ft?`${Ee}#svgView(preserveAspectRatio(none))`:Ee},re.onerror=Vt.onerror=Ve});Vt.readAsDataURL(Pt),await ye}else ft.bitmap=await createImageBitmap(Pt);ft.refCounter=1}catch(Pt){console.error(Pt),ft=null}return y(this,V).set(A,ft),ft&&y(this,V).set(ft.id,ft),ft};let pt=rt;class lt{constructor(A=128){mt(this,tt,[]);mt(this,O,!1);mt(this,H,void 0);mt(this,ct,-1);Ut(this,H,A)}add({cmd:A,undo:G,mustExec:ft,type:Pt=NaN,overwriteIfSameType:Ft=!1,keepUndo:Vt=!1}){if(ft&&A(),y(this,O))return;const re={cmd:A,undo:G,type:Pt};if(y(this,ct)===-1){y(this,tt).length>0&&(y(this,tt).length=0),Ut(this,ct,0),y(this,tt).push(re);return}if(Ft&&y(this,tt)[y(this,ct)].type===Pt){Vt&&(re.undo=y(this,tt)[y(this,ct)].undo),y(this,tt)[y(this,ct)]=re;return}const ye=y(this,ct)+1;ye===y(this,H)?y(this,tt).splice(0,1):(Ut(this,ct,ye),ye<y(this,tt).length&&y(this,tt).splice(ye)),y(this,tt).push(re)}undo(){y(this,ct)!==-1&&(Ut(this,O,!0),y(this,tt)[y(this,ct)].undo(),Ut(this,O,!1),Ut(this,ct,y(this,ct)-1))}redo(){y(this,ct)<y(this,tt).length-1&&(Ut(this,ct,y(this,ct)+1),Ut(this,O,!0),y(this,tt)[y(this,ct)].cmd(),Ut(this,O,!1))}hasSomethingToUndo(){return y(this,ct)!==-1}hasSomethingToRedo(){return y(this,ct)<y(this,tt).length-1}destroy(){Ut(this,tt,null)}}tt=new WeakMap,O=new WeakMap,H=new WeakMap,ct=new WeakMap,D.CommandManager=lt;class U{constructor(A){mt(this,q);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:G}=L.FeatureTest.platform;for(const[ft,Pt,Ft={}]of A)for(const Vt of ft){const re=Vt.startsWith("mac+");G&&re?(this.callbacks.set(Vt.slice(4),{callback:Pt,options:Ft}),this.allKeys.add(Vt.split("+").at(-1))):!G&&!re&&(this.callbacks.set(Vt,{callback:Pt,options:Ft}),this.allKeys.add(Vt.split("+").at(-1)))}}exec(A,G){if(!this.allKeys.has(G.key))return;const ft=this.callbacks.get(xt(this,q,hs).call(this,G));if(!ft)return;const{callback:Pt,options:{bubbles:Ft=!1,args:Vt=[],checker:re=null}}=ft;re&&!re(A,G)||(Pt.bind(A,...Vt)(),Ft||(G.stopPropagation(),G.preventDefault()))}}q=new WeakSet,hs=function(A){A.altKey&&this.buffer.push("alt"),A.ctrlKey&&this.buffer.push("ctrl"),A.metaKey&&this.buffer.push("meta"),A.shiftKey&&this.buffer.push("shift"),this.buffer.push(A.key);const G=this.buffer.join("+");return this.buffer.length=0,G},D.KeyboardManager=U;const at=class at{get _colors(){const A=new Map([["CanvasText",null],["Canvas",null]]);return(0,$.getColorValues)(A),(0,L.shadow)(this,"_colors",A)}convert(A){const G=(0,$.getRGB)(A);if(!window.matchMedia("(forced-colors: active)").matches)return G;for(const[ft,Pt]of this._colors)if(Pt.every((Ft,Vt)=>Ft===G[Vt]))return at._colorsMapping.get(ft);return G}getHexCode(A){const G=this._colors.get(A);return G?L.Util.makeHexColor(...G):A}};Pn(at,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let vt=at;D.ColorManager=vt;const Pe=class Pe{constructor(A,G,ft,Pt,Ft,Vt){mt(this,Zt);mt(this,fe);mt(this,ze);mt(this,We);mt(this,Fe);mt(this,Xt);mt(this,wt);mt(this,Kt);mt(this,mn);mt(this,ue);mt(this,me);mt(this,Me);mt(this,oe);mt(this,Y,null);mt(this,St,new Map);mt(this,kt,new Map);mt(this,it,null);mt(this,Rt,null);mt(this,Wt,new lt);mt(this,qt,0);mt(this,Ct,new Set);mt(this,Yt,null);mt(this,ne,null);mt(this,de,new Set);mt(this,_e,null);mt(this,et,new $t);mt(this,w,!1);mt(this,R,!1);mt(this,T,null);mt(this,B,L.AnnotationEditorType.NONE);mt(this,j,new Set);mt(this,K,null);mt(this,ut,this.blur.bind(this));mt(this,yt,this.focus.bind(this));mt(this,zt,this.copy.bind(this));mt(this,Bt,this.cut.bind(this));mt(this,Gt,this.paste.bind(this));mt(this,Jt,this.keydown.bind(this));mt(this,le,this.onEditingAction.bind(this));mt(this,Qt,this.onPageChanging.bind(this));mt(this,Se,this.onScaleChanging.bind(this));mt(this,Re,this.onRotationChanging.bind(this));mt(this,ce,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});mt(this,Ce,[0,0]);mt(this,te,null);mt(this,jt,null);mt(this,It,null);Ut(this,jt,A),Ut(this,It,G),Ut(this,it,ft),this._eventBus=Pt,this._eventBus._on("editingaction",y(this,le)),this._eventBus._on("pagechanging",y(this,Qt)),this._eventBus._on("scalechanging",y(this,Se)),this._eventBus._on("rotationchanging",y(this,Re)),Ut(this,Rt,Ft.annotationStorage),Ut(this,_e,Ft.filterFactory),Ut(this,K,Vt),this.viewParameters={realScale:$.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const A=Pe.prototype,G=Ft=>{const{activeElement:Vt}=document;return Vt&&y(Ft,jt).contains(Vt)&&Ft.hasSomethingToControl()},ft=this.TRANSLATE_SMALL,Pt=this.TRANSLATE_BIG;return(0,L.shadow)(this,"_keyboardManager",new U([[["ctrl+a","mac+meta+a"],A.selectAll],[["ctrl+z","mac+meta+z"],A.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],A.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],A.delete],[["Escape","mac+Escape"],A.unselectAll],[["ArrowLeft","mac+ArrowLeft"],A.translateSelectedEditors,{args:[-ft,0],checker:G}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],A.translateSelectedEditors,{args:[-Pt,0],checker:G}],[["ArrowRight","mac+ArrowRight"],A.translateSelectedEditors,{args:[ft,0],checker:G}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],A.translateSelectedEditors,{args:[Pt,0],checker:G}],[["ArrowUp","mac+ArrowUp"],A.translateSelectedEditors,{args:[0,-ft],checker:G}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],A.translateSelectedEditors,{args:[0,-Pt],checker:G}],[["ArrowDown","mac+ArrowDown"],A.translateSelectedEditors,{args:[0,ft],checker:G}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],A.translateSelectedEditors,{args:[0,Pt],checker:G}]]))}destroy(){xt(this,We,Ni).call(this),xt(this,fe,gr).call(this),this._eventBus._off("editingaction",y(this,le)),this._eventBus._off("pagechanging",y(this,Qt)),this._eventBus._off("scalechanging",y(this,Se)),this._eventBus._off("rotationchanging",y(this,Re));for(const A of y(this,kt).values())A.destroy();y(this,kt).clear(),y(this,St).clear(),y(this,de).clear(),Ut(this,Y,null),y(this,j).clear(),y(this,Wt).destroy(),y(this,it).destroy()}get hcmFilter(){return(0,L.shadow)(this,"hcmFilter",y(this,K)?y(this,_e).addHCMFilter(y(this,K).foreground,y(this,K).background):"none")}get direction(){return(0,L.shadow)(this,"direction",getComputedStyle(y(this,jt)).direction)}editAltText(A){var G;(G=y(this,it))==null||G.editAltText(this,A)}onPageChanging({pageNumber:A}){Ut(this,qt,A-1)}focusMainContainer(){y(this,jt).focus()}findParent(A,G){for(const ft of y(this,kt).values()){const{x:Pt,y:Ft,width:Vt,height:re}=ft.div.getBoundingClientRect();if(A>=Pt&&A<=Pt+Vt&&G>=Ft&&G<=Ft+re)return ft}return null}disableUserSelect(A=!1){y(this,It).classList.toggle("noUserSelect",A)}addShouldRescale(A){y(this,de).add(A)}removeShouldRescale(A){y(this,de).delete(A)}onScaleChanging({scale:A}){this.commitOrRemove(),this.viewParameters.realScale=A*$.PixelsPerInch.PDF_TO_CSS_UNITS;for(const G of y(this,de))G.onScaleChanging()}onRotationChanging({pagesRotation:A}){this.commitOrRemove(),this.viewParameters.rotation=A}addToAnnotationStorage(A){!A.isEmpty()&&y(this,Rt)&&!y(this,Rt).has(A.id)&&y(this,Rt).setValue(A.id,A)}blur(){if(!this.hasSelection)return;const{activeElement:A}=document;for(const G of y(this,j))if(G.div.contains(A)){Ut(this,T,[G,A]),G._focusEventsAllowed=!1;break}}focus(){if(!y(this,T))return;const[A,G]=y(this,T);Ut(this,T,null),G.addEventListener("focusin",()=>{A._focusEventsAllowed=!0},{once:!0}),G.focus()}addEditListeners(){xt(this,ze,mr).call(this),xt(this,Fe,vr).call(this)}removeEditListeners(){xt(this,We,Ni).call(this),xt(this,Xt,br).call(this)}copy(A){var ft;if(A.preventDefault(),(ft=y(this,Y))==null||ft.commitOrRemove(),!this.hasSelection)return;const G=[];for(const Pt of y(this,j)){const Ft=Pt.serialize(!0);Ft&&G.push(Ft)}G.length!==0&&A.clipboardData.setData("application/pdfjs",JSON.stringify(G))}cut(A){this.copy(A),this.delete()}paste(A){A.preventDefault();const{clipboardData:G}=A;for(const Ft of G.items)for(const Vt of y(this,ne))if(Vt.isHandlingMimeForPasting(Ft.type)){Vt.paste(Ft,this.currentLayer);return}let ft=G.getData("application/pdfjs");if(!ft)return;try{ft=JSON.parse(ft)}catch(Ft){(0,L.warn)(`paste: "${Ft.message}".`);return}if(!Array.isArray(ft))return;this.unselectAll();const Pt=this.currentLayer;try{const Ft=[];for(const ye of ft){const ve=Pt.deserialize(ye);if(!ve)return;Ft.push(ve)}const Vt=()=>{for(const ye of Ft)xt(this,me,_r).call(this,ye);xt(this,oe,yr).call(this,Ft)},re=()=>{for(const ye of Ft)ye.remove()};this.addCommands({cmd:Vt,undo:re,mustExec:!0})}catch(Ft){(0,L.warn)(`paste: "${Ft.message}".`)}}keydown(A){var G;(G=this.getActive())!=null&&G.shouldGetKeyboardEvents()||Pe._keyboardManager.exec(this,A)}onEditingAction(A){["undo","redo","delete","selectAll"].includes(A.name)&&this[A.name]()}setEditingState(A){A?(xt(this,Zt,ds).call(this),xt(this,ze,mr).call(this),xt(this,Fe,vr).call(this),xt(this,wt,Kn).call(this,{isEditing:y(this,B)!==L.AnnotationEditorType.NONE,isEmpty:xt(this,Me,Si).call(this),hasSomethingToUndo:y(this,Wt).hasSomethingToUndo(),hasSomethingToRedo:y(this,Wt).hasSomethingToRedo(),hasSelectedEditor:!1})):(xt(this,fe,gr).call(this),xt(this,We,Ni).call(this),xt(this,Xt,br).call(this),xt(this,wt,Kn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(A){if(!y(this,ne)){Ut(this,ne,A);for(const G of y(this,ne))xt(this,Kt,Ai).call(this,G.defaultPropertiesToUpdate)}}getId(){return y(this,et).getId()}get currentLayer(){return y(this,kt).get(y(this,qt))}getLayer(A){return y(this,kt).get(A)}get currentPageIndex(){return y(this,qt)}addLayer(A){y(this,kt).set(A.pageIndex,A),y(this,w)?A.enable():A.disable()}removeLayer(A){y(this,kt).delete(A.pageIndex)}updateMode(A,G=null){if(y(this,B)!==A){if(Ut(this,B,A),A===L.AnnotationEditorType.NONE){this.setEditingState(!1),xt(this,ue,ps).call(this);return}this.setEditingState(!0),xt(this,mn,fs).call(this),this.unselectAll();for(const ft of y(this,kt).values())ft.updateMode(A);if(G){for(const ft of y(this,St).values())if(ft.annotationElementId===G){this.setSelected(ft),ft.enterInEditMode();break}}}}updateToolbar(A){A!==y(this,B)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:A})}updateParams(A,G){if(y(this,ne)){if(A===L.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(A);return}for(const ft of y(this,j))ft.updateParams(A,G);for(const ft of y(this,ne))ft.updateDefaultParams(A,G)}}enableWaiting(A=!1){if(y(this,R)!==A){Ut(this,R,A);for(const G of y(this,kt).values())A?G.disableClick():G.enableClick(),G.div.classList.toggle("waiting",A)}}getEditors(A){const G=[];for(const ft of y(this,St).values())ft.pageIndex===A&&G.push(ft);return G}getEditor(A){return y(this,St).get(A)}addEditor(A){y(this,St).set(A.id,A)}removeEditor(A){var G;y(this,St).delete(A.id),this.unselect(A),(!A.annotationElementId||!y(this,Ct).has(A.annotationElementId))&&((G=y(this,Rt))==null||G.remove(A.id))}addDeletedAnnotationElement(A){y(this,Ct).add(A.annotationElementId),A.deleted=!0}isDeletedAnnotationElement(A){return y(this,Ct).has(A)}removeDeletedAnnotationElement(A){y(this,Ct).delete(A.annotationElementId),A.deleted=!1}setActiveEditor(A){y(this,Y)!==A&&(Ut(this,Y,A),A&&xt(this,Kt,Ai).call(this,A.propertiesToUpdate))}toggleSelected(A){if(y(this,j).has(A)){y(this,j).delete(A),A.unselect(),xt(this,wt,Kn).call(this,{hasSelectedEditor:this.hasSelection});return}y(this,j).add(A),A.select(),xt(this,Kt,Ai).call(this,A.propertiesToUpdate),xt(this,wt,Kn).call(this,{hasSelectedEditor:!0})}setSelected(A){for(const G of y(this,j))G!==A&&G.unselect();y(this,j).clear(),y(this,j).add(A),A.select(),xt(this,Kt,Ai).call(this,A.propertiesToUpdate),xt(this,wt,Kn).call(this,{hasSelectedEditor:!0})}isSelected(A){return y(this,j).has(A)}unselect(A){A.unselect(),y(this,j).delete(A),xt(this,wt,Kn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return y(this,j).size!==0}undo(){y(this,Wt).undo(),xt(this,wt,Kn).call(this,{hasSomethingToUndo:y(this,Wt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:xt(this,Me,Si).call(this)})}redo(){y(this,Wt).redo(),xt(this,wt,Kn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:y(this,Wt).hasSomethingToRedo(),isEmpty:xt(this,Me,Si).call(this)})}addCommands(A){y(this,Wt).add(A),xt(this,wt,Kn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:xt(this,Me,Si).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const A=[...y(this,j)],G=()=>{for(const Pt of A)Pt.remove()},ft=()=>{for(const Pt of A)xt(this,me,_r).call(this,Pt)};this.addCommands({cmd:G,undo:ft,mustExec:!0})}commitOrRemove(){var A;(A=y(this,Y))==null||A.commitOrRemove()}hasSomethingToControl(){return y(this,Y)||this.hasSelection}selectAll(){for(const A of y(this,j))A.commit();xt(this,oe,yr).call(this,y(this,St).values())}unselectAll(){if(y(this,Y)){y(this,Y).commitOrRemove();return}if(this.hasSelection){for(const A of y(this,j))A.unselect();y(this,j).clear(),xt(this,wt,Kn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(A,G,ft=!1){if(ft||this.commitOrRemove(),!this.hasSelection)return;y(this,Ce)[0]+=A,y(this,Ce)[1]+=G;const[Pt,Ft]=y(this,Ce),Vt=[...y(this,j)],re=1e3;y(this,te)&&clearTimeout(y(this,te)),Ut(this,te,setTimeout(()=>{Ut(this,te,null),y(this,Ce)[0]=y(this,Ce)[1]=0,this.addCommands({cmd:()=>{for(const ye of Vt)y(this,St).has(ye.id)&&ye.translateInPage(Pt,Ft)},undo:()=>{for(const ye of Vt)y(this,St).has(ye.id)&&ye.translateInPage(-Pt,-Ft)},mustExec:!1})},re));for(const ye of Vt)ye.translateInPage(A,G)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Ut(this,Yt,new Map);for(const A of y(this,j))y(this,Yt).set(A,{savedX:A.x,savedY:A.y,savedPageIndex:A.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!y(this,Yt))return!1;this.disableUserSelect(!1);const A=y(this,Yt);Ut(this,Yt,null);let G=!1;for(const[{x:Pt,y:Ft,pageIndex:Vt},re]of A)re.newX=Pt,re.newY=Ft,re.newPageIndex=Vt,G||(G=Pt!==re.savedX||Ft!==re.savedY||Vt!==re.savedPageIndex);if(!G)return!1;const ft=(Pt,Ft,Vt,re)=>{if(y(this,St).has(Pt.id)){const ye=y(this,kt).get(re);ye?Pt._setParentAndPosition(ye,Ft,Vt):(Pt.pageIndex=re,Pt.x=Ft,Pt.y=Vt)}};return this.addCommands({cmd:()=>{for(const[Pt,{newX:Ft,newY:Vt,newPageIndex:re}]of A)ft(Pt,Ft,Vt,re)},undo:()=>{for(const[Pt,{savedX:Ft,savedY:Vt,savedPageIndex:re}]of A)ft(Pt,Ft,Vt,re)},mustExec:!0}),!0}dragSelectedEditors(A,G){if(y(this,Yt))for(const ft of y(this,Yt).keys())ft.drag(A,G)}rebuild(A){if(A.parent===null){const G=this.getLayer(A.pageIndex);G?(G.changeParent(A),G.addOrRebuild(A)):(this.addEditor(A),this.addToAnnotationStorage(A),A.rebuild())}else A.parent.addOrRebuild(A)}isActive(A){return y(this,Y)===A}getActive(){return y(this,Y)}getMode(){return y(this,B)}get imageManager(){return(0,L.shadow)(this,"imageManager",new pt)}};Y=new WeakMap,St=new WeakMap,kt=new WeakMap,it=new WeakMap,Rt=new WeakMap,Wt=new WeakMap,qt=new WeakMap,Ct=new WeakMap,Yt=new WeakMap,ne=new WeakMap,de=new WeakMap,_e=new WeakMap,et=new WeakMap,w=new WeakMap,R=new WeakMap,T=new WeakMap,B=new WeakMap,j=new WeakMap,K=new WeakMap,ut=new WeakMap,yt=new WeakMap,zt=new WeakMap,Bt=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,le=new WeakMap,Qt=new WeakMap,Se=new WeakMap,Re=new WeakMap,ce=new WeakMap,Ce=new WeakMap,te=new WeakMap,jt=new WeakMap,It=new WeakMap,Zt=new WeakSet,ds=function(){window.addEventListener("focus",y(this,yt)),window.addEventListener("blur",y(this,ut))},fe=new WeakSet,gr=function(){window.removeEventListener("focus",y(this,yt)),window.removeEventListener("blur",y(this,ut))},ze=new WeakSet,mr=function(){window.addEventListener("keydown",y(this,Jt),{capture:!0})},We=new WeakSet,Ni=function(){window.removeEventListener("keydown",y(this,Jt),{capture:!0})},Fe=new WeakSet,vr=function(){document.addEventListener("copy",y(this,zt)),document.addEventListener("cut",y(this,Bt)),document.addEventListener("paste",y(this,Gt))},Xt=new WeakSet,br=function(){document.removeEventListener("copy",y(this,zt)),document.removeEventListener("cut",y(this,Bt)),document.removeEventListener("paste",y(this,Gt))},wt=new WeakSet,Kn=function(A){Object.entries(A).some(([ft,Pt])=>y(this,ce)[ft]!==Pt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(y(this,ce),A)})},Kt=new WeakSet,Ai=function(A){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:A})},mn=new WeakSet,fs=function(){if(!y(this,w)){Ut(this,w,!0);for(const A of y(this,kt).values())A.enable()}},ue=new WeakSet,ps=function(){if(this.unselectAll(),y(this,w)){Ut(this,w,!1);for(const A of y(this,kt).values())A.disable()}},me=new WeakSet,_r=function(A){const G=y(this,kt).get(A.pageIndex);G?G.addOrRebuild(A):this.addEditor(A)},Me=new WeakSet,Si=function(){if(y(this,St).size===0)return!0;if(y(this,St).size===1)for(const A of y(this,St).values())return A.isEmpty();return!1},oe=new WeakSet,yr=function(A){y(this,j).clear();for(const G of A)G.isEmpty()||(y(this,j).add(G),G.select());xt(this,wt,Kn).call(this,{hasSelectedEditor:!0})},Pn(Pe,"TRANSLATE_SMALL",1),Pn(Pe,"TRANSLATE_BIG",10);let gt=Pe;D.AnnotationEditorUIManager=gt},(x,D,_t)=>{var qt,Ct,Yt,ne,de,_e,et,w,R,T,B,j,pi,ut,gi,zt,Ar,Gt,Bi,le,ji,Se,Ei,ce,wi;Object.defineProperty(D,"__esModule",{value:!0}),D.StatTimer=D.RenderingCancelledException=D.PixelsPerInch=D.PageViewport=D.PDFDateString=D.DOMStandardFontDataFactory=D.DOMSVGFactory=D.DOMFilterFactory=D.DOMCanvasFactory=D.DOMCMapReaderFactory=void 0,D.deprecated=ct,D.getColorValues=St,D.getCurrentTransform=kt,D.getCurrentTransformInverse=it,D.getFilenameFromUrl=J,D.getPdfFilenameFromUrl=st,D.getRGB=Y,D.getXfaPageViewport=at,D.isDataScheme=Q,D.isPdfFile=V,D.isValidFetchUrl=tt,D.loadScript=H,D.noContextMenu=O,D.setLayerDimensions=Rt;var L=_t(7),$=_t(1);const _="http://www.w3.org/2000/svg",Wt=class Wt{};Pn(Wt,"CSS",96),Pn(Wt,"PDF",72),Pn(Wt,"PDF_TO_CSS_UNITS",Wt.CSS/Wt.PDF);let ot=Wt;D.PixelsPerInch=ot;class $t extends L.BaseFilterFactory{constructor({docId:It,ownerDocument:Zt=globalThis.document}={}){super();mt(this,j);mt(this,ut);mt(this,zt);mt(this,Gt);mt(this,le);mt(this,Se);mt(this,ce);mt(this,qt,void 0);mt(this,Ct,void 0);mt(this,Yt,void 0);mt(this,ne,void 0);mt(this,de,void 0);mt(this,_e,void 0);mt(this,et,void 0);mt(this,w,void 0);mt(this,R,void 0);mt(this,T,void 0);mt(this,B,0);Ut(this,Yt,It),Ut(this,ne,Zt)}addFilter(It){if(!It)return"none";let Zt=y(this,j,pi).get(It);if(Zt)return Zt;let ge,fe,Oe,ze;if(It.length===1){const Fe=It[0],Je=new Array(256);for(let Xt=0;Xt<256;Xt++)Je[Xt]=Fe[Xt]/255;ze=ge=fe=Oe=Je.join(",")}else{const[Fe,Je,Xt]=It,Mt=new Array(256),wt=new Array(256),ae=new Array(256);for(let Kt=0;Kt<256;Kt++)Mt[Kt]=Fe[Kt]/255,wt[Kt]=Je[Kt]/255,ae[Kt]=Xt[Kt]/255;ge=Mt.join(","),fe=wt.join(","),Oe=ae.join(","),ze=`${ge}${fe}${Oe}`}if(Zt=y(this,j,pi).get(ze),Zt)return y(this,j,pi).set(It,Zt),Zt;const Ne=`g_${y(this,Yt)}_transfer_map_${yi(this,B)._++}`,We=`url(#${Ne})`;y(this,j,pi).set(It,We),y(this,j,pi).set(ze,We);const qe=xt(this,Gt,Bi).call(this,Ne);return xt(this,Se,Ei).call(this,ge,fe,Oe,qe),We}addHCMFilter(It,Zt){var Je;const ge=`${It}-${Zt}`;if(y(this,_e)===ge)return y(this,et);if(Ut(this,_e,ge),Ut(this,et,"none"),(Je=y(this,de))==null||Je.remove(),!It||!Zt)return y(this,et);const fe=xt(this,ce,wi).call(this,It);It=$.Util.makeHexColor(...fe);const Oe=xt(this,ce,wi).call(this,Zt);if(Zt=$.Util.makeHexColor(...Oe),y(this,ut,gi).style.color="",It==="#000000"&&Zt==="#ffffff"||It===Zt)return y(this,et);const ze=new Array(256);for(let Xt=0;Xt<=255;Xt++){const Mt=Xt/255;ze[Xt]=Mt<=.03928?Mt/12.92:((Mt+.055)/1.055)**2.4}const Ne=ze.join(","),We=`g_${y(this,Yt)}_hcm_filter`,qe=Ut(this,w,xt(this,Gt,Bi).call(this,We));xt(this,Se,Ei).call(this,Ne,Ne,Ne,qe),xt(this,zt,Ar).call(this,qe);const Fe=(Xt,Mt)=>{const wt=fe[Xt]/255,ae=Oe[Xt]/255,Kt=new Array(Mt+1);for(let an=0;an<=Mt;an++)Kt[an]=wt+an/Mt*(ae-wt);return Kt.join(",")};return xt(this,Se,Ei).call(this,Fe(0,5),Fe(1,5),Fe(2,5),qe),Ut(this,et,`url(#${We})`),y(this,et)}addHighlightHCMFilter(It,Zt,ge,fe){var ae;const Oe=`${It}-${Zt}-${ge}-${fe}`;if(y(this,R)===Oe)return y(this,T);if(Ut(this,R,Oe),Ut(this,T,"none"),(ae=y(this,w))==null||ae.remove(),!It||!Zt)return y(this,T);const[ze,Ne]=[It,Zt].map(xt(this,ce,wi).bind(this));let We=Math.round(.2126*ze[0]+.7152*ze[1]+.0722*ze[2]),qe=Math.round(.2126*Ne[0]+.7152*Ne[1]+.0722*Ne[2]),[Fe,Je]=[ge,fe].map(xt(this,ce,wi).bind(this));qe<We&&([We,qe,Fe,Je]=[qe,We,Je,Fe]),y(this,ut,gi).style.color="";const Xt=(Kt,an,mn)=>{const Dt=new Array(256),ue=(qe-We)/mn,Te=Kt/255,me=(an-Kt)/(255*mn);let ke=0;for(let Me=0;Me<=mn;Me++){const un=Math.round(We+Me*ue),oe=Te+Me*me;for(let nn=ke;nn<=un;nn++)Dt[nn]=oe;ke=un+1}for(let Me=ke;Me<256;Me++)Dt[Me]=Dt[ke-1];return Dt.join(",")},Mt=`g_${y(this,Yt)}_hcm_highlight_filter`,wt=Ut(this,w,xt(this,Gt,Bi).call(this,Mt));return xt(this,zt,Ar).call(this,wt),xt(this,Se,Ei).call(this,Xt(Fe[0],Je[0],5),Xt(Fe[1],Je[1],5),Xt(Fe[2],Je[2],5),wt),Ut(this,T,`url(#${Mt})`),y(this,T)}destroy(It=!1){It&&(y(this,et)||y(this,T))||(y(this,Ct)&&(y(this,Ct).parentNode.parentNode.remove(),Ut(this,Ct,null)),y(this,qt)&&(y(this,qt).clear(),Ut(this,qt,null)),Ut(this,B,0))}}qt=new WeakMap,Ct=new WeakMap,Yt=new WeakMap,ne=new WeakMap,de=new WeakMap,_e=new WeakMap,et=new WeakMap,w=new WeakMap,R=new WeakMap,T=new WeakMap,B=new WeakMap,j=new WeakSet,pi=function(){return y(this,qt)||Ut(this,qt,new Map)},ut=new WeakSet,gi=function(){if(!y(this,Ct)){const It=y(this,ne).createElement("div"),{style:Zt}=It;Zt.visibility="hidden",Zt.contain="strict",Zt.width=Zt.height=0,Zt.position="absolute",Zt.top=Zt.left=0,Zt.zIndex=-1;const ge=y(this,ne).createElementNS(_,"svg");ge.setAttribute("width",0),ge.setAttribute("height",0),Ut(this,Ct,y(this,ne).createElementNS(_,"defs")),It.append(ge),ge.append(y(this,Ct)),y(this,ne).body.append(It)}return y(this,Ct)},zt=new WeakSet,Ar=function(It){const Zt=y(this,ne).createElementNS(_,"feColorMatrix");Zt.setAttribute("type","matrix"),Zt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),It.append(Zt)},Gt=new WeakSet,Bi=function(It){const Zt=y(this,ne).createElementNS(_,"filter");return Zt.setAttribute("color-interpolation-filters","sRGB"),Zt.setAttribute("id",It),y(this,ut,gi).append(Zt),Zt},le=new WeakSet,ji=function(It,Zt,ge){const fe=y(this,ne).createElementNS(_,Zt);fe.setAttribute("type","discrete"),fe.setAttribute("tableValues",ge),It.append(fe)},Se=new WeakSet,Ei=function(It,Zt,ge,fe){const Oe=y(this,ne).createElementNS(_,"feComponentTransfer");fe.append(Oe),xt(this,le,ji).call(this,Oe,"feFuncR",It),xt(this,le,ji).call(this,Oe,"feFuncG",Zt),xt(this,le,ji).call(this,Oe,"feFuncB",ge)},ce=new WeakSet,wi=function(It){return y(this,ut,gi).style.color=It,Y(getComputedStyle(y(this,ut,gi)).getPropertyValue("color"))},D.DOMFilterFactory=$t;class pt extends L.BaseCanvasFactory{constructor({ownerDocument:jt=globalThis.document}={}){super(),this._document=jt}_createCanvas(jt,It){const Zt=this._document.createElement("canvas");return Zt.width=jt,Zt.height=It,Zt}}D.DOMCanvasFactory=pt;async function lt(te,jt=!1){if(tt(te,document.baseURI)){const It=await fetch(te);if(!It.ok)throw new Error(It.statusText);return jt?new Uint8Array(await It.arrayBuffer()):(0,$.stringToBytes)(await It.text())}return new Promise((It,Zt)=>{const ge=new XMLHttpRequest;ge.open("GET",te,!0),jt&&(ge.responseType="arraybuffer"),ge.onreadystatechange=()=>{if(ge.readyState===XMLHttpRequest.DONE){if(ge.status===200||ge.status===0){let fe;if(jt&&ge.response?fe=new Uint8Array(ge.response):!jt&&ge.responseText&&(fe=(0,$.stringToBytes)(ge.responseText)),fe){It(fe);return}}Zt(new Error(ge.statusText))}},ge.send(null)})}class U extends L.BaseCMapReaderFactory{_fetchData(jt,It){return lt(jt,this.isCompressed).then(Zt=>({cMapData:Zt,compressionType:It}))}}D.DOMCMapReaderFactory=U;class vt extends L.BaseStandardFontDataFactory{_fetchData(jt){return lt(jt,!0)}}D.DOMStandardFontDataFactory=vt;class gt extends L.BaseSVGFactory{_createSVG(jt){return document.createElementNS(_,jt)}}D.DOMSVGFactory=gt;class nt{constructor({viewBox:jt,scale:It,rotation:Zt,offsetX:ge=0,offsetY:fe=0,dontFlip:Oe=!1}){this.viewBox=jt,this.scale=It,this.rotation=Zt,this.offsetX=ge,this.offsetY=fe;const ze=(jt[2]+jt[0])/2,Ne=(jt[3]+jt[1])/2;let We,qe,Fe,Je;switch(Zt%=360,Zt<0&&(Zt+=360),Zt){case 180:We=-1,qe=0,Fe=0,Je=1;break;case 90:We=0,qe=1,Fe=1,Je=0;break;case 270:We=0,qe=-1,Fe=-1,Je=0;break;case 0:We=1,qe=0,Fe=0,Je=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Oe&&(Fe=-Fe,Je=-Je);let Xt,Mt,wt,ae;We===0?(Xt=Math.abs(Ne-jt[1])*It+ge,Mt=Math.abs(ze-jt[0])*It+fe,wt=(jt[3]-jt[1])*It,ae=(jt[2]-jt[0])*It):(Xt=Math.abs(ze-jt[0])*It+ge,Mt=Math.abs(Ne-jt[1])*It+fe,wt=(jt[2]-jt[0])*It,ae=(jt[3]-jt[1])*It),this.transform=[We*It,qe*It,Fe*It,Je*It,Xt-We*It*ze-Fe*It*Ne,Mt-qe*It*ze-Je*It*Ne],this.width=wt,this.height=ae}get rawDims(){const{viewBox:jt}=this;return(0,$.shadow)(this,"rawDims",{pageWidth:jt[2]-jt[0],pageHeight:jt[3]-jt[1],pageX:jt[0],pageY:jt[1]})}clone({scale:jt=this.scale,rotation:It=this.rotation,offsetX:Zt=this.offsetX,offsetY:ge=this.offsetY,dontFlip:fe=!1}={}){return new nt({viewBox:this.viewBox.slice(),scale:jt,rotation:It,offsetX:Zt,offsetY:ge,dontFlip:fe})}convertToViewportPoint(jt,It){return $.Util.applyTransform([jt,It],this.transform)}convertToViewportRectangle(jt){const It=$.Util.applyTransform([jt[0],jt[1]],this.transform),Zt=$.Util.applyTransform([jt[2],jt[3]],this.transform);return[It[0],It[1],Zt[0],Zt[1]]}convertToPdfPoint(jt,It){return $.Util.applyInverseTransform([jt,It],this.transform)}}D.PageViewport=nt;class X extends $.BaseException{constructor(jt,It=0){super(jt,"RenderingCancelledException"),this.extraDelay=It}}D.RenderingCancelledException=X;function Q(te){const jt=te.length;let It=0;for(;It<jt&&te[It].trim()==="";)It++;return te.substring(It,It+5).toLowerCase()==="data:"}function V(te){return typeof te=="string"&&/\.pdf$/i.test(te)}function J(te,jt=!1){return jt||([te]=te.split(/[#?]/,1)),te.substring(te.lastIndexOf("/")+1)}function st(te,jt="document.pdf"){if(typeof te!="string")return jt;if(Q(te))return(0,$.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),jt;const It=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Zt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ge=It.exec(te);let fe=Zt.exec(ge[1])||Zt.exec(ge[2])||Zt.exec(ge[3]);if(fe&&(fe=fe[0],fe.includes("%")))try{fe=Zt.exec(decodeURIComponent(fe))[0]}catch{}return fe||jt}class rt{constructor(){Pn(this,"started",Object.create(null));Pn(this,"times",[])}time(jt){jt in this.started&&(0,$.warn)(`Timer is already running for ${jt}`),this.started[jt]=Date.now()}timeEnd(jt){jt in this.started||(0,$.warn)(`Timer has not been started for ${jt}`),this.times.push({name:jt,start:this.started[jt],end:Date.now()}),delete this.started[jt]}toString(){const jt=[];let It=0;for(const{name:Zt}of this.times)It=Math.max(Zt.length,It);for(const{name:Zt,start:ge,end:fe}of this.times)jt.push(`${Zt.padEnd(It)} ${fe-ge}ms
`);return jt.join("")}}D.StatTimer=rt;function tt(te,jt){try{const{protocol:It}=jt?new URL(te,jt):new URL(te);return It==="http:"||It==="https:"}catch{return!1}}function O(te){te.preventDefault()}function H(te,jt=!1){return new Promise((It,Zt)=>{const ge=document.createElement("script");ge.src=te,ge.onload=function(fe){jt&&ge.remove(),It(fe)},ge.onerror=function(){Zt(new Error(`Cannot load script at: ${ge.src}`))},(document.head||document.documentElement).append(ge)})}function ct(te){console.log("Deprecated API usage: "+te)}let q;class N{static toDateObject(jt){if(!jt||typeof jt!="string")return null;q||(q=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const It=q.exec(jt);if(!It)return null;const Zt=parseInt(It[1],10);let ge=parseInt(It[2],10);ge=ge>=1&&ge<=12?ge-1:0;let fe=parseInt(It[3],10);fe=fe>=1&&fe<=31?fe:1;let Oe=parseInt(It[4],10);Oe=Oe>=0&&Oe<=23?Oe:0;let ze=parseInt(It[5],10);ze=ze>=0&&ze<=59?ze:0;let Ne=parseInt(It[6],10);Ne=Ne>=0&&Ne<=59?Ne:0;const We=It[7]||"Z";let qe=parseInt(It[8],10);qe=qe>=0&&qe<=23?qe:0;let Fe=parseInt(It[9],10)||0;return Fe=Fe>=0&&Fe<=59?Fe:0,We==="-"?(Oe+=qe,ze+=Fe):We==="+"&&(Oe-=qe,ze-=Fe),new Date(Date.UTC(Zt,ge,fe,Oe,ze,Ne))}}D.PDFDateString=N;function at(te,{scale:jt=1,rotation:It=0}){const{width:Zt,height:ge}=te.attributes.style,fe=[0,0,parseInt(Zt),parseInt(ge)];return new nt({viewBox:fe,scale:jt,rotation:It})}function Y(te){if(te.startsWith("#")){const jt=parseInt(te.slice(1),16);return[(jt&16711680)>>16,(jt&65280)>>8,jt&255]}return te.startsWith("rgb(")?te.slice(4,-1).split(",").map(jt=>parseInt(jt)):te.startsWith("rgba(")?te.slice(5,-1).split(",").map(jt=>parseInt(jt)).slice(0,3):((0,$.warn)(`Not a valid color format: "${te}"`),[0,0,0])}function St(te){const jt=document.createElement("span");jt.style.visibility="hidden",document.body.append(jt);for(const It of te.keys()){jt.style.color=It;const Zt=window.getComputedStyle(jt).color;te.set(It,Y(Zt))}jt.remove()}function kt(te){const{a:jt,b:It,c:Zt,d:ge,e:fe,f:Oe}=te.getTransform();return[jt,It,Zt,ge,fe,Oe]}function it(te){const{a:jt,b:It,c:Zt,d:ge,e:fe,f:Oe}=te.getTransform().invertSelf();return[jt,It,Zt,ge,fe,Oe]}function Rt(te,jt,It=!1,Zt=!0){if(jt instanceof nt){const{pageWidth:ge,pageHeight:fe}=jt.rawDims,{style:Oe}=te,ze=$.FeatureTest.isCSSRoundSupported,Ne=`var(--scale-factor) * ${ge}px`,We=`var(--scale-factor) * ${fe}px`,qe=ze?`round(${Ne}, 1px)`:`calc(${Ne})`,Fe=ze?`round(${We}, 1px)`:`calc(${We})`;!It||jt.rotation%180===0?(Oe.width=qe,Oe.height=Fe):(Oe.width=Fe,Oe.height=qe)}Zt&&te.setAttribute("data-main-rotation",jt.rotation)}},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.BaseStandardFontDataFactory=D.BaseSVGFactory=D.BaseFilterFactory=D.BaseCanvasFactory=D.BaseCMapReaderFactory=void 0;var L=_t(1);class ${constructor(){this.constructor===$&&(0,L.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(U){return"none"}addHCMFilter(U,vt){return"none"}addHighlightHCMFilter(U,vt,gt,nt){return"none"}destroy(U=!1){}}D.BaseFilterFactory=$;class _{constructor(){this.constructor===_&&(0,L.unreachable)("Cannot initialize BaseCanvasFactory.")}create(U,vt){if(U<=0||vt<=0)throw new Error("Invalid canvas size");const gt=this._createCanvas(U,vt);return{canvas:gt,context:gt.getContext("2d")}}reset(U,vt,gt){if(!U.canvas)throw new Error("Canvas is not specified");if(vt<=0||gt<=0)throw new Error("Invalid canvas size");U.canvas.width=vt,U.canvas.height=gt}destroy(U){if(!U.canvas)throw new Error("Canvas is not specified");U.canvas.width=0,U.canvas.height=0,U.canvas=null,U.context=null}_createCanvas(U,vt){(0,L.unreachable)("Abstract method `_createCanvas` called.")}}D.BaseCanvasFactory=_;class ot{constructor({baseUrl:U=null,isCompressed:vt=!0}){this.constructor===ot&&(0,L.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=U,this.isCompressed=vt}async fetch({name:U}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!U)throw new Error("CMap name must be specified.");const vt=this.baseUrl+U+(this.isCompressed?".bcmap":""),gt=this.isCompressed?L.CMapCompressionType.BINARY:L.CMapCompressionType.NONE;return this._fetchData(vt,gt).catch(nt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${vt}`)})}_fetchData(U,vt){(0,L.unreachable)("Abstract method `_fetchData` called.")}}D.BaseCMapReaderFactory=ot;class $t{constructor({baseUrl:U=null}){this.constructor===$t&&(0,L.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=U}async fetch({filename:U}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!U)throw new Error("Font filename must be specified.");const vt=`${this.baseUrl}${U}`;return this._fetchData(vt).catch(gt=>{throw new Error(`Unable to load font data at: ${vt}`)})}_fetchData(U){(0,L.unreachable)("Abstract method `_fetchData` called.")}}D.BaseStandardFontDataFactory=$t;class pt{constructor(){this.constructor===pt&&(0,L.unreachable)("Cannot initialize BaseSVGFactory.")}create(U,vt,gt=!1){if(U<=0||vt<=0)throw new Error("Invalid SVG dimensions");const nt=this._createSVG("svg:svg");return nt.setAttribute("version","1.1"),gt||(nt.setAttribute("width",`${U}px`),nt.setAttribute("height",`${vt}px`)),nt.setAttribute("preserveAspectRatio","none"),nt.setAttribute("viewBox",`0 0 ${U} ${vt}`),nt}createElement(U){if(typeof U!="string")throw new Error("Invalid SVG element type");return this._createSVG(U)}_createSVG(U){(0,L.unreachable)("Abstract method `_createSVG` called.")}}D.BaseSVGFactory=pt},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.MurmurHash3_64=void 0;var L=_t(1);const $=3285377520,_=4294901760,ot=65535;class $t{constructor(lt){this.h1=lt?lt&4294967295:$,this.h2=lt?lt&4294967295:$}update(lt){let U,vt;if(typeof lt=="string"){U=new Uint8Array(lt.length*2),vt=0;for(let ct=0,q=lt.length;ct<q;ct++){const N=lt.charCodeAt(ct);N<=255?U[vt++]=N:(U[vt++]=N>>>8,U[vt++]=N&255)}}else if((0,L.isArrayBuffer)(lt))U=lt.slice(),vt=U.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const gt=vt>>2,nt=vt-gt*4,X=new Uint32Array(U.buffer,0,gt);let Q=0,V=0,J=this.h1,st=this.h2;const rt=3432918353,tt=461845907,O=rt&ot,H=tt&ot;for(let ct=0;ct<gt;ct++)ct&1?(Q=X[ct],Q=Q*rt&_|Q*O&ot,Q=Q<<15|Q>>>17,Q=Q*tt&_|Q*H&ot,J^=Q,J=J<<13|J>>>19,J=J*5+3864292196):(V=X[ct],V=V*rt&_|V*O&ot,V=V<<15|V>>>17,V=V*tt&_|V*H&ot,st^=V,st=st<<13|st>>>19,st=st*5+3864292196);switch(Q=0,nt){case 3:Q^=U[gt*4+2]<<16;case 2:Q^=U[gt*4+1]<<8;case 1:Q^=U[gt*4],Q=Q*rt&_|Q*O&ot,Q=Q<<15|Q>>>17,Q=Q*tt&_|Q*H&ot,gt&1?J^=Q:st^=Q}this.h1=J,this.h2=st}hexdigest(){let lt=this.h1,U=this.h2;return lt^=U>>>1,lt=lt*3981806797&_|lt*36045&ot,U=U*4283543511&_|((U<<16|lt>>>16)*2950163797&_)>>>16,lt^=U>>>1,lt=lt*444984403&_|lt*60499&ot,U=U*3301882366&_|((U<<16|lt>>>16)*3120437893&_)>>>16,lt^=U>>>1,(lt>>>0).toString(16).padStart(8,"0")+(U>>>0).toString(16).padStart(8,"0")}}D.MurmurHash3_64=$t},(x,D,_t)=>{var ot;Object.defineProperty(D,"__esModule",{value:!0}),D.FontLoader=D.FontFaceObject=void 0;var L=_t(1);class ${constructor({ownerDocument:pt=globalThis.document,styleElement:lt=null}){mt(this,ot,new Set);this._document=pt,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(pt){this.nativeFontFaces.add(pt),this._document.fonts.add(pt)}removeNativeFontFace(pt){this.nativeFontFaces.delete(pt),this._document.fonts.delete(pt)}insertRule(pt){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const lt=this.styleElement.sheet;lt.insertRule(pt,lt.cssRules.length)}clear(){for(const pt of this.nativeFontFaces)this._document.fonts.delete(pt);this.nativeFontFaces.clear(),y(this,ot).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(pt){if(!(!pt||y(this,ot).has(pt.loadedName))){if((0,L.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:lt,src:U,style:vt}=pt,gt=new FontFace(lt,U,vt);this.addNativeFontFace(gt);try{await gt.load(),y(this,ot).add(lt)}catch{(0,L.warn)(`Cannot load system font: ${pt.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(gt)}return}(0,L.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(pt){if(pt.attached||pt.missingFile&&!pt.systemFontInfo)return;if(pt.attached=!0,pt.systemFontInfo){await this.loadSystemFont(pt.systemFontInfo);return}if(this.isFontLoadingAPISupported){const U=pt.createNativeFontFace();if(U){this.addNativeFontFace(U);try{await U.loaded}catch(vt){throw(0,L.warn)(`Failed to load font '${U.family}': '${vt}'.`),pt.disableFontFace=!0,vt}}return}const lt=pt.createFontFaceRule();if(lt){if(this.insertRule(lt),this.isSyncFontLoadingSupported)return;await new Promise(U=>{const vt=this._queueLoadingCallback(U);this._prepareFontLoadEvent(pt,vt)})}}get isFontLoadingAPISupported(){var lt;const pt=!!((lt=this._document)!=null&&lt.fonts);return(0,L.shadow)(this,"isFontLoadingAPISupported",pt)}get isSyncFontLoadingSupported(){let pt=!1;return(L.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(pt=!0),(0,L.shadow)(this,"isSyncFontLoadingSupported",pt)}_queueLoadingCallback(pt){function lt(){for((0,L.assert)(!vt.done,"completeRequest() cannot be called twice."),vt.done=!0;U.length>0&&U[0].done;){const gt=U.shift();setTimeout(gt.callback,0)}}const{loadingRequests:U}=this,vt={done:!1,complete:lt,callback:pt};return U.push(vt),vt}get _loadTestFont(){const pt=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,L.shadow)(this,"_loadTestFont",pt)}_prepareFontLoadEvent(pt,lt){function U(Y,St){return Y.charCodeAt(St)<<24|Y.charCodeAt(St+1)<<16|Y.charCodeAt(St+2)<<8|Y.charCodeAt(St+3)&255}function vt(Y,St,kt,it){const Rt=Y.substring(0,St),Wt=Y.substring(St+kt);return Rt+it+Wt}let gt,nt;const X=this._document.createElement("canvas");X.width=1,X.height=1;const Q=X.getContext("2d");let V=0;function J(Y,St){if(++V>30){(0,L.warn)("Load test font never loaded."),St();return}if(Q.font="30px "+Y,Q.fillText(".",0,20),Q.getImageData(0,0,1,1).data[3]>0){St();return}setTimeout(J.bind(null,Y,St))}const st=`lt${Date.now()}${this.loadTestFontId++}`;let rt=this._loadTestFont;rt=vt(rt,976,st.length,st);const O=16,H=1482184792;let ct=U(rt,O);for(gt=0,nt=st.length-3;gt<nt;gt+=4)ct=ct-H+U(st,gt)|0;gt<st.length&&(ct=ct-H+U(st+"XXX",gt)|0),rt=vt(rt,O,4,(0,L.string32)(ct));const q=`url(data:font/opentype;base64,${btoa(rt)});`,N=`@font-face {font-family:"${st}";src:${q}}`;this.insertRule(N);const at=this._document.createElement("div");at.style.visibility="hidden",at.style.width=at.style.height="10px",at.style.position="absolute",at.style.top=at.style.left="0px";for(const Y of[pt.loadedName,st]){const St=this._document.createElement("span");St.textContent="Hi",St.style.fontFamily=Y,at.append(St)}this._document.body.append(at),J(st,()=>{at.remove(),lt.complete()})}}ot=new WeakMap,D.FontLoader=$;class _{constructor(pt,{isEvalSupported:lt=!0,disableFontFace:U=!1,ignoreErrors:vt=!1,inspectFont:gt=null}){this.compiledGlyphs=Object.create(null);for(const nt in pt)this[nt]=pt[nt];this.isEvalSupported=lt!==!1,this.disableFontFace=U===!0,this.ignoreErrors=vt===!0,this._inspectFont=gt}createNativeFontFace(){var lt;if(!this.data||this.disableFontFace)return null;let pt;if(!this.cssFontInfo)pt=new FontFace(this.loadedName,this.data,{});else{const U={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(U.style=`oblique ${this.cssFontInfo.italicAngle}deg`),pt=new FontFace(this.cssFontInfo.fontFamily,this.data,U)}return(lt=this._inspectFont)==null||lt.call(this,this),pt}createFontFaceRule(){var vt;if(!this.data||this.disableFontFace)return null;const pt=(0,L.bytesToString)(this.data),lt=`url(data:${this.mimetype};base64,${btoa(pt)});`;let U;if(!this.cssFontInfo)U=`@font-face {font-family:"${this.loadedName}";src:${lt}}`;else{let gt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(gt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),U=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${gt}src:${lt}}`}return(vt=this._inspectFont)==null||vt.call(this,this,lt),U}getPathGenerator(pt,lt){if(this.compiledGlyphs[lt]!==void 0)return this.compiledGlyphs[lt];let U;try{U=pt.get(this.loadedName+"_path_"+lt)}catch(vt){if(!this.ignoreErrors)throw vt;return(0,L.warn)(`getPathGenerator - ignoring character: "${vt}".`),this.compiledGlyphs[lt]=function(gt,nt){}}if(this.isEvalSupported&&L.FeatureTest.isEvalSupported){const vt=[];for(const gt of U){const nt=gt.args!==void 0?gt.args.join(","):"";vt.push("c.",gt.cmd,"(",nt,`);
`)}return this.compiledGlyphs[lt]=new Function("c","size",vt.join(""))}return this.compiledGlyphs[lt]=function(vt,gt){for(const nt of U)nt.cmd==="scale"&&(nt.args=[gt,-gt]),vt[nt.cmd].apply(vt,nt.args)}}}D.FontFaceObject=_},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.NodeStandardFontDataFactory=D.NodeFilterFactory=D.NodeCanvasFactory=D.NodeCMapReaderFactory=void 0;var L=_t(7);_t(1);const $=function(lt){return new Promise((U,vt)=>{require$$5.readFile(lt,(nt,X)=>{if(nt||!X){vt(new Error(nt));return}U(new Uint8Array(X))})})};class _ extends L.BaseFilterFactory{}D.NodeFilterFactory=_;class ot extends L.BaseCanvasFactory{_createCanvas(U,vt){return require$$5.createCanvas(U,vt)}}D.NodeCanvasFactory=ot;class $t extends L.BaseCMapReaderFactory{_fetchData(U,vt){return $(U).then(gt=>({cMapData:gt,compressionType:vt}))}}D.NodeCMapReaderFactory=$t;class pt extends L.BaseStandardFontDataFactory{_fetchData(U){return $(U)}}D.NodeStandardFontDataFactory=pt},(x,D,_t)=>{var Ct,Sr,ne,Er;Object.defineProperty(D,"__esModule",{value:!0}),D.CanvasGraphics=void 0;var L=_t(1),$=_t(6),_=_t(12),ot=_t(13);const $t=16,pt=100,lt=4096,U=15,vt=10,gt=1e3,nt=16;function X(et,w){if(et._removeMirroring)throw new Error("Context is already forwarding operations.");et.__originalSave=et.save,et.__originalRestore=et.restore,et.__originalRotate=et.rotate,et.__originalScale=et.scale,et.__originalTranslate=et.translate,et.__originalTransform=et.transform,et.__originalSetTransform=et.setTransform,et.__originalResetTransform=et.resetTransform,et.__originalClip=et.clip,et.__originalMoveTo=et.moveTo,et.__originalLineTo=et.lineTo,et.__originalBezierCurveTo=et.bezierCurveTo,et.__originalRect=et.rect,et.__originalClosePath=et.closePath,et.__originalBeginPath=et.beginPath,et._removeMirroring=()=>{et.save=et.__originalSave,et.restore=et.__originalRestore,et.rotate=et.__originalRotate,et.scale=et.__originalScale,et.translate=et.__originalTranslate,et.transform=et.__originalTransform,et.setTransform=et.__originalSetTransform,et.resetTransform=et.__originalResetTransform,et.clip=et.__originalClip,et.moveTo=et.__originalMoveTo,et.lineTo=et.__originalLineTo,et.bezierCurveTo=et.__originalBezierCurveTo,et.rect=et.__originalRect,et.closePath=et.__originalClosePath,et.beginPath=et.__originalBeginPath,delete et._removeMirroring},et.save=function(){w.save(),this.__originalSave()},et.restore=function(){w.restore(),this.__originalRestore()},et.translate=function(T,B){w.translate(T,B),this.__originalTranslate(T,B)},et.scale=function(T,B){w.scale(T,B),this.__originalScale(T,B)},et.transform=function(T,B,j,K,ut,yt){w.transform(T,B,j,K,ut,yt),this.__originalTransform(T,B,j,K,ut,yt)},et.setTransform=function(T,B,j,K,ut,yt){w.setTransform(T,B,j,K,ut,yt),this.__originalSetTransform(T,B,j,K,ut,yt)},et.resetTransform=function(){w.resetTransform(),this.__originalResetTransform()},et.rotate=function(T){w.rotate(T),this.__originalRotate(T)},et.clip=function(T){w.clip(T),this.__originalClip(T)},et.moveTo=function(R,T){w.moveTo(R,T),this.__originalMoveTo(R,T)},et.lineTo=function(R,T){w.lineTo(R,T),this.__originalLineTo(R,T)},et.bezierCurveTo=function(R,T,B,j,K,ut){w.bezierCurveTo(R,T,B,j,K,ut),this.__originalBezierCurveTo(R,T,B,j,K,ut)},et.rect=function(R,T,B,j){w.rect(R,T,B,j),this.__originalRect(R,T,B,j)},et.closePath=function(){w.closePath(),this.__originalClosePath()},et.beginPath=function(){w.beginPath(),this.__originalBeginPath()}}class Q{constructor(w){this.canvasFactory=w,this.cache=Object.create(null)}getCanvas(w,R,T){let B;return this.cache[w]!==void 0?(B=this.cache[w],this.canvasFactory.reset(B,R,T)):(B=this.canvasFactory.create(R,T),this.cache[w]=B),B}delete(w){delete this.cache[w]}clear(){for(const w in this.cache){const R=this.cache[w];this.canvasFactory.destroy(R),delete this.cache[w]}}}function V(et,w,R,T,B,j,K,ut,yt,zt){const[Bt,Gt,Jt,le,Qt,Se]=(0,$.getCurrentTransform)(et);if(Gt===0&&Jt===0){const Ce=K*Bt+Qt,te=Math.round(Ce),jt=ut*le+Se,It=Math.round(jt),Zt=(K+yt)*Bt+Qt,ge=Math.abs(Math.round(Zt)-te)||1,fe=(ut+zt)*le+Se,Oe=Math.abs(Math.round(fe)-It)||1;return et.setTransform(Math.sign(Bt),0,0,Math.sign(le),te,It),et.drawImage(w,R,T,B,j,0,0,ge,Oe),et.setTransform(Bt,Gt,Jt,le,Qt,Se),[ge,Oe]}if(Bt===0&&le===0){const Ce=ut*Jt+Qt,te=Math.round(Ce),jt=K*Gt+Se,It=Math.round(jt),Zt=(ut+zt)*Jt+Qt,ge=Math.abs(Math.round(Zt)-te)||1,fe=(K+yt)*Gt+Se,Oe=Math.abs(Math.round(fe)-It)||1;return et.setTransform(0,Math.sign(Gt),Math.sign(Jt),0,te,It),et.drawImage(w,R,T,B,j,0,0,Oe,ge),et.setTransform(Bt,Gt,Jt,le,Qt,Se),[Oe,ge]}et.drawImage(w,R,T,B,j,K,ut,yt,zt);const Re=Math.hypot(Bt,Gt),ce=Math.hypot(Jt,le);return[Re*yt,ce*zt]}function J(et){const{width:w,height:R}=et;if(w>gt||R>gt)return null;const T=1e3,B=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),j=w+1;let K=new Uint8Array(j*(R+1)),ut,yt,zt;const Bt=w+7&-8;let Gt=new Uint8Array(Bt*R),Jt=0;for(const ce of et.data){let Ce=128;for(;Ce>0;)Gt[Jt++]=ce&Ce?0:255,Ce>>=1}let le=0;for(Jt=0,Gt[Jt]!==0&&(K[0]=1,++le),yt=1;yt<w;yt++)Gt[Jt]!==Gt[Jt+1]&&(K[yt]=Gt[Jt]?2:1,++le),Jt++;for(Gt[Jt]!==0&&(K[yt]=2,++le),ut=1;ut<R;ut++){Jt=ut*Bt,zt=ut*j,Gt[Jt-Bt]!==Gt[Jt]&&(K[zt]=Gt[Jt]?1:8,++le);let ce=(Gt[Jt]?4:0)+(Gt[Jt-Bt]?8:0);for(yt=1;yt<w;yt++)ce=(ce>>2)+(Gt[Jt+1]?4:0)+(Gt[Jt-Bt+1]?8:0),B[ce]&&(K[zt+yt]=B[ce],++le),Jt++;if(Gt[Jt-Bt]!==Gt[Jt]&&(K[zt+yt]=Gt[Jt]?2:4,++le),le>T)return null}for(Jt=Bt*(R-1),zt=ut*j,Gt[Jt]!==0&&(K[zt]=8,++le),yt=1;yt<w;yt++)Gt[Jt]!==Gt[Jt+1]&&(K[zt+yt]=Gt[Jt]?4:8,++le),Jt++;if(Gt[Jt]!==0&&(K[zt+yt]=4,++le),le>T)return null;const Qt=new Int32Array([0,j,-1,0,-j,0,0,0,1]),Se=new Path2D;for(ut=0;le&&ut<=R;ut++){let ce=ut*j;const Ce=ce+w;for(;ce<Ce&&!K[ce];)ce++;if(ce===Ce)continue;Se.moveTo(ce%j,ut);const te=ce;let jt=K[ce];do{const It=Qt[jt];do ce+=It;while(!K[ce]);const Zt=K[ce];Zt!==5&&Zt!==10?(jt=Zt,K[ce]=0):(jt=Zt&51*jt>>4,K[ce]&=jt>>2|jt<<2),Se.lineTo(ce%j,ce/j|0),K[ce]||--le}while(te!==ce);--ut}return Gt=null,K=null,function(ce){ce.save(),ce.scale(1/w,-1/R),ce.translate(0,-R),ce.fill(Se),ce.beginPath(),ce.restore()}}class st{constructor(w,R){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=L.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=L.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=L.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,w,R])}clone(){const w=Object.create(this);return w.clipBox=this.clipBox.slice(),w}setCurrentPoint(w,R){this.x=w,this.y=R}updatePathMinMax(w,R,T){[R,T]=L.Util.applyTransform([R,T],w),this.minX=Math.min(this.minX,R),this.minY=Math.min(this.minY,T),this.maxX=Math.max(this.maxX,R),this.maxY=Math.max(this.maxY,T)}updateRectMinMax(w,R){const T=L.Util.applyTransform(R,w),B=L.Util.applyTransform(R.slice(2),w);this.minX=Math.min(this.minX,T[0],B[0]),this.minY=Math.min(this.minY,T[1],B[1]),this.maxX=Math.max(this.maxX,T[0],B[0]),this.maxY=Math.max(this.maxY,T[1],B[1])}updateScalingPathMinMax(w,R){L.Util.scaleMinMax(w,R),this.minX=Math.min(this.minX,R[0]),this.maxX=Math.max(this.maxX,R[1]),this.minY=Math.min(this.minY,R[2]),this.maxY=Math.max(this.maxY,R[3])}updateCurvePathMinMax(w,R,T,B,j,K,ut,yt,zt,Bt){const Gt=L.Util.bezierBoundingBox(R,T,B,j,K,ut,yt,zt);if(Bt){Bt[0]=Math.min(Bt[0],Gt[0],Gt[2]),Bt[1]=Math.max(Bt[1],Gt[0],Gt[2]),Bt[2]=Math.min(Bt[2],Gt[1],Gt[3]),Bt[3]=Math.max(Bt[3],Gt[1],Gt[3]);return}this.updateRectMinMax(w,Gt)}getPathBoundingBox(w=_.PathType.FILL,R=null){const T=[this.minX,this.minY,this.maxX,this.maxY];if(w===_.PathType.STROKE){R||(0,L.unreachable)("Stroke bounding box must include transform.");const B=L.Util.singularValueDecompose2dScale(R),j=B[0]*this.lineWidth/2,K=B[1]*this.lineWidth/2;T[0]-=j,T[1]-=K,T[2]+=j,T[3]+=K}return T}updateClipFromPath(){const w=L.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(w||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(w){this.clipBox=w,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(w=_.PathType.FILL,R=null){return L.Util.intersect(this.clipBox,this.getPathBoundingBox(w,R))}}function rt(et,w){if(typeof ImageData<"u"&&w instanceof ImageData){et.putImageData(w,0,0);return}const R=w.height,T=w.width,B=R%nt,j=(R-B)/nt,K=B===0?j:j+1,ut=et.createImageData(T,nt);let yt=0,zt;const Bt=w.data,Gt=ut.data;let Jt,le,Qt,Se;if(w.kind===L.ImageKind.GRAYSCALE_1BPP){const Re=Bt.byteLength,ce=new Uint32Array(Gt.buffer,0,Gt.byteLength>>2),Ce=ce.length,te=T+7>>3,jt=4294967295,It=L.FeatureTest.isLittleEndian?4278190080:255;for(Jt=0;Jt<K;Jt++){for(Qt=Jt<j?nt:B,zt=0,le=0;le<Qt;le++){const Zt=Re-yt;let ge=0;const fe=Zt>te?T:Zt*8-7,Oe=fe&-8;let ze=0,Ne=0;for(;ge<Oe;ge+=8)Ne=Bt[yt++],ce[zt++]=Ne&128?jt:It,ce[zt++]=Ne&64?jt:It,ce[zt++]=Ne&32?jt:It,ce[zt++]=Ne&16?jt:It,ce[zt++]=Ne&8?jt:It,ce[zt++]=Ne&4?jt:It,ce[zt++]=Ne&2?jt:It,ce[zt++]=Ne&1?jt:It;for(;ge<fe;ge++)ze===0&&(Ne=Bt[yt++],ze=128),ce[zt++]=Ne&ze?jt:It,ze>>=1}for(;zt<Ce;)ce[zt++]=0;et.putImageData(ut,0,Jt*nt)}}else if(w.kind===L.ImageKind.RGBA_32BPP){for(le=0,Se=T*nt*4,Jt=0;Jt<j;Jt++)Gt.set(Bt.subarray(yt,yt+Se)),yt+=Se,et.putImageData(ut,0,le),le+=nt;Jt<K&&(Se=T*B*4,Gt.set(Bt.subarray(yt,yt+Se)),et.putImageData(ut,0,le))}else if(w.kind===L.ImageKind.RGB_24BPP)for(Qt=nt,Se=T*Qt,Jt=0;Jt<K;Jt++){for(Jt>=j&&(Qt=B,Se=T*Qt),zt=0,le=Se;le--;)Gt[zt++]=Bt[yt++],Gt[zt++]=Bt[yt++],Gt[zt++]=Bt[yt++],Gt[zt++]=255;et.putImageData(ut,0,Jt*nt)}else throw new Error(`bad image kind: ${w.kind}`)}function tt(et,w){if(w.bitmap){et.drawImage(w.bitmap,0,0);return}const R=w.height,T=w.width,B=R%nt,j=(R-B)/nt,K=B===0?j:j+1,ut=et.createImageData(T,nt);let yt=0;const zt=w.data,Bt=ut.data;for(let Gt=0;Gt<K;Gt++){const Jt=Gt<j?nt:B;({srcPos:yt}=(0,ot.convertBlackAndWhiteToRGBA)({src:zt,srcPos:yt,dest:Bt,width:T,height:Jt,nonBlackColor:0})),et.putImageData(ut,0,Gt*nt)}}function O(et,w){const R=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const T of R)et[T]!==void 0&&(w[T]=et[T]);et.setLineDash!==void 0&&(w.setLineDash(et.getLineDash()),w.lineDashOffset=et.lineDashOffset)}function H(et){if(et.strokeStyle=et.fillStyle="#000000",et.fillRule="nonzero",et.globalAlpha=1,et.lineWidth=1,et.lineCap="butt",et.lineJoin="miter",et.miterLimit=10,et.globalCompositeOperation="source-over",et.font="10px sans-serif",et.setLineDash!==void 0&&(et.setLineDash([]),et.lineDashOffset=0),!L.isNodeJS){const{filter:w}=et;w!=="none"&&w!==""&&(et.filter="none")}}function ct(et,w,R,T){const B=et.length;for(let j=3;j<B;j+=4){const K=et[j];if(K===0)et[j-3]=w,et[j-2]=R,et[j-1]=T;else if(K<255){const ut=255-K;et[j-3]=et[j-3]*K+w*ut>>8,et[j-2]=et[j-2]*K+R*ut>>8,et[j-1]=et[j-1]*K+T*ut>>8}}}function q(et,w,R){const T=et.length,B=1/255;for(let j=3;j<T;j+=4){const K=R?R[et[j]]:et[j];w[j]=w[j]*K*B|0}}function N(et,w,R){const T=et.length;for(let B=3;B<T;B+=4){const j=et[B-3]*77+et[B-2]*152+et[B-1]*28;w[B]=R?w[B]*R[j>>8]>>8:w[B]*j>>16}}function at(et,w,R,T,B,j,K,ut,yt,zt,Bt){const Gt=!!j,Jt=Gt?j[0]:0,le=Gt?j[1]:0,Qt=Gt?j[2]:0,Se=B==="Luminosity"?N:q,ce=Math.min(T,Math.ceil(1048576/R));for(let Ce=0;Ce<T;Ce+=ce){const te=Math.min(ce,T-Ce),jt=et.getImageData(ut-zt,Ce+(yt-Bt),R,te),It=w.getImageData(ut,Ce+yt,R,te);Gt&&ct(jt.data,Jt,le,Qt),Se(jt.data,It.data,K),w.putImageData(It,ut,Ce+yt)}}function Y(et,w,R,T){const B=T[0],j=T[1],K=T[2]-B,ut=T[3]-j;K===0||ut===0||(at(w.context,R,K,ut,w.subtype,w.backdrop,w.transferMap,B,j,w.offsetX,w.offsetY),et.save(),et.globalAlpha=1,et.globalCompositeOperation="source-over",et.setTransform(1,0,0,1,0,0),et.drawImage(R.canvas,0,0),et.restore())}function St(et,w){const R=L.Util.singularValueDecompose2dScale(et);R[0]=Math.fround(R[0]),R[1]=Math.fround(R[1]);const T=Math.fround((globalThis.devicePixelRatio||1)*$.PixelsPerInch.PDF_TO_CSS_UNITS);return w!==void 0?w:R[0]<=T||R[1]<=T}const kt=["butt","round","square"],it=["miter","round","bevel"],Rt={},Wt={},_e=class _e{constructor(w,R,T,B,j,{optionalContentConfig:K,markedContentStack:ut=null},yt,zt){mt(this,Ct);mt(this,ne);this.ctx=w,this.current=new st(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=R,this.objs=T,this.canvasFactory=B,this.filterFactory=j,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=ut||[],this.optionalContentConfig=K,this.cachedCanvases=new Q(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=yt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=zt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(w,R=null){return typeof w=="string"?w.startsWith("g_")?this.commonObjs.get(w):this.objs.get(w):R}beginDrawing({transform:w,viewport:R,transparency:T=!1,background:B=null}){const j=this.ctx.canvas.width,K=this.ctx.canvas.height,ut=this.ctx.fillStyle;if(this.ctx.fillStyle=B||"#ffffff",this.ctx.fillRect(0,0,j,K),this.ctx.fillStyle=ut,T){const yt=this.cachedCanvases.getCanvas("transparent",j,K);this.compositeCtx=this.ctx,this.transparentCanvas=yt.canvas,this.ctx=yt.context,this.ctx.save(),this.ctx.transform(...(0,$.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),H(this.ctx),w&&(this.ctx.transform(...w),this.outputScaleX=w[0],this.outputScaleY=w[0]),this.ctx.transform(...R.transform),this.viewportScale=R.scale,this.baseTransform=(0,$.getCurrentTransform)(this.ctx)}executeOperatorList(w,R,T,B){const j=w.argsArray,K=w.fnArray;let ut=R||0;const yt=j.length;if(yt===ut)return ut;const zt=yt-ut>vt&&typeof T=="function",Bt=zt?Date.now()+U:0;let Gt=0;const Jt=this.commonObjs,le=this.objs;let Qt;for(;;){if(B!==void 0&&ut===B.nextBreakPoint)return B.breakIt(ut,T),ut;if(Qt=K[ut],Qt!==L.OPS.dependency)this[Qt].apply(this,j[ut]);else for(const Se of j[ut]){const Re=Se.startsWith("g_")?Jt:le;if(!Re.has(Se))return Re.get(Se,T),ut}if(ut++,ut===yt)return ut;if(zt&&++Gt>vt){if(Date.now()>Bt)return T(),ut;Gt=0}}}endDrawing(){xt(this,Ct,Sr).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const w of this._cachedBitmapsMap.values()){for(const R of w.values())typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement&&(R.width=R.height=0);w.clear()}this._cachedBitmapsMap.clear(),xt(this,ne,Er).call(this)}_scaleImage(w,R){const T=w.width,B=w.height;let j=Math.max(Math.hypot(R[0],R[1]),1),K=Math.max(Math.hypot(R[2],R[3]),1),ut=T,yt=B,zt="prescale1",Bt,Gt;for(;j>2&&ut>1||K>2&&yt>1;){let Jt=ut,le=yt;j>2&&ut>1&&(Jt=ut>=16384?Math.floor(ut/2)-1||1:Math.ceil(ut/2),j/=ut/Jt),K>2&&yt>1&&(le=yt>=16384?Math.floor(yt/2)-1||1:Math.ceil(yt)/2,K/=yt/le),Bt=this.cachedCanvases.getCanvas(zt,Jt,le),Gt=Bt.context,Gt.clearRect(0,0,Jt,le),Gt.drawImage(w,0,0,ut,yt,0,0,Jt,le),w=Bt.canvas,ut=Jt,yt=le,zt=zt==="prescale1"?"prescale2":"prescale1"}return{img:w,paintWidth:ut,paintHeight:yt}}_createMaskCanvas(w){const R=this.ctx,{width:T,height:B}=w,j=this.current.fillColor,K=this.current.patternFill,ut=(0,$.getCurrentTransform)(R);let yt,zt,Bt,Gt;if((w.bitmap||w.data)&&w.count>1){const ge=w.bitmap||w.data.buffer;zt=JSON.stringify(K?ut:[ut.slice(0,4),j]),yt=this._cachedBitmapsMap.get(ge),yt||(yt=new Map,this._cachedBitmapsMap.set(ge,yt));const fe=yt.get(zt);if(fe&&!K){const Oe=Math.round(Math.min(ut[0],ut[2])+ut[4]),ze=Math.round(Math.min(ut[1],ut[3])+ut[5]);return{canvas:fe,offsetX:Oe,offsetY:ze}}Bt=fe}Bt||(Gt=this.cachedCanvases.getCanvas("maskCanvas",T,B),tt(Gt.context,w));let Jt=L.Util.transform(ut,[1/T,0,0,-1/B,0,0]);Jt=L.Util.transform(Jt,[1,0,0,1,0,-B]);const le=L.Util.applyTransform([0,0],Jt),Qt=L.Util.applyTransform([T,B],Jt),Se=L.Util.normalizeRect([le[0],le[1],Qt[0],Qt[1]]),Re=Math.round(Se[2]-Se[0])||1,ce=Math.round(Se[3]-Se[1])||1,Ce=this.cachedCanvases.getCanvas("fillCanvas",Re,ce),te=Ce.context,jt=Math.min(le[0],Qt[0]),It=Math.min(le[1],Qt[1]);te.translate(-jt,-It),te.transform(...Jt),Bt||(Bt=this._scaleImage(Gt.canvas,(0,$.getCurrentTransformInverse)(te)),Bt=Bt.img,yt&&K&&yt.set(zt,Bt)),te.imageSmoothingEnabled=St((0,$.getCurrentTransform)(te),w.interpolate),V(te,Bt,0,0,Bt.width,Bt.height,0,0,T,B),te.globalCompositeOperation="source-in";const Zt=L.Util.transform((0,$.getCurrentTransformInverse)(te),[1,0,0,1,-jt,-It]);return te.fillStyle=K?j.getPattern(R,this,Zt,_.PathType.FILL):j,te.fillRect(0,0,T,B),yt&&!K&&(this.cachedCanvases.delete("fillCanvas"),yt.set(zt,Ce.canvas)),{canvas:Ce.canvas,offsetX:Math.round(jt),offsetY:Math.round(It)}}setLineWidth(w){w!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=w,this.ctx.lineWidth=w}setLineCap(w){this.ctx.lineCap=kt[w]}setLineJoin(w){this.ctx.lineJoin=it[w]}setMiterLimit(w){this.ctx.miterLimit=w}setDash(w,R){const T=this.ctx;T.setLineDash!==void 0&&(T.setLineDash(w),T.lineDashOffset=R)}setRenderingIntent(w){}setFlatness(w){}setGState(w){for(const[R,T]of w)switch(R){case"LW":this.setLineWidth(T);break;case"LC":this.setLineCap(T);break;case"LJ":this.setLineJoin(T);break;case"ML":this.setMiterLimit(T);break;case"D":this.setDash(T[0],T[1]);break;case"RI":this.setRenderingIntent(T);break;case"FL":this.setFlatness(T);break;case"Font":this.setFont(T[0],T[1]);break;case"CA":this.current.strokeAlpha=T;break;case"ca":this.current.fillAlpha=T,this.ctx.globalAlpha=T;break;case"BM":this.ctx.globalCompositeOperation=T;break;case"SMask":this.current.activeSMask=T?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(T);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const w=this.inSMaskMode;this.current.activeSMask&&!w?this.beginSMaskMode():!this.current.activeSMask&&w&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const w=this.ctx.canvas.width,R=this.ctx.canvas.height,T="smaskGroupAt"+this.groupLevel,B=this.cachedCanvases.getCanvas(T,w,R);this.suspendedCtx=this.ctx,this.ctx=B.context;const j=this.ctx;j.setTransform(...(0,$.getCurrentTransform)(this.suspendedCtx)),O(this.suspendedCtx,j),X(j,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),O(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(w){if(!this.current.activeSMask)return;w?(w[0]=Math.floor(w[0]),w[1]=Math.floor(w[1]),w[2]=Math.ceil(w[2]),w[3]=Math.ceil(w[3])):w=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const R=this.current.activeSMask,T=this.suspendedCtx;Y(T,R,this.ctx,w),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(O(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const w=this.current;this.stateStack.push(w),this.current=w.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),O(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(w,R,T,B,j,K){this.ctx.transform(w,R,T,B,j,K),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(w,R,T){const B=this.ctx,j=this.current;let K=j.x,ut=j.y,yt,zt;const Bt=(0,$.getCurrentTransform)(B),Gt=Bt[0]===0&&Bt[3]===0||Bt[1]===0&&Bt[2]===0,Jt=Gt?T.slice(0):null;for(let le=0,Qt=0,Se=w.length;le<Se;le++)switch(w[le]|0){case L.OPS.rectangle:K=R[Qt++],ut=R[Qt++];const Re=R[Qt++],ce=R[Qt++],Ce=K+Re,te=ut+ce;B.moveTo(K,ut),Re===0||ce===0?B.lineTo(Ce,te):(B.lineTo(Ce,ut),B.lineTo(Ce,te),B.lineTo(K,te)),Gt||j.updateRectMinMax(Bt,[K,ut,Ce,te]),B.closePath();break;case L.OPS.moveTo:K=R[Qt++],ut=R[Qt++],B.moveTo(K,ut),Gt||j.updatePathMinMax(Bt,K,ut);break;case L.OPS.lineTo:K=R[Qt++],ut=R[Qt++],B.lineTo(K,ut),Gt||j.updatePathMinMax(Bt,K,ut);break;case L.OPS.curveTo:yt=K,zt=ut,K=R[Qt+4],ut=R[Qt+5],B.bezierCurveTo(R[Qt],R[Qt+1],R[Qt+2],R[Qt+3],K,ut),j.updateCurvePathMinMax(Bt,yt,zt,R[Qt],R[Qt+1],R[Qt+2],R[Qt+3],K,ut,Jt),Qt+=6;break;case L.OPS.curveTo2:yt=K,zt=ut,B.bezierCurveTo(K,ut,R[Qt],R[Qt+1],R[Qt+2],R[Qt+3]),j.updateCurvePathMinMax(Bt,yt,zt,K,ut,R[Qt],R[Qt+1],R[Qt+2],R[Qt+3],Jt),K=R[Qt+2],ut=R[Qt+3],Qt+=4;break;case L.OPS.curveTo3:yt=K,zt=ut,K=R[Qt+2],ut=R[Qt+3],B.bezierCurveTo(R[Qt],R[Qt+1],K,ut,K,ut),j.updateCurvePathMinMax(Bt,yt,zt,R[Qt],R[Qt+1],K,ut,K,ut,Jt),Qt+=4;break;case L.OPS.closePath:B.closePath();break}Gt&&j.updateScalingPathMinMax(Bt,Jt),j.setCurrentPoint(K,ut)}closePath(){this.ctx.closePath()}stroke(w=!0){const R=this.ctx,T=this.current.strokeColor;R.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof T=="object"&&(T!=null&&T.getPattern)?(R.save(),R.strokeStyle=T.getPattern(R,this,(0,$.getCurrentTransformInverse)(R),_.PathType.STROKE),this.rescaleAndStroke(!1),R.restore()):this.rescaleAndStroke(!0)),w&&this.consumePath(this.current.getClippedPathBoundingBox()),R.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(w=!0){const R=this.ctx,T=this.current.fillColor,B=this.current.patternFill;let j=!1;B&&(R.save(),R.fillStyle=T.getPattern(R,this,(0,$.getCurrentTransformInverse)(R),_.PathType.FILL),j=!0);const K=this.current.getClippedPathBoundingBox();this.contentVisible&&K!==null&&(this.pendingEOFill?(R.fill("evenodd"),this.pendingEOFill=!1):R.fill()),j&&R.restore(),w&&this.consumePath(K)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Rt}eoClip(){this.pendingClip=Wt}beginText(){this.current.textMatrix=L.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const w=this.pendingTextPaths,R=this.ctx;if(w===void 0){R.beginPath();return}R.save(),R.beginPath();for(const T of w)R.setTransform(...T.transform),R.translate(T.x,T.y),T.addToPath(R,T.fontSize);R.restore(),R.clip(),R.beginPath(),delete this.pendingTextPaths}setCharSpacing(w){this.current.charSpacing=w}setWordSpacing(w){this.current.wordSpacing=w}setHScale(w){this.current.textHScale=w/100}setLeading(w){this.current.leading=-w}setFont(w,R){var Bt;const T=this.commonObjs.get(w),B=this.current;if(!T)throw new Error(`Can't find font for ${w}`);if(B.fontMatrix=T.fontMatrix||L.FONT_IDENTITY_MATRIX,(B.fontMatrix[0]===0||B.fontMatrix[3]===0)&&(0,L.warn)("Invalid font matrix for font "+w),R<0?(R=-R,B.fontDirection=-1):B.fontDirection=1,this.current.font=T,this.current.fontSize=R,T.isType3Font)return;const j=T.loadedName||"sans-serif",K=((Bt=T.systemFontInfo)==null?void 0:Bt.css)||`"${j}", ${T.fallbackName}`;let ut="normal";T.black?ut="900":T.bold&&(ut="bold");const yt=T.italic?"italic":"normal";let zt=R;R<$t?zt=$t:R>pt&&(zt=pt),this.current.fontSizeScale=R/zt,this.ctx.font=`${yt} ${ut} ${zt}px ${K}`}setTextRenderingMode(w){this.current.textRenderingMode=w}setTextRise(w){this.current.textRise=w}moveText(w,R){this.current.x=this.current.lineX+=w,this.current.y=this.current.lineY+=R}setLeadingMoveText(w,R){this.setLeading(-R),this.moveText(w,R)}setTextMatrix(w,R,T,B,j,K){this.current.textMatrix=[w,R,T,B,j,K],this.current.textMatrixScale=Math.hypot(w,R),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(w,R,T,B){const j=this.ctx,K=this.current,ut=K.font,yt=K.textRenderingMode,zt=K.fontSize/K.fontSizeScale,Bt=yt&L.TextRenderingMode.FILL_STROKE_MASK,Gt=!!(yt&L.TextRenderingMode.ADD_TO_PATH_FLAG),Jt=K.patternFill&&!ut.missingFile;let le;(ut.disableFontFace||Gt||Jt)&&(le=ut.getPathGenerator(this.commonObjs,w)),ut.disableFontFace||Jt?(j.save(),j.translate(R,T),j.beginPath(),le(j,zt),B&&j.setTransform(...B),(Bt===L.TextRenderingMode.FILL||Bt===L.TextRenderingMode.FILL_STROKE)&&j.fill(),(Bt===L.TextRenderingMode.STROKE||Bt===L.TextRenderingMode.FILL_STROKE)&&j.stroke(),j.restore()):((Bt===L.TextRenderingMode.FILL||Bt===L.TextRenderingMode.FILL_STROKE)&&j.fillText(w,R,T),(Bt===L.TextRenderingMode.STROKE||Bt===L.TextRenderingMode.FILL_STROKE)&&j.strokeText(w,R,T)),Gt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,$.getCurrentTransform)(j),x:R,y:T,fontSize:zt,addToPath:le})}get isFontSubpixelAAEnabled(){const{context:w}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);w.scale(1.5,1),w.fillText("I",0,10);const R=w.getImageData(0,0,10,10).data;let T=!1;for(let B=3;B<R.length;B+=4)if(R[B]>0&&R[B]<255){T=!0;break}return(0,L.shadow)(this,"isFontSubpixelAAEnabled",T)}showText(w){const R=this.current,T=R.font;if(T.isType3Font)return this.showType3Text(w);const B=R.fontSize;if(B===0)return;const j=this.ctx,K=R.fontSizeScale,ut=R.charSpacing,yt=R.wordSpacing,zt=R.fontDirection,Bt=R.textHScale*zt,Gt=w.length,Jt=T.vertical,le=Jt?1:-1,Qt=T.defaultVMetrics,Se=B*R.fontMatrix[0],Re=R.textRenderingMode===L.TextRenderingMode.FILL&&!T.disableFontFace&&!R.patternFill;j.save(),j.transform(...R.textMatrix),j.translate(R.x,R.y+R.textRise),zt>0?j.scale(Bt,-1):j.scale(Bt,1);let ce;if(R.patternFill){j.save();const Zt=R.fillColor.getPattern(j,this,(0,$.getCurrentTransformInverse)(j),_.PathType.FILL);ce=(0,$.getCurrentTransform)(j),j.restore(),j.fillStyle=Zt}let Ce=R.lineWidth;const te=R.textMatrixScale;if(te===0||Ce===0){const Zt=R.textRenderingMode&L.TextRenderingMode.FILL_STROKE_MASK;(Zt===L.TextRenderingMode.STROKE||Zt===L.TextRenderingMode.FILL_STROKE)&&(Ce=this.getSinglePixelWidth())}else Ce/=te;if(K!==1&&(j.scale(K,K),Ce/=K),j.lineWidth=Ce,T.isInvalidPDFjsFont){const Zt=[];let ge=0;for(const fe of w)Zt.push(fe.unicode),ge+=fe.width;j.fillText(Zt.join(""),0,0),R.x+=ge*Se*Bt,j.restore(),this.compose();return}let jt=0,It;for(It=0;It<Gt;++It){const Zt=w[It];if(typeof Zt=="number"){jt+=le*Zt*B/1e3;continue}let ge=!1;const fe=(Zt.isSpace?yt:0)+ut,Oe=Zt.fontChar,ze=Zt.accent;let Ne,We,qe=Zt.width;if(Jt){const Je=Zt.vmetric||Qt,Xt=-(Zt.vmetric?Je[1]:qe*.5)*Se,Mt=Je[2]*Se;qe=Je?-Je[0]:qe,Ne=Xt/K,We=(jt+Mt)/K}else Ne=jt/K,We=0;if(T.remeasure&&qe>0){const Je=j.measureText(Oe).width*1e3/B*K;if(qe<Je&&this.isFontSubpixelAAEnabled){const Xt=qe/Je;ge=!0,j.save(),j.scale(Xt,1),Ne/=Xt}else qe!==Je&&(Ne+=(qe-Je)/2e3*B/K)}if(this.contentVisible&&(Zt.isInFont||T.missingFile)){if(Re&&!ze)j.fillText(Oe,Ne,We);else if(this.paintChar(Oe,Ne,We,ce),ze){const Je=Ne+B*ze.offset.x/K,Xt=We-B*ze.offset.y/K;this.paintChar(ze.fontChar,Je,Xt,ce)}}const Fe=Jt?qe*Se-fe*zt:qe*Se+fe*zt;jt+=Fe,ge&&j.restore()}Jt?R.y-=jt:R.x+=jt*Bt,j.restore(),this.compose()}showType3Text(w){const R=this.ctx,T=this.current,B=T.font,j=T.fontSize,K=T.fontDirection,ut=B.vertical?1:-1,yt=T.charSpacing,zt=T.wordSpacing,Bt=T.textHScale*K,Gt=T.fontMatrix||L.FONT_IDENTITY_MATRIX,Jt=w.length,le=T.textRenderingMode===L.TextRenderingMode.INVISIBLE;let Qt,Se,Re,ce;if(!(le||j===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,R.save(),R.transform(...T.textMatrix),R.translate(T.x,T.y),R.scale(Bt,K),Qt=0;Qt<Jt;++Qt){if(Se=w[Qt],typeof Se=="number"){ce=ut*Se*j/1e3,this.ctx.translate(ce,0),T.x+=ce*Bt;continue}const Ce=(Se.isSpace?zt:0)+yt,te=B.charProcOperatorList[Se.operatorListId];if(!te){(0,L.warn)(`Type3 character "${Se.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Se,this.save(),R.scale(j,j),R.transform(...Gt),this.executeOperatorList(te),this.restore()),Re=L.Util.applyTransform([Se.width,0],Gt)[0]*j+Ce,R.translate(Re,0),T.x+=Re*Bt}R.restore(),this.processingType3=null}}setCharWidth(w,R){}setCharWidthAndBounds(w,R,T,B,j,K){this.ctx.rect(T,B,j-T,K-B),this.ctx.clip(),this.endPath()}getColorN_Pattern(w){let R;if(w[0]==="TilingPattern"){const T=w[1],B=this.baseTransform||(0,$.getCurrentTransform)(this.ctx),j={createCanvasGraphics:K=>new _e(K,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};R=new _.TilingPattern(w,T,this.ctx,j,B)}else R=this._getPattern(w[1],w[2]);return R}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(w,R,T){const B=L.Util.makeHexColor(w,R,T);this.ctx.strokeStyle=B,this.current.strokeColor=B}setFillRGBColor(w,R,T){const B=L.Util.makeHexColor(w,R,T);this.ctx.fillStyle=B,this.current.fillColor=B,this.current.patternFill=!1}_getPattern(w,R=null){let T;return this.cachedPatterns.has(w)?T=this.cachedPatterns.get(w):(T=(0,_.getShadingPattern)(this.getObject(w)),this.cachedPatterns.set(w,T)),R&&(T.matrix=R),T}shadingFill(w){if(!this.contentVisible)return;const R=this.ctx;this.save();const T=this._getPattern(w);R.fillStyle=T.getPattern(R,this,(0,$.getCurrentTransformInverse)(R),_.PathType.SHADING);const B=(0,$.getCurrentTransformInverse)(R);if(B){const{width:j,height:K}=R.canvas,[ut,yt,zt,Bt]=L.Util.getAxialAlignedBoundingBox([0,0,j,K],B);this.ctx.fillRect(ut,yt,zt-ut,Bt-yt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,L.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,L.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(w,R){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(w)&&w.length===6&&this.transform(...w),this.baseTransform=(0,$.getCurrentTransform)(this.ctx),R)){const T=R[2]-R[0],B=R[3]-R[1];this.ctx.rect(R[0],R[1],T,B),this.current.updateRectMinMax((0,$.getCurrentTransform)(this.ctx),R),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(w){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const R=this.ctx;w.isolated||(0,L.info)("TODO: Support non-isolated groups."),w.knockout&&(0,L.warn)("Knockout groups not supported.");const T=(0,$.getCurrentTransform)(R);if(w.matrix&&R.transform(...w.matrix),!w.bbox)throw new Error("Bounding box is required.");let B=L.Util.getAxialAlignedBoundingBox(w.bbox,(0,$.getCurrentTransform)(R));const j=[0,0,R.canvas.width,R.canvas.height];B=L.Util.intersect(B,j)||[0,0,0,0];const K=Math.floor(B[0]),ut=Math.floor(B[1]);let yt=Math.max(Math.ceil(B[2])-K,1),zt=Math.max(Math.ceil(B[3])-ut,1),Bt=1,Gt=1;yt>lt&&(Bt=yt/lt,yt=lt),zt>lt&&(Gt=zt/lt,zt=lt),this.current.startNewPathAndClipBox([0,0,yt,zt]);let Jt="groupAt"+this.groupLevel;w.smask&&(Jt+="_smask_"+this.smaskCounter++%2);const le=this.cachedCanvases.getCanvas(Jt,yt,zt),Qt=le.context;Qt.scale(1/Bt,1/Gt),Qt.translate(-K,-ut),Qt.transform(...T),w.smask?this.smaskStack.push({canvas:le.canvas,context:Qt,offsetX:K,offsetY:ut,scaleX:Bt,scaleY:Gt,subtype:w.smask.subtype,backdrop:w.smask.backdrop,transferMap:w.smask.transferMap||null,startTransformInverse:null}):(R.setTransform(1,0,0,1,0,0),R.translate(K,ut),R.scale(Bt,Gt),R.save()),O(R,Qt),this.ctx=Qt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(R),this.groupLevel++}endGroup(w){if(!this.contentVisible)return;this.groupLevel--;const R=this.ctx,T=this.groupStack.pop();if(this.ctx=T,this.ctx.imageSmoothingEnabled=!1,w.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const B=(0,$.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...B);const j=L.Util.getAxialAlignedBoundingBox([0,0,R.canvas.width,R.canvas.height],B);this.ctx.drawImage(R.canvas,0,0),this.ctx.restore(),this.compose(j)}}beginAnnotation(w,R,T,B,j){if(xt(this,Ct,Sr).call(this),H(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(R)&&R.length===4){const K=R[2]-R[0],ut=R[3]-R[1];if(j&&this.annotationCanvasMap){T=T.slice(),T[4]-=R[0],T[5]-=R[1],R=R.slice(),R[0]=R[1]=0,R[2]=K,R[3]=ut;const[yt,zt]=L.Util.singularValueDecompose2dScale((0,$.getCurrentTransform)(this.ctx)),{viewportScale:Bt}=this,Gt=Math.ceil(K*this.outputScaleX*Bt),Jt=Math.ceil(ut*this.outputScaleY*Bt);this.annotationCanvas=this.canvasFactory.create(Gt,Jt);const{canvas:le,context:Qt}=this.annotationCanvas;this.annotationCanvasMap.set(w,le),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Qt,this.ctx.save(),this.ctx.setTransform(yt,0,0,-zt,0,ut*zt),H(this.ctx)}else H(this.ctx),this.ctx.rect(R[0],R[1],K,ut),this.ctx.clip(),this.endPath()}this.current=new st(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...T),this.transform(...B)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),xt(this,ne,Er).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(w){if(!this.contentVisible)return;const R=w.count;w=this.getObject(w.data,w),w.count=R;const T=this.ctx,B=this.processingType3;if(B&&(B.compiled===void 0&&(B.compiled=J(w)),B.compiled)){B.compiled(T);return}const j=this._createMaskCanvas(w),K=j.canvas;T.save(),T.setTransform(1,0,0,1,0,0),T.drawImage(K,j.offsetX,j.offsetY),T.restore(),this.compose()}paintImageMaskXObjectRepeat(w,R,T=0,B=0,j,K){if(!this.contentVisible)return;w=this.getObject(w.data,w);const ut=this.ctx;ut.save();const yt=(0,$.getCurrentTransform)(ut);ut.transform(R,T,B,j,0,0);const zt=this._createMaskCanvas(w);ut.setTransform(1,0,0,1,zt.offsetX-yt[4],zt.offsetY-yt[5]);for(let Bt=0,Gt=K.length;Bt<Gt;Bt+=2){const Jt=L.Util.transform(yt,[R,T,B,j,K[Bt],K[Bt+1]]),[le,Qt]=L.Util.applyTransform([0,0],Jt);ut.drawImage(zt.canvas,le,Qt)}ut.restore(),this.compose()}paintImageMaskXObjectGroup(w){if(!this.contentVisible)return;const R=this.ctx,T=this.current.fillColor,B=this.current.patternFill;for(const j of w){const{data:K,width:ut,height:yt,transform:zt}=j,Bt=this.cachedCanvases.getCanvas("maskCanvas",ut,yt),Gt=Bt.context;Gt.save();const Jt=this.getObject(K,j);tt(Gt,Jt),Gt.globalCompositeOperation="source-in",Gt.fillStyle=B?T.getPattern(Gt,this,(0,$.getCurrentTransformInverse)(R),_.PathType.FILL):T,Gt.fillRect(0,0,ut,yt),Gt.restore(),R.save(),R.transform(...zt),R.scale(1,-1),V(R,Bt.canvas,0,0,ut,yt,0,-1,1,1),R.restore()}this.compose()}paintImageXObject(w){if(!this.contentVisible)return;const R=this.getObject(w);if(!R){(0,L.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(R)}paintImageXObjectRepeat(w,R,T,B){if(!this.contentVisible)return;const j=this.getObject(w);if(!j){(0,L.warn)("Dependent image isn't ready yet");return}const K=j.width,ut=j.height,yt=[];for(let zt=0,Bt=B.length;zt<Bt;zt+=2)yt.push({transform:[R,0,0,T,B[zt],B[zt+1]],x:0,y:0,w:K,h:ut});this.paintInlineImageXObjectGroup(j,yt)}applyTransferMapsToCanvas(w){return this.current.transferMaps!=="none"&&(w.filter=this.current.transferMaps,w.drawImage(w.canvas,0,0),w.filter="none"),w.canvas}applyTransferMapsToBitmap(w){if(this.current.transferMaps==="none")return w.bitmap;const{bitmap:R,width:T,height:B}=w,j=this.cachedCanvases.getCanvas("inlineImage",T,B),K=j.context;return K.filter=this.current.transferMaps,K.drawImage(R,0,0),K.filter="none",j.canvas}paintInlineImageXObject(w){if(!this.contentVisible)return;const R=w.width,T=w.height,B=this.ctx;if(this.save(),!L.isNodeJS){const{filter:ut}=B;ut!=="none"&&ut!==""&&(B.filter="none")}B.scale(1/R,-1/T);let j;if(w.bitmap)j=this.applyTransferMapsToBitmap(w);else if(typeof HTMLElement=="function"&&w instanceof HTMLElement||!w.data)j=w;else{const yt=this.cachedCanvases.getCanvas("inlineImage",R,T).context;rt(yt,w),j=this.applyTransferMapsToCanvas(yt)}const K=this._scaleImage(j,(0,$.getCurrentTransformInverse)(B));B.imageSmoothingEnabled=St((0,$.getCurrentTransform)(B),w.interpolate),V(B,K.img,0,0,K.paintWidth,K.paintHeight,0,-T,R,T),this.compose(),this.restore()}paintInlineImageXObjectGroup(w,R){if(!this.contentVisible)return;const T=this.ctx;let B;if(w.bitmap)B=w.bitmap;else{const j=w.width,K=w.height,yt=this.cachedCanvases.getCanvas("inlineImage",j,K).context;rt(yt,w),B=this.applyTransferMapsToCanvas(yt)}for(const j of R)T.save(),T.transform(...j.transform),T.scale(1,-1),V(T,B,j.x,j.y,j.w,j.h,0,-1,1,1),T.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(w){}markPointProps(w,R){}beginMarkedContent(w){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(w,R){w==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(R)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(w){const R=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(w);const T=this.ctx;this.pendingClip&&(R||(this.pendingClip===Wt?T.clip("evenodd"):T.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),T.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const w=(0,$.getCurrentTransform)(this.ctx);if(w[1]===0&&w[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(w[0]),Math.abs(w[3]));else{const R=Math.abs(w[0]*w[3]-w[2]*w[1]),T=Math.hypot(w[0],w[2]),B=Math.hypot(w[1],w[3]);this._cachedGetSinglePixelWidth=Math.max(T,B)/R}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:w}=this.current,{a:R,b:T,c:B,d:j}=this.ctx.getTransform();let K,ut;if(T===0&&B===0){const yt=Math.abs(R),zt=Math.abs(j);if(yt===zt)if(w===0)K=ut=1/yt;else{const Bt=yt*w;K=ut=Bt<1?1/Bt:1}else if(w===0)K=1/yt,ut=1/zt;else{const Bt=yt*w,Gt=zt*w;K=Bt<1?1/Bt:1,ut=Gt<1?1/Gt:1}}else{const yt=Math.abs(R*j-T*B),zt=Math.hypot(R,T),Bt=Math.hypot(B,j);if(w===0)K=Bt/yt,ut=zt/yt;else{const Gt=w*yt;K=Bt>Gt?Bt/Gt:1,ut=zt>Gt?zt/Gt:1}}this._cachedScaleForStroking[0]=K,this._cachedScaleForStroking[1]=ut}return this._cachedScaleForStroking}rescaleAndStroke(w){const{ctx:R}=this,{lineWidth:T}=this.current,[B,j]=this.getScaleForStroking();if(R.lineWidth=T||1,B===1&&j===1){R.stroke();return}const K=R.getLineDash();if(w&&R.save(),R.scale(B,j),K.length>0){const ut=Math.max(B,j);R.setLineDash(K.map(yt=>yt/ut)),R.lineDashOffset/=ut}R.stroke(),w&&R.restore()}isContentVisible(){for(let w=this.markedContentStack.length-1;w>=0;w--)if(!this.markedContentStack[w].visible)return!1;return!0}};Ct=new WeakSet,Sr=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ne=new WeakSet,Er=function(){if(this.pageColors){const w=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(w!=="none"){const R=this.ctx.filter;this.ctx.filter=w,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=R}}};let qt=_e;D.CanvasGraphics=qt;for(const et in L.OPS)qt.prototype[et]!==void 0&&(qt.prototype[L.OPS[et]]=qt.prototype[et])},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.TilingPattern=D.PathType=void 0,D.getShadingPattern=nt;var L=_t(1),$=_t(6);const _={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};D.PathType=_;function ot(J,st){if(!st)return;const rt=st[2]-st[0],tt=st[3]-st[1],O=new Path2D;O.rect(st[0],st[1],rt,tt),J.clip(O)}class $t{constructor(){this.constructor===$t&&(0,L.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,L.unreachable)("Abstract method `getPattern` called.")}}class pt extends $t{constructor(st){super(),this._type=st[1],this._bbox=st[2],this._colorStops=st[3],this._p0=st[4],this._p1=st[5],this._r0=st[6],this._r1=st[7],this.matrix=null}_createGradient(st){let rt;this._type==="axial"?rt=st.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(rt=st.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const tt of this._colorStops)rt.addColorStop(tt[0],tt[1]);return rt}getPattern(st,rt,tt,O){let H;if(O===_.STROKE||O===_.FILL){const ct=rt.current.getClippedPathBoundingBox(O,(0,$.getCurrentTransform)(st))||[0,0,0,0],q=Math.ceil(ct[2]-ct[0])||1,N=Math.ceil(ct[3]-ct[1])||1,at=rt.cachedCanvases.getCanvas("pattern",q,N,!0),Y=at.context;Y.clearRect(0,0,Y.canvas.width,Y.canvas.height),Y.beginPath(),Y.rect(0,0,Y.canvas.width,Y.canvas.height),Y.translate(-ct[0],-ct[1]),tt=L.Util.transform(tt,[1,0,0,1,ct[0],ct[1]]),Y.transform(...rt.baseTransform),this.matrix&&Y.transform(...this.matrix),ot(Y,this._bbox),Y.fillStyle=this._createGradient(Y),Y.fill(),H=st.createPattern(at.canvas,"no-repeat");const St=new DOMMatrix(tt);H.setTransform(St)}else ot(st,this._bbox),H=this._createGradient(st);return H}}function lt(J,st,rt,tt,O,H,ct,q){const N=st.coords,at=st.colors,Y=J.data,St=J.width*4;let kt;N[rt+1]>N[tt+1]&&(kt=rt,rt=tt,tt=kt,kt=H,H=ct,ct=kt),N[tt+1]>N[O+1]&&(kt=tt,tt=O,O=kt,kt=ct,ct=q,q=kt),N[rt+1]>N[tt+1]&&(kt=rt,rt=tt,tt=kt,kt=H,H=ct,ct=kt);const it=(N[rt]+st.offsetX)*st.scaleX,Rt=(N[rt+1]+st.offsetY)*st.scaleY,Wt=(N[tt]+st.offsetX)*st.scaleX,qt=(N[tt+1]+st.offsetY)*st.scaleY,Ct=(N[O]+st.offsetX)*st.scaleX,Yt=(N[O+1]+st.offsetY)*st.scaleY;if(Rt>=Yt)return;const ne=at[H],de=at[H+1],_e=at[H+2],et=at[ct],w=at[ct+1],R=at[ct+2],T=at[q],B=at[q+1],j=at[q+2],K=Math.round(Rt),ut=Math.round(Yt);let yt,zt,Bt,Gt,Jt,le,Qt,Se;for(let Re=K;Re<=ut;Re++){if(Re<qt){const It=Re<Rt?0:(Rt-Re)/(Rt-qt);yt=it-(it-Wt)*It,zt=ne-(ne-et)*It,Bt=de-(de-w)*It,Gt=_e-(_e-R)*It}else{let It;Re>Yt?It=1:qt===Yt?It=0:It=(qt-Re)/(qt-Yt),yt=Wt-(Wt-Ct)*It,zt=et-(et-T)*It,Bt=w-(w-B)*It,Gt=R-(R-j)*It}let ce;Re<Rt?ce=0:Re>Yt?ce=1:ce=(Rt-Re)/(Rt-Yt),Jt=it-(it-Ct)*ce,le=ne-(ne-T)*ce,Qt=de-(de-B)*ce,Se=_e-(_e-j)*ce;const Ce=Math.round(Math.min(yt,Jt)),te=Math.round(Math.max(yt,Jt));let jt=St*Re+Ce*4;for(let It=Ce;It<=te;It++)ce=(yt-It)/(yt-Jt),ce<0?ce=0:ce>1&&(ce=1),Y[jt++]=zt-(zt-le)*ce|0,Y[jt++]=Bt-(Bt-Qt)*ce|0,Y[jt++]=Gt-(Gt-Se)*ce|0,Y[jt++]=255}}function U(J,st,rt){const tt=st.coords,O=st.colors;let H,ct;switch(st.type){case"lattice":const q=st.verticesPerRow,N=Math.floor(tt.length/q)-1,at=q-1;for(H=0;H<N;H++){let Y=H*q;for(let St=0;St<at;St++,Y++)lt(J,rt,tt[Y],tt[Y+1],tt[Y+q],O[Y],O[Y+1],O[Y+q]),lt(J,rt,tt[Y+q+1],tt[Y+1],tt[Y+q],O[Y+q+1],O[Y+1],O[Y+q])}break;case"triangles":for(H=0,ct=tt.length;H<ct;H+=3)lt(J,rt,tt[H],tt[H+1],tt[H+2],O[H],O[H+1],O[H+2]);break;default:throw new Error("illegal figure")}}class vt extends $t{constructor(st){super(),this._coords=st[2],this._colors=st[3],this._figures=st[4],this._bounds=st[5],this._bbox=st[7],this._background=st[8],this.matrix=null}_createMeshCanvas(st,rt,tt){const q=Math.floor(this._bounds[0]),N=Math.floor(this._bounds[1]),at=Math.ceil(this._bounds[2])-q,Y=Math.ceil(this._bounds[3])-N,St=Math.min(Math.ceil(Math.abs(at*st[0]*1.1)),3e3),kt=Math.min(Math.ceil(Math.abs(Y*st[1]*1.1)),3e3),it=at/St,Rt=Y/kt,Wt={coords:this._coords,colors:this._colors,offsetX:-q,offsetY:-N,scaleX:1/it,scaleY:1/Rt},qt=St+2*2,Ct=kt+2*2,Yt=tt.getCanvas("mesh",qt,Ct,!1),ne=Yt.context,de=ne.createImageData(St,kt);if(rt){const et=de.data;for(let w=0,R=et.length;w<R;w+=4)et[w]=rt[0],et[w+1]=rt[1],et[w+2]=rt[2],et[w+3]=255}for(const et of this._figures)U(de,et,Wt);return ne.putImageData(de,2,2),{canvas:Yt.canvas,offsetX:q-2*it,offsetY:N-2*Rt,scaleX:it,scaleY:Rt}}getPattern(st,rt,tt,O){ot(st,this._bbox);let H;if(O===_.SHADING)H=L.Util.singularValueDecompose2dScale((0,$.getCurrentTransform)(st));else if(H=L.Util.singularValueDecompose2dScale(rt.baseTransform),this.matrix){const q=L.Util.singularValueDecompose2dScale(this.matrix);H=[H[0]*q[0],H[1]*q[1]]}const ct=this._createMeshCanvas(H,O===_.SHADING?null:this._background,rt.cachedCanvases);return O!==_.SHADING&&(st.setTransform(...rt.baseTransform),this.matrix&&st.transform(...this.matrix)),st.translate(ct.offsetX,ct.offsetY),st.scale(ct.scaleX,ct.scaleY),st.createPattern(ct.canvas,"no-repeat")}}class gt extends $t{getPattern(){return"hotpink"}}function nt(J){switch(J[0]){case"RadialAxial":return new pt(J);case"Mesh":return new vt(J);case"Dummy":return new gt}throw new Error(`Unknown IR type: ${J[0]}`)}const X={COLORED:1,UNCOLORED:2},V=class V{constructor(st,rt,tt,O,H){this.operatorList=st[2],this.matrix=st[3]||[1,0,0,1,0,0],this.bbox=st[4],this.xstep=st[5],this.ystep=st[6],this.paintType=st[7],this.tilingType=st[8],this.color=rt,this.ctx=tt,this.canvasGraphicsFactory=O,this.baseTransform=H}createPatternCanvas(st){const rt=this.operatorList,tt=this.bbox,O=this.xstep,H=this.ystep,ct=this.paintType,q=this.tilingType,N=this.color,at=this.canvasGraphicsFactory;(0,L.info)("TilingType: "+q);const Y=tt[0],St=tt[1],kt=tt[2],it=tt[3],Rt=L.Util.singularValueDecompose2dScale(this.matrix),Wt=L.Util.singularValueDecompose2dScale(this.baseTransform),qt=[Rt[0]*Wt[0],Rt[1]*Wt[1]],Ct=this.getSizeAndScale(O,this.ctx.canvas.width,qt[0]),Yt=this.getSizeAndScale(H,this.ctx.canvas.height,qt[1]),ne=st.cachedCanvases.getCanvas("pattern",Ct.size,Yt.size,!0),de=ne.context,_e=at.createCanvasGraphics(de);_e.groupLevel=st.groupLevel,this.setFillAndStrokeStyleToContext(_e,ct,N);let et=Y,w=St,R=kt,T=it;return Y<0&&(et=0,R+=Math.abs(Y)),St<0&&(w=0,T+=Math.abs(St)),de.translate(-(Ct.scale*et),-(Yt.scale*w)),_e.transform(Ct.scale,0,0,Yt.scale,0,0),de.save(),this.clipBbox(_e,et,w,R,T),_e.baseTransform=(0,$.getCurrentTransform)(_e.ctx),_e.executeOperatorList(rt),_e.endDrawing(),{canvas:ne.canvas,scaleX:Ct.scale,scaleY:Yt.scale,offsetX:et,offsetY:w}}getSizeAndScale(st,rt,tt){st=Math.abs(st);const O=Math.max(V.MAX_PATTERN_SIZE,rt);let H=Math.ceil(st*tt);return H>=O?H=O:tt=H/st,{scale:tt,size:H}}clipBbox(st,rt,tt,O,H){const ct=O-rt,q=H-tt;st.ctx.rect(rt,tt,ct,q),st.current.updateRectMinMax((0,$.getCurrentTransform)(st.ctx),[rt,tt,O,H]),st.clip(),st.endPath()}setFillAndStrokeStyleToContext(st,rt,tt){const O=st.ctx,H=st.current;switch(rt){case X.COLORED:const ct=this.ctx;O.fillStyle=ct.fillStyle,O.strokeStyle=ct.strokeStyle,H.fillColor=ct.fillStyle,H.strokeColor=ct.strokeStyle;break;case X.UNCOLORED:const q=L.Util.makeHexColor(tt[0],tt[1],tt[2]);O.fillStyle=q,O.strokeStyle=q,H.fillColor=q,H.strokeColor=q;break;default:throw new L.FormatError(`Unsupported paint type: ${rt}`)}}getPattern(st,rt,tt,O){let H=tt;O!==_.SHADING&&(H=L.Util.transform(H,rt.baseTransform),this.matrix&&(H=L.Util.transform(H,this.matrix)));const ct=this.createPatternCanvas(rt);let q=new DOMMatrix(H);q=q.translate(ct.offsetX,ct.offsetY),q=q.scale(1/ct.scaleX,1/ct.scaleY);const N=st.createPattern(ct.canvas,"repeat");return N.setTransform(q),N}};Pn(V,"MAX_PATTERN_SIZE",3e3);let Q=V;D.TilingPattern=Q},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.convertBlackAndWhiteToRGBA=_,D.convertToRGBA=$,D.grayToRGBA=$t;var L=_t(1);function $(pt){switch(pt.kind){case L.ImageKind.GRAYSCALE_1BPP:return _(pt);case L.ImageKind.RGB_24BPP:return ot(pt)}return null}function _({src:pt,srcPos:lt=0,dest:U,width:vt,height:gt,nonBlackColor:nt=4294967295,inverseDecode:X=!1}){const Q=L.FeatureTest.isLittleEndian?4278190080:255,[V,J]=X?[nt,Q]:[Q,nt],st=vt>>3,rt=vt&7,tt=pt.length;U=new Uint32Array(U.buffer);let O=0;for(let H=0;H<gt;H++){for(const q=lt+st;lt<q;lt++){const N=lt<tt?pt[lt]:255;U[O++]=N&128?J:V,U[O++]=N&64?J:V,U[O++]=N&32?J:V,U[O++]=N&16?J:V,U[O++]=N&8?J:V,U[O++]=N&4?J:V,U[O++]=N&2?J:V,U[O++]=N&1?J:V}if(rt===0)continue;const ct=lt<tt?pt[lt++]:255;for(let q=0;q<rt;q++)U[O++]=ct&1<<7-q?J:V}return{srcPos:lt,destPos:O}}function ot({src:pt,srcPos:lt=0,dest:U,destPos:vt=0,width:gt,height:nt}){let X=0;const Q=pt.length>>2,V=new Uint32Array(pt.buffer,lt,Q);if(L.FeatureTest.isLittleEndian){for(;X<Q-2;X+=3,vt+=4){const J=V[X],st=V[X+1],rt=V[X+2];U[vt]=J|4278190080,U[vt+1]=J>>>24|st<<8|4278190080,U[vt+2]=st>>>16|rt<<16|4278190080,U[vt+3]=rt>>>8|4278190080}for(let J=X*4,st=pt.length;J<st;J+=3)U[vt++]=pt[J]|pt[J+1]<<8|pt[J+2]<<16|4278190080}else{for(;X<Q-2;X+=3,vt+=4){const J=V[X],st=V[X+1],rt=V[X+2];U[vt]=J|255,U[vt+1]=J<<24|st>>>8|255,U[vt+2]=st<<16|rt>>>16|255,U[vt+3]=rt<<8|255}for(let J=X*4,st=pt.length;J<st;J+=3)U[vt++]=pt[J]<<24|pt[J+1]<<16|pt[J+2]<<8|255}return{srcPos:lt,destPos:vt}}function $t(pt,lt){if(L.FeatureTest.isLittleEndian)for(let U=0,vt=pt.length;U<vt;U++)lt[U]=pt[U]*65793|4278190080;else for(let U=0,vt=pt.length;U<vt;U++)lt[U]=pt[U]*16843008|255}},(x,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.GlobalWorkerOptions=void 0;const _t=Object.create(null);D.GlobalWorkerOptions=_t,_t.workerPort=null,_t.workerSrc=""},(x,D,_t)=>{var pt,gs,U,ms,gt,Hi;Object.defineProperty(D,"__esModule",{value:!0}),D.MessageHandler=void 0;var L=_t(1);const $={UNKNOWN:0,DATA:1,ERROR:2},_={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ot(X){switch(X instanceof Error||typeof X=="object"&&X!==null||(0,L.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),X.name){case"AbortException":return new L.AbortException(X.message);case"MissingPDFException":return new L.MissingPDFException(X.message);case"PasswordException":return new L.PasswordException(X.message,X.code);case"UnexpectedResponseException":return new L.UnexpectedResponseException(X.message,X.status);case"UnknownErrorException":return new L.UnknownErrorException(X.message,X.details);default:return new L.UnknownErrorException(X.message,X.toString())}}class $t{constructor(Q,V,J){mt(this,pt);mt(this,U);mt(this,gt);this.sourceName=Q,this.targetName=V,this.comObj=J,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=st=>{const rt=st.data;if(rt.targetName!==this.sourceName)return;if(rt.stream){xt(this,U,ms).call(this,rt);return}if(rt.callback){const O=rt.callbackId,H=this.callbackCapabilities[O];if(!H)throw new Error(`Cannot resolve callback ${O}`);if(delete this.callbackCapabilities[O],rt.callback===$.DATA)H.resolve(rt.data);else if(rt.callback===$.ERROR)H.reject(ot(rt.reason));else throw new Error("Unexpected callback case");return}const tt=this.actionHandler[rt.action];if(!tt)throw new Error(`Unknown action from worker: ${rt.action}`);if(rt.callbackId){const O=this.sourceName,H=rt.sourceName;new Promise(function(ct){ct(tt(rt.data))}).then(function(ct){J.postMessage({sourceName:O,targetName:H,callback:$.DATA,callbackId:rt.callbackId,data:ct})},function(ct){J.postMessage({sourceName:O,targetName:H,callback:$.ERROR,callbackId:rt.callbackId,reason:ot(ct)})});return}if(rt.streamId){xt(this,pt,gs).call(this,rt);return}tt(rt.data)},J.addEventListener("message",this._onComObjOnMessage)}on(Q,V){const J=this.actionHandler;if(J[Q])throw new Error(`There is already an actionName called "${Q}"`);J[Q]=V}send(Q,V,J){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Q,data:V},J)}sendWithPromise(Q,V,J){const st=this.callbackId++,rt=new L.PromiseCapability;this.callbackCapabilities[st]=rt;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Q,callbackId:st,data:V},J)}catch(tt){rt.reject(tt)}return rt.promise}sendWithStream(Q,V,J,st){const rt=this.streamId++,tt=this.sourceName,O=this.targetName,H=this.comObj;return new ReadableStream({start:ct=>{const q=new L.PromiseCapability;return this.streamControllers[rt]={controller:ct,startCall:q,pullCall:null,cancelCall:null,isClosed:!1},H.postMessage({sourceName:tt,targetName:O,action:Q,streamId:rt,data:V,desiredSize:ct.desiredSize},st),q.promise},pull:ct=>{const q=new L.PromiseCapability;return this.streamControllers[rt].pullCall=q,H.postMessage({sourceName:tt,targetName:O,stream:_.PULL,streamId:rt,desiredSize:ct.desiredSize}),q.promise},cancel:ct=>{(0,L.assert)(ct instanceof Error,"cancel must have a valid reason");const q=new L.PromiseCapability;return this.streamControllers[rt].cancelCall=q,this.streamControllers[rt].isClosed=!0,H.postMessage({sourceName:tt,targetName:O,stream:_.CANCEL,streamId:rt,reason:ot(ct)}),q.promise}},J)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}pt=new WeakSet,gs=function(Q){const V=Q.streamId,J=this.sourceName,st=Q.sourceName,rt=this.comObj,tt=this,O=this.actionHandler[Q.action],H={enqueue(ct,q=1,N){if(this.isCancelled)return;const at=this.desiredSize;this.desiredSize-=q,at>0&&this.desiredSize<=0&&(this.sinkCapability=new L.PromiseCapability,this.ready=this.sinkCapability.promise),rt.postMessage({sourceName:J,targetName:st,stream:_.ENQUEUE,streamId:V,chunk:ct},N)},close(){this.isCancelled||(this.isCancelled=!0,rt.postMessage({sourceName:J,targetName:st,stream:_.CLOSE,streamId:V}),delete tt.streamSinks[V])},error(ct){(0,L.assert)(ct instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,rt.postMessage({sourceName:J,targetName:st,stream:_.ERROR,streamId:V,reason:ot(ct)}))},sinkCapability:new L.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:Q.desiredSize,ready:null};H.sinkCapability.resolve(),H.ready=H.sinkCapability.promise,this.streamSinks[V]=H,new Promise(function(ct){ct(O(Q.data,H))}).then(function(){rt.postMessage({sourceName:J,targetName:st,stream:_.START_COMPLETE,streamId:V,success:!0})},function(ct){rt.postMessage({sourceName:J,targetName:st,stream:_.START_COMPLETE,streamId:V,reason:ot(ct)})})},U=new WeakSet,ms=function(Q){const V=Q.streamId,J=this.sourceName,st=Q.sourceName,rt=this.comObj,tt=this.streamControllers[V],O=this.streamSinks[V];switch(Q.stream){case _.START_COMPLETE:Q.success?tt.startCall.resolve():tt.startCall.reject(ot(Q.reason));break;case _.PULL_COMPLETE:Q.success?tt.pullCall.resolve():tt.pullCall.reject(ot(Q.reason));break;case _.PULL:if(!O){rt.postMessage({sourceName:J,targetName:st,stream:_.PULL_COMPLETE,streamId:V,success:!0});break}O.desiredSize<=0&&Q.desiredSize>0&&O.sinkCapability.resolve(),O.desiredSize=Q.desiredSize,new Promise(function(H){var ct;H((ct=O.onPull)==null?void 0:ct.call(O))}).then(function(){rt.postMessage({sourceName:J,targetName:st,stream:_.PULL_COMPLETE,streamId:V,success:!0})},function(H){rt.postMessage({sourceName:J,targetName:st,stream:_.PULL_COMPLETE,streamId:V,reason:ot(H)})});break;case _.ENQUEUE:if((0,L.assert)(tt,"enqueue should have stream controller"),tt.isClosed)break;tt.controller.enqueue(Q.chunk);break;case _.CLOSE:if((0,L.assert)(tt,"close should have stream controller"),tt.isClosed)break;tt.isClosed=!0,tt.controller.close(),xt(this,gt,Hi).call(this,tt,V);break;case _.ERROR:(0,L.assert)(tt,"error should have stream controller"),tt.controller.error(ot(Q.reason)),xt(this,gt,Hi).call(this,tt,V);break;case _.CANCEL_COMPLETE:Q.success?tt.cancelCall.resolve():tt.cancelCall.reject(ot(Q.reason)),xt(this,gt,Hi).call(this,tt,V);break;case _.CANCEL:if(!O)break;new Promise(function(H){var ct;H((ct=O.onCancel)==null?void 0:ct.call(O,ot(Q.reason)))}).then(function(){rt.postMessage({sourceName:J,targetName:st,stream:_.CANCEL_COMPLETE,streamId:V,success:!0})},function(H){rt.postMessage({sourceName:J,targetName:st,stream:_.CANCEL_COMPLETE,streamId:V,reason:ot(H)})}),O.sinkCapability.reject(ot(Q.reason)),O.isCancelled=!0,delete this.streamSinks[V];break;default:throw new Error("Unexpected stream case")}},gt=new WeakSet,Hi=async function(Q,V){var J,st,rt;await Promise.allSettled([(J=Q.startCall)==null?void 0:J.promise,(st=Q.pullCall)==null?void 0:st.promise,(rt=Q.cancelCall)==null?void 0:rt.promise]),delete this.streamControllers[V]},D.MessageHandler=$t},(x,D,_t)=>{var _,ot;Object.defineProperty(D,"__esModule",{value:!0}),D.Metadata=void 0;var L=_t(1);class ${constructor({parsedData:pt,rawData:lt}){mt(this,_,void 0);mt(this,ot,void 0);Ut(this,_,pt),Ut(this,ot,lt)}getRaw(){return y(this,ot)}get(pt){return y(this,_).get(pt)??null}getAll(){return(0,L.objectFromMap)(y(this,_))}has(pt){return y(this,_).has(pt)}}_=new WeakMap,ot=new WeakMap,D.Metadata=$},(x,D,_t)=>{var pt,lt,U,vt,gt,nt,wr;Object.defineProperty(D,"__esModule",{value:!0}),D.OptionalContentConfig=void 0;var L=_t(1),$=_t(8);const _=Symbol("INTERNAL");class ot{constructor(V,J){mt(this,pt,!0);this.name=V,this.intent=J}get visible(){return y(this,pt)}_setVisible(V,J){V!==_&&(0,L.unreachable)("Internal method `_setVisible` called."),Ut(this,pt,J)}}pt=new WeakMap;class $t{constructor(V){mt(this,nt);mt(this,lt,null);mt(this,U,new Map);mt(this,vt,null);mt(this,gt,null);if(this.name=null,this.creator=null,V!==null){this.name=V.name,this.creator=V.creator,Ut(this,gt,V.order);for(const J of V.groups)y(this,U).set(J.id,new ot(J.name,J.intent));if(V.baseState==="OFF")for(const J of y(this,U).values())J._setVisible(_,!1);for(const J of V.on)y(this,U).get(J)._setVisible(_,!0);for(const J of V.off)y(this,U).get(J)._setVisible(_,!1);Ut(this,vt,this.getHash())}}isVisible(V){if(y(this,U).size===0)return!0;if(!V)return(0,L.warn)("Optional content group not defined."),!0;if(V.type==="OCG")return y(this,U).has(V.id)?y(this,U).get(V.id).visible:((0,L.warn)(`Optional content group not found: ${V.id}`),!0);if(V.type==="OCMD"){if(V.expression)return xt(this,nt,wr).call(this,V.expression);if(!V.policy||V.policy==="AnyOn"){for(const J of V.ids){if(!y(this,U).has(J))return(0,L.warn)(`Optional content group not found: ${J}`),!0;if(y(this,U).get(J).visible)return!0}return!1}else if(V.policy==="AllOn"){for(const J of V.ids){if(!y(this,U).has(J))return(0,L.warn)(`Optional content group not found: ${J}`),!0;if(!y(this,U).get(J).visible)return!1}return!0}else if(V.policy==="AnyOff"){for(const J of V.ids){if(!y(this,U).has(J))return(0,L.warn)(`Optional content group not found: ${J}`),!0;if(!y(this,U).get(J).visible)return!0}return!1}else if(V.policy==="AllOff"){for(const J of V.ids){if(!y(this,U).has(J))return(0,L.warn)(`Optional content group not found: ${J}`),!0;if(y(this,U).get(J).visible)return!1}return!0}return(0,L.warn)(`Unknown optional content policy ${V.policy}.`),!0}return(0,L.warn)(`Unknown group type ${V.type}.`),!0}setVisibility(V,J=!0){if(!y(this,U).has(V)){(0,L.warn)(`Optional content group not found: ${V}`);return}y(this,U).get(V)._setVisible(_,!!J),Ut(this,lt,null)}get hasInitialVisibility(){return y(this,vt)===null||this.getHash()===y(this,vt)}getOrder(){return y(this,U).size?y(this,gt)?y(this,gt).slice():[...y(this,U).keys()]:null}getGroups(){return y(this,U).size>0?(0,L.objectFromMap)(y(this,U)):null}getGroup(V){return y(this,U).get(V)||null}getHash(){if(y(this,lt)!==null)return y(this,lt);const V=new $.MurmurHash3_64;for(const[J,st]of y(this,U))V.update(`${J}:${st.visible}`);return Ut(this,lt,V.hexdigest())}}lt=new WeakMap,U=new WeakMap,vt=new WeakMap,gt=new WeakMap,nt=new WeakSet,wr=function(V){const J=V.length;if(J<2)return!0;const st=V[0];for(let rt=1;rt<J;rt++){const tt=V[rt];let O;if(Array.isArray(tt))O=xt(this,nt,wr).call(this,tt);else if(y(this,U).has(tt))O=y(this,U).get(tt).visible;else return(0,L.warn)(`Optional content group not found: ${tt}`),!0;switch(st){case"And":if(!O)return!1;break;case"Or":if(O)return!0;break;case"Not":return!O;default:return!0}}return st==="And"},D.OptionalContentConfig=$t},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.PDFDataTransportStream=void 0;var L=_t(1),$=_t(6);class _{constructor({length:lt,initialData:U,progressiveDone:vt=!1,contentDispositionFilename:gt=null,disableRange:nt=!1,disableStream:X=!1},Q){if((0,L.assert)(Q,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=vt,this._contentDispositionFilename=gt,(U==null?void 0:U.length)>0){const V=U instanceof Uint8Array&&U.byteLength===U.buffer.byteLength?U.buffer:new Uint8Array(U).buffer;this._queuedChunks.push(V)}this._pdfDataRangeTransport=Q,this._isStreamingSupported=!X,this._isRangeSupported=!nt,this._contentLength=lt,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((V,J)=>{this._onReceiveData({begin:V,chunk:J})}),this._pdfDataRangeTransport.addProgressListener((V,J)=>{this._onProgress({loaded:V,total:J})}),this._pdfDataRangeTransport.addProgressiveReadListener(V=>{this._onReceiveData({chunk:V})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:lt,chunk:U}){const vt=U instanceof Uint8Array&&U.byteLength===U.buffer.byteLength?U.buffer:new Uint8Array(U).buffer;if(lt===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(vt):this._queuedChunks.push(vt);else{const gt=this._rangeReaders.some(function(nt){return nt._begin!==lt?!1:(nt._enqueue(vt),!0)});(0,L.assert)(gt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var lt;return((lt=this._fullRequestReader)==null?void 0:lt._loaded)??0}_onProgress(lt){var U,vt,gt,nt;lt.total===void 0?(vt=(U=this._rangeReaders[0])==null?void 0:U.onProgress)==null||vt.call(U,{loaded:lt.loaded}):(nt=(gt=this._fullRequestReader)==null?void 0:gt.onProgress)==null||nt.call(gt,{loaded:lt.loaded,total:lt.total})}_onProgressiveDone(){var lt;(lt=this._fullRequestReader)==null||lt.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(lt){const U=this._rangeReaders.indexOf(lt);U>=0&&this._rangeReaders.splice(U,1)}getFullReader(){(0,L.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const lt=this._queuedChunks;return this._queuedChunks=null,new ot(this,lt,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(lt,U){if(U<=this._progressiveDataLength)return null;const vt=new $t(this,lt,U);return this._pdfDataRangeTransport.requestDataRange(lt,U),this._rangeReaders.push(vt),vt}cancelAllRequests(lt){var U;(U=this._fullRequestReader)==null||U.cancel(lt);for(const vt of this._rangeReaders.slice(0))vt.cancel(lt);this._pdfDataRangeTransport.abort()}}D.PDFDataTransportStream=_;class ot{constructor(lt,U,vt=!1,gt=null){this._stream=lt,this._done=vt||!1,this._filename=(0,$.isPdfFile)(gt)?gt:null,this._queuedChunks=U||[],this._loaded=0;for(const nt of this._queuedChunks)this._loaded+=nt.byteLength;this._requests=[],this._headersReady=Promise.resolve(),lt._fullRequestReader=this,this.onProgress=null}_enqueue(lt){this._done||(this._requests.length>0?this._requests.shift().resolve({value:lt,done:!1}):this._queuedChunks.push(lt),this._loaded+=lt.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const lt=new L.PromiseCapability;return this._requests.push(lt),lt.promise}cancel(lt){this._done=!0;for(const U of this._requests)U.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class $t{constructor(lt,U,vt){this._stream=lt,this._begin=U,this._end=vt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(lt){if(!this._done){if(this._requests.length===0)this._queuedChunk=lt;else{this._requests.shift().resolve({value:lt,done:!1});for(const vt of this._requests)vt.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const U=this._queuedChunk;return this._queuedChunk=null,{value:U,done:!1}}if(this._done)return{value:void 0,done:!0};const lt=new L.PromiseCapability;return this._requests.push(lt),lt.promise}cancel(lt){this._done=!0;for(const U of this._requests)U.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.PDFFetchStream=void 0;var L=_t(1),$=_t(20);function _(vt,gt,nt){return{method:"GET",headers:vt,signal:nt.signal,mode:"cors",credentials:gt?"include":"same-origin",redirect:"follow"}}function ot(vt){const gt=new Headers;for(const nt in vt){const X=vt[nt];X!==void 0&&gt.append(nt,X)}return gt}function $t(vt){return vt instanceof Uint8Array?vt.buffer:vt instanceof ArrayBuffer?vt:((0,L.warn)(`getArrayBuffer - unexpected data format: ${vt}`),new Uint8Array(vt).buffer)}class pt{constructor(gt){this.source=gt,this.isHttp=/^https?:/i.test(gt.url),this.httpHeaders=this.isHttp&&gt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var gt;return((gt=this._fullRequestReader)==null?void 0:gt._loaded)??0}getFullReader(){return(0,L.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new lt(this),this._fullRequestReader}getRangeReader(gt,nt){if(nt<=this._progressiveDataLength)return null;const X=new U(this,gt,nt);return this._rangeRequestReaders.push(X),X}cancelAllRequests(gt){var nt;(nt=this._fullRequestReader)==null||nt.cancel(gt);for(const X of this._rangeRequestReaders.slice(0))X.cancel(gt)}}D.PDFFetchStream=pt;class lt{constructor(gt){this._stream=gt,this._reader=null,this._loaded=0,this._filename=null;const nt=gt.source;this._withCredentials=nt.withCredentials||!1,this._contentLength=nt.length,this._headersCapability=new L.PromiseCapability,this._disableRange=nt.disableRange||!1,this._rangeChunkSize=nt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!nt.disableStream,this._isRangeSupported=!nt.disableRange,this._headers=ot(this._stream.httpHeaders);const X=nt.url;fetch(X,_(this._headers,this._withCredentials,this._abortController)).then(Q=>{if(!(0,$.validateResponseStatus)(Q.status))throw(0,$.createResponseStatusError)(Q.status,X);this._reader=Q.body.getReader(),this._headersCapability.resolve();const V=rt=>Q.headers.get(rt),{allowRangeRequests:J,suggestedLength:st}=(0,$.validateRangeRequestCapabilities)({getResponseHeader:V,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=J,this._contentLength=st||this._contentLength,this._filename=(0,$.extractFilenameFromHeader)(V),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new L.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var X;await this._headersCapability.promise;const{value:gt,done:nt}=await this._reader.read();return nt?{value:gt,done:nt}:(this._loaded+=gt.byteLength,(X=this.onProgress)==null||X.call(this,{loaded:this._loaded,total:this._contentLength}),{value:$t(gt),done:!1})}cancel(gt){var nt;(nt=this._reader)==null||nt.cancel(gt),this._abortController.abort()}}class U{constructor(gt,nt,X){this._stream=gt,this._reader=null,this._loaded=0;const Q=gt.source;this._withCredentials=Q.withCredentials||!1,this._readCapability=new L.PromiseCapability,this._isStreamingSupported=!Q.disableStream,this._abortController=new AbortController,this._headers=ot(this._stream.httpHeaders),this._headers.append("Range",`bytes=${nt}-${X-1}`);const V=Q.url;fetch(V,_(this._headers,this._withCredentials,this._abortController)).then(J=>{if(!(0,$.validateResponseStatus)(J.status))throw(0,$.createResponseStatusError)(J.status,V);this._readCapability.resolve(),this._reader=J.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var X;await this._readCapability.promise;const{value:gt,done:nt}=await this._reader.read();return nt?{value:gt,done:nt}:(this._loaded+=gt.byteLength,(X=this.onProgress)==null||X.call(this,{loaded:this._loaded}),{value:$t(gt),done:!1})}cancel(gt){var nt;(nt=this._reader)==null||nt.cancel(gt),this._abortController.abort()}}},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.createResponseStatusError=pt,D.extractFilenameFromHeader=$t,D.validateRangeRequestCapabilities=ot,D.validateResponseStatus=lt;var L=_t(1),$=_t(21),_=_t(6);function ot({getResponseHeader:U,isHttp:vt,rangeChunkSize:gt,disableRange:nt}){const X={allowRangeRequests:!1,suggestedLength:void 0},Q=parseInt(U("Content-Length"),10);return!Number.isInteger(Q)||(X.suggestedLength=Q,Q<=2*gt)||nt||!vt||U("Accept-Ranges")!=="bytes"||(U("Content-Encoding")||"identity")!=="identity"||(X.allowRangeRequests=!0),X}function $t(U){const vt=U("Content-Disposition");if(vt){let gt=(0,$.getFilenameFromContentDispositionHeader)(vt);if(gt.includes("%"))try{gt=decodeURIComponent(gt)}catch{}if((0,_.isPdfFile)(gt))return gt}return null}function pt(U,vt){return U===404||U===0&&vt.startsWith("file:")?new L.MissingPDFException('Missing PDF "'+vt+'".'):new L.UnexpectedResponseException(`Unexpected server response (${U}) while retrieving PDF "${vt}".`,U)}function lt(U){return U===200||U===206}},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.getFilenameFromContentDispositionHeader=$;var L=_t(1);function $(_){let ot=!0,$t=pt("filename\\*","i").exec(_);if($t){$t=$t[1];let Q=gt($t);return Q=unescape(Q),Q=nt(Q),Q=X(Q),U(Q)}if($t=vt(_),$t){const Q=X($t);return U(Q)}if($t=pt("filename","i").exec(_),$t){$t=$t[1];let Q=gt($t);return Q=X(Q),U(Q)}function pt(Q,V){return new RegExp("(?:^|;)\\s*"+Q+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',V)}function lt(Q,V){if(Q){if(!/^[\x00-\xFF]+$/.test(V))return V;try{const J=new TextDecoder(Q,{fatal:!0}),st=(0,L.stringToBytes)(V);V=J.decode(st),ot=!1}catch{}}return V}function U(Q){return ot&&/[\x80-\xff]/.test(Q)&&(Q=lt("utf-8",Q),ot&&(Q=lt("iso-8859-1",Q))),Q}function vt(Q){const V=[];let J;const st=pt("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(J=st.exec(Q))!==null;){let[,tt,O,H]=J;if(tt=parseInt(tt,10),tt in V){if(tt===0)break;continue}V[tt]=[O,H]}const rt=[];for(let tt=0;tt<V.length&&tt in V;++tt){let[O,H]=V[tt];H=gt(H),O&&(H=unescape(H),tt===0&&(H=nt(H))),rt.push(H)}return rt.join("")}function gt(Q){if(Q.startsWith('"')){const V=Q.slice(1).split('\\"');for(let J=0;J<V.length;++J){const st=V[J].indexOf('"');st!==-1&&(V[J]=V[J].slice(0,st),V.length=J+1),V[J]=V[J].replaceAll(/\\(.)/g,"$1")}Q=V.join('"')}return Q}function nt(Q){const V=Q.indexOf("'");if(V===-1)return Q;const J=Q.slice(0,V),rt=Q.slice(V+1).replace(/^[^']*'/,"");return lt(J,rt)}function X(Q){return!Q.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Q)?Q:Q.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(V,J,st,rt){if(st==="q"||st==="Q")return rt=rt.replaceAll("_"," "),rt=rt.replaceAll(/=([0-9a-fA-F]{2})/g,function(tt,O){return String.fromCharCode(parseInt(O,16))}),lt(J,rt);try{rt=atob(rt)}catch{}return lt(J,rt)})}return""}},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.PDFNetworkStream=void 0;var L=_t(1),$=_t(20);const _=200,ot=206;function $t(gt){const nt=gt.response;return typeof nt!="string"?nt:(0,L.stringToBytes)(nt).buffer}class pt{constructor(nt,X={}){this.url=nt,this.isHttp=/^https?:/i.test(nt),this.httpHeaders=this.isHttp&&X.httpHeaders||Object.create(null),this.withCredentials=X.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(nt,X,Q){const V={begin:nt,end:X};for(const J in Q)V[J]=Q[J];return this.request(V)}requestFull(nt){return this.request(nt)}request(nt){const X=new XMLHttpRequest,Q=this.currXhrId++,V=this.pendingRequests[Q]={xhr:X};X.open("GET",this.url),X.withCredentials=this.withCredentials;for(const J in this.httpHeaders){const st=this.httpHeaders[J];st!==void 0&&X.setRequestHeader(J,st)}return this.isHttp&&"begin"in nt&&"end"in nt?(X.setRequestHeader("Range",`bytes=${nt.begin}-${nt.end-1}`),V.expectedStatus=ot):V.expectedStatus=_,X.responseType="arraybuffer",nt.onError&&(X.onerror=function(J){nt.onError(X.status)}),X.onreadystatechange=this.onStateChange.bind(this,Q),X.onprogress=this.onProgress.bind(this,Q),V.onHeadersReceived=nt.onHeadersReceived,V.onDone=nt.onDone,V.onError=nt.onError,V.onProgress=nt.onProgress,X.send(null),Q}onProgress(nt,X){var V;const Q=this.pendingRequests[nt];Q&&((V=Q.onProgress)==null||V.call(Q,X))}onStateChange(nt,X){var tt,O,H;const Q=this.pendingRequests[nt];if(!Q)return;const V=Q.xhr;if(V.readyState>=2&&Q.onHeadersReceived&&(Q.onHeadersReceived(),delete Q.onHeadersReceived),V.readyState!==4||!(nt in this.pendingRequests))return;if(delete this.pendingRequests[nt],V.status===0&&this.isHttp){(tt=Q.onError)==null||tt.call(Q,V.status);return}const J=V.status||_;if(!(J===_&&Q.expectedStatus===ot)&&J!==Q.expectedStatus){(O=Q.onError)==null||O.call(Q,V.status);return}const rt=$t(V);if(J===ot){const ct=V.getResponseHeader("Content-Range"),q=/bytes (\d+)-(\d+)\/(\d+)/.exec(ct);Q.onDone({begin:parseInt(q[1],10),chunk:rt})}else rt?Q.onDone({begin:0,chunk:rt}):(H=Q.onError)==null||H.call(Q,V.status)}getRequestXhr(nt){return this.pendingRequests[nt].xhr}isPendingRequest(nt){return nt in this.pendingRequests}abortRequest(nt){const X=this.pendingRequests[nt].xhr;delete this.pendingRequests[nt],X.abort()}}class lt{constructor(nt){this._source=nt,this._manager=new pt(nt.url,{httpHeaders:nt.httpHeaders,withCredentials:nt.withCredentials}),this._rangeChunkSize=nt.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(nt){const X=this._rangeRequestReaders.indexOf(nt);X>=0&&this._rangeRequestReaders.splice(X,1)}getFullReader(){return(0,L.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new U(this._manager,this._source),this._fullRequestReader}getRangeReader(nt,X){const Q=new vt(this._manager,nt,X);return Q.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(Q),Q}cancelAllRequests(nt){var X;(X=this._fullRequestReader)==null||X.cancel(nt);for(const Q of this._rangeRequestReaders.slice(0))Q.cancel(nt)}}D.PDFNetworkStream=lt;class U{constructor(nt,X){this._manager=nt;const Q={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=X.url,this._fullRequestId=nt.requestFull(Q),this._headersReceivedCapability=new L.PromiseCapability,this._disableRange=X.disableRange||!1,this._contentLength=X.length,this._rangeChunkSize=X.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const nt=this._fullRequestId,X=this._manager.getRequestXhr(nt),Q=st=>X.getResponseHeader(st),{allowRangeRequests:V,suggestedLength:J}=(0,$.validateRangeRequestCapabilities)({getResponseHeader:Q,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});V&&(this._isRangeSupported=!0),this._contentLength=J||this._contentLength,this._filename=(0,$.extractFilenameFromHeader)(Q),this._isRangeSupported&&this._manager.abortRequest(nt),this._headersReceivedCapability.resolve()}_onDone(nt){if(nt&&(this._requests.length>0?this._requests.shift().resolve({value:nt.chunk,done:!1}):this._cachedChunks.push(nt.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const X of this._requests)X.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(nt){this._storedError=(0,$.createResponseStatusError)(nt,this._url),this._headersReceivedCapability.reject(this._storedError);for(const X of this._requests)X.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(nt){var X;(X=this.onProgress)==null||X.call(this,{loaded:nt.loaded,total:nt.lengthComputable?nt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const nt=new L.PromiseCapability;return this._requests.push(nt),nt.promise}cancel(nt){this._done=!0,this._headersReceivedCapability.reject(nt);for(const X of this._requests)X.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class vt{constructor(nt,X,Q){this._manager=nt;const V={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=nt.url,this._requestId=nt.requestRange(X,Q,V),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var nt;(nt=this.onClosed)==null||nt.call(this,this)}_onDone(nt){const X=nt.chunk;this._requests.length>0?this._requests.shift().resolve({value:X,done:!1}):this._queuedChunk=X,this._done=!0;for(const Q of this._requests)Q.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(nt){this._storedError=(0,$.createResponseStatusError)(nt,this._url);for(const X of this._requests)X.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(nt){var X;this.isStreamingSupported||(X=this.onProgress)==null||X.call(this,{loaded:nt.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const X=this._queuedChunk;return this._queuedChunk=null,{value:X,done:!1}}if(this._done)return{value:void 0,done:!0};const nt=new L.PromiseCapability;return this._requests.push(nt),nt.promise}cancel(nt){this._done=!0;for(const X of this._requests)X.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.PDFNodeStream=void 0;var L=_t(1),$=_t(20);const _=/^file:\/\/\/[a-zA-Z]:\//;function ot(Q){const V=require$$5,J=V.parse(Q);return J.protocol==="file:"||J.host?J:/^[a-z]:[/\\]/i.test(Q)?V.parse(`file:///${Q}`):(J.host||(J.protocol="file:"),J)}class $t{constructor(V){this.source=V,this.url=ot(V.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&V.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var V;return((V=this._fullRequestReader)==null?void 0:V._loaded)??0}getFullReader(){return(0,L.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new nt(this):new vt(this),this._fullRequestReader}getRangeReader(V,J){if(J<=this._progressiveDataLength)return null;const st=this.isFsUrl?new X(this,V,J):new gt(this,V,J);return this._rangeRequestReaders.push(st),st}cancelAllRequests(V){var J;(J=this._fullRequestReader)==null||J.cancel(V);for(const st of this._rangeRequestReaders.slice(0))st.cancel(V)}}D.PDFNodeStream=$t;class pt{constructor(V){this._url=V.url,this._done=!1,this._storedError=null,this.onProgress=null;const J=V.source;this._contentLength=J.length,this._loaded=0,this._filename=null,this._disableRange=J.disableRange||!1,this._rangeChunkSize=J.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!J.disableStream,this._isRangeSupported=!J.disableRange,this._readableStream=null,this._readCapability=new L.PromiseCapability,this._headersCapability=new L.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var st;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const V=this._readableStream.read();return V===null?(this._readCapability=new L.PromiseCapability,this.read()):(this._loaded+=V.length,(st=this.onProgress)==null||st.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(V).buffer,done:!1})}cancel(V){if(!this._readableStream){this._error(V);return}this._readableStream.destroy(V)}_error(V){this._storedError=V,this._readCapability.resolve()}_setReadableStream(V){this._readableStream=V,V.on("readable",()=>{this._readCapability.resolve()}),V.on("end",()=>{V.destroy(),this._done=!0,this._readCapability.resolve()}),V.on("error",J=>{this._error(J)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new L.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class lt{constructor(V){this._url=V.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new L.PromiseCapability;const J=V.source;this._isStreamingSupported=!J.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var st;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const V=this._readableStream.read();return V===null?(this._readCapability=new L.PromiseCapability,this.read()):(this._loaded+=V.length,(st=this.onProgress)==null||st.call(this,{loaded:this._loaded}),{value:new Uint8Array(V).buffer,done:!1})}cancel(V){if(!this._readableStream){this._error(V);return}this._readableStream.destroy(V)}_error(V){this._storedError=V,this._readCapability.resolve()}_setReadableStream(V){this._readableStream=V,V.on("readable",()=>{this._readCapability.resolve()}),V.on("end",()=>{V.destroy(),this._done=!0,this._readCapability.resolve()}),V.on("error",J=>{this._error(J)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function U(Q,V){return{protocol:Q.protocol,auth:Q.auth,host:Q.hostname,port:Q.port,path:Q.path,method:"GET",headers:V}}class vt extends pt{constructor(V){super(V);const J=st=>{if(st.statusCode===404){const H=new L.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=H,this._headersCapability.reject(H);return}this._headersCapability.resolve(),this._setReadableStream(st);const rt=H=>this._readableStream.headers[H.toLowerCase()],{allowRangeRequests:tt,suggestedLength:O}=(0,$.validateRangeRequestCapabilities)({getResponseHeader:rt,isHttp:V.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=tt,this._contentLength=O||this._contentLength,this._filename=(0,$.extractFilenameFromHeader)(rt)};if(this._request=null,this._url.protocol==="http:"){const st=require$$5;this._request=st.request(U(this._url,V.httpHeaders),J)}else{const st=require$$5;this._request=st.request(U(this._url,V.httpHeaders),J)}this._request.on("error",st=>{this._storedError=st,this._headersCapability.reject(st)}),this._request.end()}}class gt extends lt{constructor(V,J,st){super(V),this._httpHeaders={};for(const tt in V.httpHeaders){const O=V.httpHeaders[tt];O!==void 0&&(this._httpHeaders[tt]=O)}this._httpHeaders.Range=`bytes=${J}-${st-1}`;const rt=tt=>{if(tt.statusCode===404){const O=new L.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=O;return}this._setReadableStream(tt)};if(this._request=null,this._url.protocol==="http:"){const tt=require$$5;this._request=tt.request(U(this._url,this._httpHeaders),rt)}else{const tt=require$$5;this._request=tt.request(U(this._url,this._httpHeaders),rt)}this._request.on("error",tt=>{this._storedError=tt}),this._request.end()}}class nt extends pt{constructor(V){super(V);let J=decodeURIComponent(this._url.path);_.test(this._url.href)&&(J=J.replace(/^\//,""));const st=require$$5;st.lstat(J,(rt,tt)=>{if(rt){rt.code==="ENOENT"&&(rt=new L.MissingPDFException(`Missing PDF "${J}".`)),this._storedError=rt,this._headersCapability.reject(rt);return}this._contentLength=tt.size,this._setReadableStream(st.createReadStream(J)),this._headersCapability.resolve()})}}class X extends lt{constructor(V,J,st){super(V);let rt=decodeURIComponent(this._url.path);_.test(this._url.href)&&(rt=rt.replace(/^\//,""));const tt=require$$5;this._setReadableStream(tt.createReadStream(rt,{start:J,end:st-1}))}}},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.SVGGraphics=void 0;var L=_t(6),$=_t(1);const _={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},ot="http://www.w3.org/XML/1998/namespace",$t="http://www.w3.org/1999/xlink",pt=["butt","round","square"],lt=["miter","round","bevel"],U=function(tt,O="",H=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!H)return URL.createObjectURL(new Blob([tt],{type:O}));const ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let q=`data:${O};base64,`;for(let N=0,at=tt.length;N<at;N+=3){const Y=tt[N]&255,St=tt[N+1]&255,kt=tt[N+2]&255,it=Y>>2,Rt=(Y&3)<<4|St>>4,Wt=N+1<at?(St&15)<<2|kt>>6:64,qt=N+2<at?kt&63:64;q+=ct[it]+ct[Rt]+ct[Wt]+ct[qt]}return q},vt=function(){const tt=new Uint8Array([137,80,78,71,13,10,26,10]),O=12,H=new Int32Array(256);for(let kt=0;kt<256;kt++){let it=kt;for(let Rt=0;Rt<8;Rt++)it=it&1?3988292384^it>>1&2147483647:it>>1&2147483647;H[kt]=it}function ct(kt,it,Rt){let Wt=-1;for(let qt=it;qt<Rt;qt++){const Ct=(Wt^kt[qt])&255,Yt=H[Ct];Wt=Wt>>>8^Yt}return Wt^-1}function q(kt,it,Rt,Wt){let qt=Wt;const Ct=it.length;Rt[qt]=Ct>>24&255,Rt[qt+1]=Ct>>16&255,Rt[qt+2]=Ct>>8&255,Rt[qt+3]=Ct&255,qt+=4,Rt[qt]=kt.charCodeAt(0)&255,Rt[qt+1]=kt.charCodeAt(1)&255,Rt[qt+2]=kt.charCodeAt(2)&255,Rt[qt+3]=kt.charCodeAt(3)&255,qt+=4,Rt.set(it,qt),qt+=it.length;const Yt=ct(Rt,Wt+4,qt);Rt[qt]=Yt>>24&255,Rt[qt+1]=Yt>>16&255,Rt[qt+2]=Yt>>8&255,Rt[qt+3]=Yt&255}function N(kt,it,Rt){let Wt=1,qt=0;for(let Ct=it;Ct<Rt;++Ct)Wt=(Wt+(kt[Ct]&255))%65521,qt=(qt+Wt)%65521;return qt<<16|Wt}function at(kt){if(!$.isNodeJS)return Y(kt);try{const it=parseInt(process.versions.node)>=8?kt:Buffer.from(kt),Rt=require$$5.deflateSync(it,{level:9});return Rt instanceof Uint8Array?Rt:new Uint8Array(Rt)}catch(it){(0,$.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+it)}return Y(kt)}function Y(kt){let it=kt.length;const Rt=65535,Wt=Math.ceil(it/Rt),qt=new Uint8Array(2+it+Wt*5+4);let Ct=0;qt[Ct++]=120,qt[Ct++]=156;let Yt=0;for(;it>Rt;)qt[Ct++]=0,qt[Ct++]=255,qt[Ct++]=255,qt[Ct++]=0,qt[Ct++]=0,qt.set(kt.subarray(Yt,Yt+Rt),Ct),Ct+=Rt,Yt+=Rt,it-=Rt;qt[Ct++]=1,qt[Ct++]=it&255,qt[Ct++]=it>>8&255,qt[Ct++]=~it&65535&255,qt[Ct++]=(~it&65535)>>8&255,qt.set(kt.subarray(Yt),Ct),Ct+=kt.length-Yt;const ne=N(kt,0,kt.length);return qt[Ct++]=ne>>24&255,qt[Ct++]=ne>>16&255,qt[Ct++]=ne>>8&255,qt[Ct++]=ne&255,qt}function St(kt,it,Rt,Wt){const qt=kt.width,Ct=kt.height;let Yt,ne,de;const _e=kt.data;switch(it){case $.ImageKind.GRAYSCALE_1BPP:ne=0,Yt=1,de=qt+7>>3;break;case $.ImageKind.RGB_24BPP:ne=2,Yt=8,de=qt*3;break;case $.ImageKind.RGBA_32BPP:ne=6,Yt=8,de=qt*4;break;default:throw new Error("invalid format")}const et=new Uint8Array((1+de)*Ct);let w=0,R=0;for(let yt=0;yt<Ct;++yt)et[w++]=0,et.set(_e.subarray(R,R+de),w),R+=de,w+=de;if(it===$.ImageKind.GRAYSCALE_1BPP&&Wt){w=0;for(let yt=0;yt<Ct;yt++){w++;for(let zt=0;zt<de;zt++)et[w++]^=255}}const T=new Uint8Array([qt>>24&255,qt>>16&255,qt>>8&255,qt&255,Ct>>24&255,Ct>>16&255,Ct>>8&255,Ct&255,Yt,ne,0,0,0]),B=at(et),j=tt.length+O*3+T.length+B.length,K=new Uint8Array(j);let ut=0;return K.set(tt,ut),ut+=tt.length,q("IHDR",T,K,ut),ut+=O+T.length,q("IDATA",B,K,ut),ut+=O+B.length,q("IEND",new Uint8Array(0),K,ut),U(K,"image/png",Rt)}return function(it,Rt,Wt){const qt=it.kind===void 0?$.ImageKind.GRAYSCALE_1BPP:it.kind;return St(it,qt,Rt,Wt)}}();class gt{constructor(){this.fontSizeScale=1,this.fontWeight=_.fontWeight,this.fontSize=0,this.textMatrix=$.IDENTITY_MATRIX,this.fontMatrix=$.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=$.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=_.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(O,H){this.x=O,this.y=H}}function nt(tt){let O=[];const H=[];for(const ct of tt){if(ct.fn==="save"){O.push({fnId:92,fn:"group",items:[]}),H.push(O),O=O.at(-1).items;continue}ct.fn==="restore"?O=H.pop():O.push(ct)}return O}function X(tt){if(Number.isInteger(tt))return tt.toString();const O=tt.toFixed(10);let H=O.length-1;if(O[H]!=="0")return O;do H--;while(O[H]==="0");return O.substring(0,O[H]==="."?H:H+1)}function Q(tt){if(tt[4]===0&&tt[5]===0){if(tt[1]===0&&tt[2]===0)return tt[0]===1&&tt[3]===1?"":`scale(${X(tt[0])} ${X(tt[3])})`;if(tt[0]===tt[3]&&tt[1]===-tt[2]){const O=Math.acos(tt[0])*180/Math.PI;return`rotate(${X(O)})`}}else if(tt[0]===1&&tt[1]===0&&tt[2]===0&&tt[3]===1)return`translate(${X(tt[4])} ${X(tt[5])})`;return`matrix(${X(tt[0])} ${X(tt[1])} ${X(tt[2])} ${X(tt[3])} ${X(tt[4])} ${X(tt[5])})`}let V=0,J=0,st=0;class rt{constructor(O,H,ct=!1){(0,L.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new L.DOMSVGFactory,this.current=new gt,this.transformMatrix=$.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=O,this.objs=H,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!ct,this._operatorIdMapping=[];for(const q in $.OPS)this._operatorIdMapping[$.OPS[q]]=q}getObject(O,H=null){return typeof O=="string"?O.startsWith("g_")?this.commonObjs.get(O):this.objs.get(O):H}save(){this.transformStack.push(this.transformMatrix);const O=this.current;this.extraStack.push(O),this.current=O.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(O){this.save(),this.executeOpTree(O),this.restore()}loadDependencies(O){const H=O.fnArray,ct=O.argsArray;for(let q=0,N=H.length;q<N;q++)if(H[q]===$.OPS.dependency)for(const at of ct[q]){const Y=at.startsWith("g_")?this.commonObjs:this.objs,St=new Promise(kt=>{Y.get(at,kt)});this.current.dependencies.push(St)}return Promise.all(this.current.dependencies)}transform(O,H,ct,q,N,at){const Y=[O,H,ct,q,N,at];this.transformMatrix=$.Util.transform(this.transformMatrix,Y),this.tgrp=null}getSVG(O,H){this.viewport=H;const ct=this._initialize(H);return this.loadDependencies(O).then(()=>(this.transformMatrix=$.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(O)),ct))}convertOpList(O){const H=this._operatorIdMapping,ct=O.argsArray,q=O.fnArray,N=[];for(let at=0,Y=q.length;at<Y;at++){const St=q[at];N.push({fnId:St,fn:H[St],args:ct[at]})}return nt(N)}executeOpTree(O){for(const H of O){const ct=H.fn,q=H.fnId,N=H.args;switch(q|0){case $.OPS.beginText:this.beginText();break;case $.OPS.dependency:break;case $.OPS.setLeading:this.setLeading(N);break;case $.OPS.setLeadingMoveText:this.setLeadingMoveText(N[0],N[1]);break;case $.OPS.setFont:this.setFont(N);break;case $.OPS.showText:this.showText(N[0]);break;case $.OPS.showSpacedText:this.showText(N[0]);break;case $.OPS.endText:this.endText();break;case $.OPS.moveText:this.moveText(N[0],N[1]);break;case $.OPS.setCharSpacing:this.setCharSpacing(N[0]);break;case $.OPS.setWordSpacing:this.setWordSpacing(N[0]);break;case $.OPS.setHScale:this.setHScale(N[0]);break;case $.OPS.setTextMatrix:this.setTextMatrix(N[0],N[1],N[2],N[3],N[4],N[5]);break;case $.OPS.setTextRise:this.setTextRise(N[0]);break;case $.OPS.setTextRenderingMode:this.setTextRenderingMode(N[0]);break;case $.OPS.setLineWidth:this.setLineWidth(N[0]);break;case $.OPS.setLineJoin:this.setLineJoin(N[0]);break;case $.OPS.setLineCap:this.setLineCap(N[0]);break;case $.OPS.setMiterLimit:this.setMiterLimit(N[0]);break;case $.OPS.setFillRGBColor:this.setFillRGBColor(N[0],N[1],N[2]);break;case $.OPS.setStrokeRGBColor:this.setStrokeRGBColor(N[0],N[1],N[2]);break;case $.OPS.setStrokeColorN:this.setStrokeColorN(N);break;case $.OPS.setFillColorN:this.setFillColorN(N);break;case $.OPS.shadingFill:this.shadingFill(N[0]);break;case $.OPS.setDash:this.setDash(N[0],N[1]);break;case $.OPS.setRenderingIntent:this.setRenderingIntent(N[0]);break;case $.OPS.setFlatness:this.setFlatness(N[0]);break;case $.OPS.setGState:this.setGState(N[0]);break;case $.OPS.fill:this.fill();break;case $.OPS.eoFill:this.eoFill();break;case $.OPS.stroke:this.stroke();break;case $.OPS.fillStroke:this.fillStroke();break;case $.OPS.eoFillStroke:this.eoFillStroke();break;case $.OPS.clip:this.clip("nonzero");break;case $.OPS.eoClip:this.clip("evenodd");break;case $.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case $.OPS.paintImageXObject:this.paintImageXObject(N[0]);break;case $.OPS.paintInlineImageXObject:this.paintInlineImageXObject(N[0]);break;case $.OPS.paintImageMaskXObject:this.paintImageMaskXObject(N[0]);break;case $.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(N[0],N[1]);break;case $.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case $.OPS.closePath:this.closePath();break;case $.OPS.closeStroke:this.closeStroke();break;case $.OPS.closeFillStroke:this.closeFillStroke();break;case $.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case $.OPS.nextLine:this.nextLine();break;case $.OPS.transform:this.transform(N[0],N[1],N[2],N[3],N[4],N[5]);break;case $.OPS.constructPath:this.constructPath(N[0],N[1]);break;case $.OPS.endPath:this.endPath();break;case 92:this.group(H.items);break;default:(0,$.warn)(`Unimplemented operator ${ct}`);break}}}setWordSpacing(O){this.current.wordSpacing=O}setCharSpacing(O){this.current.charSpacing=O}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(O,H,ct,q,N,at){const Y=this.current;Y.textMatrix=Y.lineMatrix=[O,H,ct,q,N,at],Y.textMatrixScale=Math.hypot(O,H),Y.x=Y.lineX=0,Y.y=Y.lineY=0,Y.xcoords=[],Y.ycoords=[],Y.tspan=this.svgFactory.createElement("svg:tspan"),Y.tspan.setAttributeNS(null,"font-family",Y.fontFamily),Y.tspan.setAttributeNS(null,"font-size",`${X(Y.fontSize)}px`),Y.tspan.setAttributeNS(null,"y",X(-Y.y)),Y.txtElement=this.svgFactory.createElement("svg:text"),Y.txtElement.append(Y.tspan)}beginText(){const O=this.current;O.x=O.lineX=0,O.y=O.lineY=0,O.textMatrix=$.IDENTITY_MATRIX,O.lineMatrix=$.IDENTITY_MATRIX,O.textMatrixScale=1,O.tspan=this.svgFactory.createElement("svg:tspan"),O.txtElement=this.svgFactory.createElement("svg:text"),O.txtgrp=this.svgFactory.createElement("svg:g"),O.xcoords=[],O.ycoords=[]}moveText(O,H){const ct=this.current;ct.x=ct.lineX+=O,ct.y=ct.lineY+=H,ct.xcoords=[],ct.ycoords=[],ct.tspan=this.svgFactory.createElement("svg:tspan"),ct.tspan.setAttributeNS(null,"font-family",ct.fontFamily),ct.tspan.setAttributeNS(null,"font-size",`${X(ct.fontSize)}px`),ct.tspan.setAttributeNS(null,"y",X(-ct.y))}showText(O){const H=this.current,ct=H.font,q=H.fontSize;if(q===0)return;const N=H.fontSizeScale,at=H.charSpacing,Y=H.wordSpacing,St=H.fontDirection,kt=H.textHScale*St,it=ct.vertical,Rt=it?1:-1,Wt=ct.defaultVMetrics,qt=q*H.fontMatrix[0];let Ct=0;for(const de of O){if(de===null){Ct+=St*Y;continue}else if(typeof de=="number"){Ct+=Rt*de*q/1e3;continue}const _e=(de.isSpace?Y:0)+at,et=de.fontChar;let w,R,T=de.width;if(it){let j;const K=de.vmetric||Wt;j=de.vmetric?K[1]:T*.5,j=-j*qt;const ut=K[2]*qt;T=K?-K[0]:T,w=j/N,R=(Ct+ut)/N}else w=Ct/N,R=0;(de.isInFont||ct.missingFile)&&(H.xcoords.push(H.x+w),it&&H.ycoords.push(-H.y+R),H.tspan.textContent+=et);const B=it?T*qt-_e*St:T*qt+_e*St;Ct+=B}H.tspan.setAttributeNS(null,"x",H.xcoords.map(X).join(" ")),it?H.tspan.setAttributeNS(null,"y",H.ycoords.map(X).join(" ")):H.tspan.setAttributeNS(null,"y",X(-H.y)),it?H.y-=Ct:H.x+=Ct*kt,H.tspan.setAttributeNS(null,"font-family",H.fontFamily),H.tspan.setAttributeNS(null,"font-size",`${X(H.fontSize)}px`),H.fontStyle!==_.fontStyle&&H.tspan.setAttributeNS(null,"font-style",H.fontStyle),H.fontWeight!==_.fontWeight&&H.tspan.setAttributeNS(null,"font-weight",H.fontWeight);const Yt=H.textRenderingMode&$.TextRenderingMode.FILL_STROKE_MASK;if(Yt===$.TextRenderingMode.FILL||Yt===$.TextRenderingMode.FILL_STROKE?(H.fillColor!==_.fillColor&&H.tspan.setAttributeNS(null,"fill",H.fillColor),H.fillAlpha<1&&H.tspan.setAttributeNS(null,"fill-opacity",H.fillAlpha)):H.textRenderingMode===$.TextRenderingMode.ADD_TO_PATH?H.tspan.setAttributeNS(null,"fill","transparent"):H.tspan.setAttributeNS(null,"fill","none"),Yt===$.TextRenderingMode.STROKE||Yt===$.TextRenderingMode.FILL_STROKE){const de=1/(H.textMatrixScale||1);this._setStrokeAttributes(H.tspan,de)}let ne=H.textMatrix;H.textRise!==0&&(ne=ne.slice(),ne[5]+=H.textRise),H.txtElement.setAttributeNS(null,"transform",`${Q(ne)} scale(${X(kt)}, -1)`),H.txtElement.setAttributeNS(ot,"xml:space","preserve"),H.txtElement.append(H.tspan),H.txtgrp.append(H.txtElement),this._ensureTransformGroup().append(H.txtElement)}setLeadingMoveText(O,H){this.setLeading(-H),this.moveText(O,H)}addFontStyle(O){if(!O.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const H=U(O.data,O.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${O.loadedName}"; src: url(${H}); }
`}setFont(O){const H=this.current,ct=this.commonObjs.get(O[0]);let q=O[1];H.font=ct,this.embedFonts&&!ct.missingFile&&!this.embeddedFonts[ct.loadedName]&&(this.addFontStyle(ct),this.embeddedFonts[ct.loadedName]=ct),H.fontMatrix=ct.fontMatrix||$.FONT_IDENTITY_MATRIX;let N="normal";ct.black?N="900":ct.bold&&(N="bold");const at=ct.italic?"italic":"normal";q<0?(q=-q,H.fontDirection=-1):H.fontDirection=1,H.fontSize=q,H.fontFamily=ct.loadedName,H.fontWeight=N,H.fontStyle=at,H.tspan=this.svgFactory.createElement("svg:tspan"),H.tspan.setAttributeNS(null,"y",X(-H.y)),H.xcoords=[],H.ycoords=[]}endText(){var H;const O=this.current;O.textRenderingMode&$.TextRenderingMode.ADD_TO_PATH_FLAG&&((H=O.txtElement)!=null&&H.hasChildNodes())&&(O.element=O.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(O){O>0&&(this.current.lineWidth=O)}setLineCap(O){this.current.lineCap=pt[O]}setLineJoin(O){this.current.lineJoin=lt[O]}setMiterLimit(O){this.current.miterLimit=O}setStrokeAlpha(O){this.current.strokeAlpha=O}setStrokeRGBColor(O,H,ct){this.current.strokeColor=$.Util.makeHexColor(O,H,ct)}setFillAlpha(O){this.current.fillAlpha=O}setFillRGBColor(O,H,ct){this.current.fillColor=$.Util.makeHexColor(O,H,ct),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(O){this.current.strokeColor=this._makeColorN_Pattern(O)}setFillColorN(O){this.current.fillColor=this._makeColorN_Pattern(O)}shadingFill(O){const{width:H,height:ct}=this.viewport,q=$.Util.inverseTransform(this.transformMatrix),[N,at,Y,St]=$.Util.getAxialAlignedBoundingBox([0,0,H,ct],q),kt=this.svgFactory.createElement("svg:rect");kt.setAttributeNS(null,"x",N),kt.setAttributeNS(null,"y",at),kt.setAttributeNS(null,"width",Y-N),kt.setAttributeNS(null,"height",St-at),kt.setAttributeNS(null,"fill",this._makeShadingPattern(O)),this.current.fillAlpha<1&&kt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(kt)}_makeColorN_Pattern(O){return O[0]==="TilingPattern"?this._makeTilingPattern(O):this._makeShadingPattern(O)}_makeTilingPattern(O){const H=O[1],ct=O[2],q=O[3]||$.IDENTITY_MATRIX,[N,at,Y,St]=O[4],kt=O[5],it=O[6],Rt=O[7],Wt=`shading${st++}`,[qt,Ct,Yt,ne]=$.Util.normalizeRect([...$.Util.applyTransform([N,at],q),...$.Util.applyTransform([Y,St],q)]),[de,_e]=$.Util.singularValueDecompose2dScale(q),et=kt*de,w=it*_e,R=this.svgFactory.createElement("svg:pattern");R.setAttributeNS(null,"id",Wt),R.setAttributeNS(null,"patternUnits","userSpaceOnUse"),R.setAttributeNS(null,"width",et),R.setAttributeNS(null,"height",w),R.setAttributeNS(null,"x",`${qt}`),R.setAttributeNS(null,"y",`${Ct}`);const T=this.svg,B=this.transformMatrix,j=this.current.fillColor,K=this.current.strokeColor,ut=this.svgFactory.create(Yt-qt,ne-Ct);if(this.svg=ut,this.transformMatrix=q,Rt===2){const yt=$.Util.makeHexColor(...H);this.current.fillColor=yt,this.current.strokeColor=yt}return this.executeOpTree(this.convertOpList(ct)),this.svg=T,this.transformMatrix=B,this.current.fillColor=j,this.current.strokeColor=K,R.append(ut.childNodes[0]),this.defs.append(R),`url(#${Wt})`}_makeShadingPattern(O){switch(typeof O=="string"&&(O=this.objs.get(O)),O[0]){case"RadialAxial":const H=`shading${st++}`,ct=O[3];let q;switch(O[1]){case"axial":const N=O[4],at=O[5];q=this.svgFactory.createElement("svg:linearGradient"),q.setAttributeNS(null,"id",H),q.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),q.setAttributeNS(null,"x1",N[0]),q.setAttributeNS(null,"y1",N[1]),q.setAttributeNS(null,"x2",at[0]),q.setAttributeNS(null,"y2",at[1]);break;case"radial":const Y=O[4],St=O[5],kt=O[6],it=O[7];q=this.svgFactory.createElement("svg:radialGradient"),q.setAttributeNS(null,"id",H),q.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),q.setAttributeNS(null,"cx",St[0]),q.setAttributeNS(null,"cy",St[1]),q.setAttributeNS(null,"r",it),q.setAttributeNS(null,"fx",Y[0]),q.setAttributeNS(null,"fy",Y[1]),q.setAttributeNS(null,"fr",kt);break;default:throw new Error(`Unknown RadialAxial type: ${O[1]}`)}for(const N of ct){const at=this.svgFactory.createElement("svg:stop");at.setAttributeNS(null,"offset",N[0]),at.setAttributeNS(null,"stop-color",N[1]),q.append(at)}return this.defs.append(q),`url(#${H})`;case"Mesh":return(0,$.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${O[0]}`)}}setDash(O,H){this.current.dashArray=O,this.current.dashPhase=H}constructPath(O,H){const ct=this.current;let q=ct.x,N=ct.y,at=[],Y=0;for(const St of O)switch(St|0){case $.OPS.rectangle:q=H[Y++],N=H[Y++];const kt=H[Y++],it=H[Y++],Rt=q+kt,Wt=N+it;at.push("M",X(q),X(N),"L",X(Rt),X(N),"L",X(Rt),X(Wt),"L",X(q),X(Wt),"Z");break;case $.OPS.moveTo:q=H[Y++],N=H[Y++],at.push("M",X(q),X(N));break;case $.OPS.lineTo:q=H[Y++],N=H[Y++],at.push("L",X(q),X(N));break;case $.OPS.curveTo:q=H[Y+4],N=H[Y+5],at.push("C",X(H[Y]),X(H[Y+1]),X(H[Y+2]),X(H[Y+3]),X(q),X(N)),Y+=6;break;case $.OPS.curveTo2:at.push("C",X(q),X(N),X(H[Y]),X(H[Y+1]),X(H[Y+2]),X(H[Y+3])),q=H[Y+2],N=H[Y+3],Y+=4;break;case $.OPS.curveTo3:q=H[Y+2],N=H[Y+3],at.push("C",X(H[Y]),X(H[Y+1]),X(q),X(N),X(q),X(N)),Y+=4;break;case $.OPS.closePath:at.push("Z");break}at=at.join(" "),ct.path&&O.length>0&&O[0]!==$.OPS.rectangle&&O[0]!==$.OPS.moveTo?at=ct.path.getAttributeNS(null,"d")+at:(ct.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(ct.path)),ct.path.setAttributeNS(null,"d",at),ct.path.setAttributeNS(null,"fill","none"),ct.element=ct.path,ct.setCurrentPoint(q,N)}endPath(){const O=this.current;if(O.path=null,!this.pendingClip)return;if(!O.element){this.pendingClip=null;return}const H=`clippath${V++}`,ct=this.svgFactory.createElement("svg:clipPath");ct.setAttributeNS(null,"id",H),ct.setAttributeNS(null,"transform",Q(this.transformMatrix));const q=O.element.cloneNode(!0);if(this.pendingClip==="evenodd"?q.setAttributeNS(null,"clip-rule","evenodd"):q.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,ct.append(q),this.defs.append(ct),O.activeClipUrl){O.clipGroup=null;for(const N of this.extraStack)N.clipGroup=null;ct.setAttributeNS(null,"clip-path",O.activeClipUrl)}O.activeClipUrl=`url(#${H})`,this.tgrp=null}clip(O){this.pendingClip=O}closePath(){const O=this.current;if(O.path){const H=`${O.path.getAttributeNS(null,"d")}Z`;O.path.setAttributeNS(null,"d",H)}}setLeading(O){this.current.leading=-O}setTextRise(O){this.current.textRise=O}setTextRenderingMode(O){this.current.textRenderingMode=O}setHScale(O){this.current.textHScale=O/100}setRenderingIntent(O){}setFlatness(O){}setGState(O){for(const[H,ct]of O)switch(H){case"LW":this.setLineWidth(ct);break;case"LC":this.setLineCap(ct);break;case"LJ":this.setLineJoin(ct);break;case"ML":this.setMiterLimit(ct);break;case"D":this.setDash(ct[0],ct[1]);break;case"RI":this.setRenderingIntent(ct);break;case"FL":this.setFlatness(ct);break;case"Font":this.setFont(ct);break;case"CA":this.setStrokeAlpha(ct);break;case"ca":this.setFillAlpha(ct);break;default:(0,$.warn)(`Unimplemented graphic state operator ${H}`);break}}fill(){const O=this.current;O.element&&(O.element.setAttributeNS(null,"fill",O.fillColor),O.element.setAttributeNS(null,"fill-opacity",O.fillAlpha),this.endPath())}stroke(){const O=this.current;O.element&&(this._setStrokeAttributes(O.element),O.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(O,H=1){const ct=this.current;let q=ct.dashArray;H!==1&&q.length>0&&(q=q.map(function(N){return H*N})),O.setAttributeNS(null,"stroke",ct.strokeColor),O.setAttributeNS(null,"stroke-opacity",ct.strokeAlpha),O.setAttributeNS(null,"stroke-miterlimit",X(ct.miterLimit)),O.setAttributeNS(null,"stroke-linecap",ct.lineCap),O.setAttributeNS(null,"stroke-linejoin",ct.lineJoin),O.setAttributeNS(null,"stroke-width",X(H*ct.lineWidth)+"px"),O.setAttributeNS(null,"stroke-dasharray",q.map(X).join(" ")),O.setAttributeNS(null,"stroke-dashoffset",X(H*ct.dashPhase)+"px")}eoFill(){var O;(O=this.current.element)==null||O.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var O;(O=this.current.element)==null||O.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width","1px"),O.setAttributeNS(null,"height","1px"),O.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(O)}paintImageXObject(O){const H=this.getObject(O);if(!H){(0,$.warn)(`Dependent image with object ID ${O} is not ready yet`);return}this.paintInlineImageXObject(H)}paintInlineImageXObject(O,H){const ct=O.width,q=O.height,N=vt(O,this.forceDataSchema,!!H),at=this.svgFactory.createElement("svg:rect");at.setAttributeNS(null,"x","0"),at.setAttributeNS(null,"y","0"),at.setAttributeNS(null,"width",X(ct)),at.setAttributeNS(null,"height",X(q)),this.current.element=at,this.clip("nonzero");const Y=this.svgFactory.createElement("svg:image");Y.setAttributeNS($t,"xlink:href",N),Y.setAttributeNS(null,"x","0"),Y.setAttributeNS(null,"y",X(-q)),Y.setAttributeNS(null,"width",X(ct)+"px"),Y.setAttributeNS(null,"height",X(q)+"px"),Y.setAttributeNS(null,"transform",`scale(${X(1/ct)} ${X(-1/q)})`),H?H.append(Y):this._ensureTransformGroup().append(Y)}paintImageMaskXObject(O){const H=this.getObject(O.data,O);if(H.bitmap){(0,$.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const ct=this.current,q=H.width,N=H.height,at=ct.fillColor;ct.maskId=`mask${J++}`;const Y=this.svgFactory.createElement("svg:mask");Y.setAttributeNS(null,"id",ct.maskId);const St=this.svgFactory.createElement("svg:rect");St.setAttributeNS(null,"x","0"),St.setAttributeNS(null,"y","0"),St.setAttributeNS(null,"width",X(q)),St.setAttributeNS(null,"height",X(N)),St.setAttributeNS(null,"fill",at),St.setAttributeNS(null,"mask",`url(#${ct.maskId})`),this.defs.append(Y),this._ensureTransformGroup().append(St),this.paintInlineImageXObject(H,Y)}paintFormXObjectBegin(O,H){if(Array.isArray(O)&&O.length===6&&this.transform(O[0],O[1],O[2],O[3],O[4],O[5]),H){const ct=H[2]-H[0],q=H[3]-H[1],N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x",H[0]),N.setAttributeNS(null,"y",H[1]),N.setAttributeNS(null,"width",X(ct)),N.setAttributeNS(null,"height",X(q)),this.current.element=N,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(O){const H=this.svgFactory.create(O.width,O.height),ct=this.svgFactory.createElement("svg:defs");H.append(ct),this.defs=ct;const q=this.svgFactory.createElement("svg:g");return q.setAttributeNS(null,"transform",Q(O.transform)),H.append(q),this.svg=q,H}_ensureClipGroup(){if(!this.current.clipGroup){const O=this.svgFactory.createElement("svg:g");O.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(O),this.current.clipGroup=O}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",Q(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}D.SVGGraphics=rt},(x,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.XfaText=void 0;class _t{static textContent($){const _=[],ot={items:_,styles:Object.create(null)};function $t(pt){var vt;if(!pt)return;let lt=null;const U=pt.name;if(U==="#text")lt=pt.value;else if(_t.shouldBuildText(U))(vt=pt==null?void 0:pt.attributes)!=null&&vt.textContent?lt=pt.attributes.textContent:pt.value&&(lt=pt.value);else return;if(lt!==null&&_.push({str:lt}),!!pt.children)for(const gt of pt.children)$t(gt)}return $t($),ot}static shouldBuildText($){return!($==="textarea"||$==="input"||$==="option"||$==="select")}}D.XfaText=_t},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.TextLayerRenderTask=void 0,D.renderTextLayer=Q,D.updateTextLayer=V;var L=_t(1),$=_t(6);const _=1e5,ot=30,$t=.8,pt=new Map;function lt(J,st){let rt;if(st&&L.FeatureTest.isOffscreenCanvasSupported)rt=new OffscreenCanvas(J,J).getContext("2d",{alpha:!1});else{const tt=document.createElement("canvas");tt.width=tt.height=J,rt=tt.getContext("2d",{alpha:!1})}return rt}function U(J,st){const rt=pt.get(J);if(rt)return rt;const tt=lt(ot,st);tt.font=`${ot}px ${J}`;const O=tt.measureText("");let H=O.fontBoundingBoxAscent,ct=Math.abs(O.fontBoundingBoxDescent);if(H){const N=H/(H+ct);return pt.set(J,N),tt.canvas.width=tt.canvas.height=0,N}tt.strokeStyle="red",tt.clearRect(0,0,ot,ot),tt.strokeText("g",0,0);let q=tt.getImageData(0,0,ot,ot).data;ct=0;for(let N=q.length-1-3;N>=0;N-=4)if(q[N]>0){ct=Math.ceil(N/4/ot);break}tt.clearRect(0,0,ot,ot),tt.strokeText("A",0,ot),q=tt.getImageData(0,0,ot,ot).data,H=0;for(let N=0,at=q.length;N<at;N+=4)if(q[N]>0){H=ot-Math.floor(N/4/ot);break}if(tt.canvas.width=tt.canvas.height=0,H){const N=H/(H+ct);return pt.set(J,N),N}return pt.set(J,$t),$t}function vt(J,st,rt){const tt=document.createElement("span"),O={angle:0,canvasWidth:0,hasText:st.str!=="",hasEOL:st.hasEOL,fontSize:0};J._textDivs.push(tt);const H=L.Util.transform(J._transform,st.transform);let ct=Math.atan2(H[1],H[0]);const q=rt[st.fontName];q.vertical&&(ct+=Math.PI/2);const N=Math.hypot(H[2],H[3]),at=N*U(q.fontFamily,J._isOffscreenCanvasSupported);let Y,St;ct===0?(Y=H[4],St=H[5]-at):(Y=H[4]+at*Math.sin(ct),St=H[5]-at*Math.cos(ct));const kt="calc(var(--scale-factor)*",it=tt.style;J._container===J._rootContainer?(it.left=`${(100*Y/J._pageWidth).toFixed(2)}%`,it.top=`${(100*St/J._pageHeight).toFixed(2)}%`):(it.left=`${kt}${Y.toFixed(2)}px)`,it.top=`${kt}${St.toFixed(2)}px)`),it.fontSize=`${kt}${N.toFixed(2)}px)`,it.fontFamily=q.fontFamily,O.fontSize=N,tt.setAttribute("role","presentation"),tt.textContent=st.str,tt.dir=st.dir,J._fontInspectorEnabled&&(tt.dataset.fontName=st.fontName),ct!==0&&(O.angle=ct*(180/Math.PI));let Rt=!1;if(st.str.length>1)Rt=!0;else if(st.str!==" "&&st.transform[0]!==st.transform[3]){const Wt=Math.abs(st.transform[0]),qt=Math.abs(st.transform[3]);Wt!==qt&&Math.max(Wt,qt)/Math.min(Wt,qt)>1.5&&(Rt=!0)}Rt&&(O.canvasWidth=q.vertical?st.height:st.width),J._textDivProperties.set(tt,O),J._isReadableStream&&J._layoutText(tt)}function gt(J){const{div:st,scale:rt,properties:tt,ctx:O,prevFontSize:H,prevFontFamily:ct}=J,{style:q}=st;let N="";if(tt.canvasWidth!==0&&tt.hasText){const{fontFamily:at}=q,{canvasWidth:Y,fontSize:St}=tt;(H!==St||ct!==at)&&(O.font=`${St*rt}px ${at}`,J.prevFontSize=St,J.prevFontFamily=at);const{width:kt}=O.measureText(st.textContent);kt>0&&(N=`scaleX(${Y*rt/kt})`)}tt.angle!==0&&(N=`rotate(${tt.angle}deg) ${N}`),N.length>0&&(q.transform=N)}function nt(J){if(J._canceled)return;const st=J._textDivs,rt=J._capability;if(st.length>_){rt.resolve();return}if(!J._isReadableStream)for(const O of st)J._layoutText(O);rt.resolve()}class X{constructor({textContentSource:st,container:rt,viewport:tt,textDivs:O,textDivProperties:H,textContentItemsStr:ct,isOffscreenCanvasSupported:q}){var kt;this._textContentSource=st,this._isReadableStream=st instanceof ReadableStream,this._container=this._rootContainer=rt,this._textDivs=O||[],this._textContentItemsStr=ct||[],this._isOffscreenCanvasSupported=q,this._fontInspectorEnabled=!!((kt=globalThis.FontInspector)!=null&&kt.enabled),this._reader=null,this._textDivProperties=H||new WeakMap,this._canceled=!1,this._capability=new L.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:tt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:lt(0,q)};const{pageWidth:N,pageHeight:at,pageX:Y,pageY:St}=tt.rawDims;this._transform=[1,0,0,-1,-Y,St+at],this._pageWidth=N,this._pageHeight=at,(0,$.setLayerDimensions)(rt,tt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new L.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new L.AbortException("TextLayer task cancelled."))}_processItems(st,rt){for(const tt of st){if(tt.str===void 0){if(tt.type==="beginMarkedContentProps"||tt.type==="beginMarkedContent"){const O=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),tt.id!==null&&this._container.setAttribute("id",`${tt.id}`),O.append(this._container)}else tt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(tt.str),vt(this,tt,rt)}}_layoutText(st){const rt=this._layoutTextParams.properties=this._textDivProperties.get(st);if(this._layoutTextParams.div=st,gt(this._layoutTextParams),rt.hasText&&this._container.append(st),rt.hasEOL){const tt=document.createElement("br");tt.setAttribute("role","presentation"),this._container.append(tt)}}_render(){const st=new L.PromiseCapability;let rt=Object.create(null);if(this._isReadableStream){const tt=()=>{this._reader.read().then(({value:O,done:H})=>{if(H){st.resolve();return}Object.assign(rt,O.styles),this._processItems(O.items,rt),tt()},st.reject)};this._reader=this._textContentSource.getReader(),tt()}else if(this._textContentSource){const{items:tt,styles:O}=this._textContentSource;this._processItems(tt,O),st.resolve()}else throw new Error('No "textContentSource" parameter specified.');st.promise.then(()=>{rt=null,nt(this)},this._capability.reject)}}D.TextLayerRenderTask=X;function Q(J){!J.textContentSource&&(J.textContent||J.textContentStream)&&((0,$.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),J.textContentSource=J.textContent||J.textContentStream);const{container:st,viewport:rt}=J,tt=getComputedStyle(st),O=tt.getPropertyValue("visibility"),H=parseFloat(tt.getPropertyValue("--scale-factor"));O==="visible"&&(!H||Math.abs(H-rt.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const ct=new X(J);return ct._render(),ct}function V({container:J,viewport:st,textDivs:rt,textDivProperties:tt,isOffscreenCanvasSupported:O,mustRotate:H=!0,mustRescale:ct=!0}){if(H&&(0,$.setLayerDimensions)(J,{rotation:st.rotation}),ct){const q=lt(0,O),at={prevFontSize:null,prevFontFamily:null,div:null,scale:st.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:q};for(const Y of rt)at.properties=tt.get(Y),at.div=Y,gt(at)}}},(x,D,_t)=>{var U,vt,gt,nt,X,Q,V,J,st,rt,tt,Cr,H,zi,q,Pr,at,Tr;Object.defineProperty(D,"__esModule",{value:!0}),D.AnnotationEditorLayer=void 0;var L=_t(1),$=_t(4),_=_t(28),ot=_t(33),$t=_t(6),pt=_t(34);const St=class St{constructor({uiManager:it,pageIndex:Rt,div:Wt,accessibilityManager:qt,annotationLayer:Ct,viewport:Yt,l10n:ne}){mt(this,tt);mt(this,H);mt(this,q);mt(this,at);mt(this,U,void 0);mt(this,vt,!1);mt(this,gt,null);mt(this,nt,this.pointerup.bind(this));mt(this,X,this.pointerdown.bind(this));mt(this,Q,new Map);mt(this,V,!1);mt(this,J,!1);mt(this,st,!1);mt(this,rt,void 0);const de=[_.FreeTextEditor,ot.InkEditor,pt.StampEditor];if(!St._initialized){St._initialized=!0;for(const _e of de)_e.initialize(ne)}it.registerEditorTypes(de),Ut(this,rt,it),this.pageIndex=Rt,this.div=Wt,Ut(this,U,qt),Ut(this,gt,Ct),this.viewport=Yt,y(this,rt).addLayer(this)}get isEmpty(){return y(this,Q).size===0}updateToolbar(it){y(this,rt).updateToolbar(it)}updateMode(it=y(this,rt).getMode()){xt(this,at,Tr).call(this),it===L.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),it!==L.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",it===L.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",it===L.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",it===L.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(it){if(!it&&y(this,rt).getMode()!==L.AnnotationEditorType.INK)return;if(!it){for(const Wt of y(this,Q).values())if(Wt.isEmpty()){Wt.setInBackground();return}}xt(this,H,zi).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(it){y(this,rt).setEditingState(it)}addCommands(it){y(this,rt).addCommands(it)}enable(){this.div.style.pointerEvents="auto";const it=new Set;for(const Wt of y(this,Q).values())Wt.enableEditing(),Wt.annotationElementId&&it.add(Wt.annotationElementId);if(!y(this,gt))return;const Rt=y(this,gt).getEditableAnnotations();for(const Wt of Rt){if(Wt.hide(),y(this,rt).isDeletedAnnotationElement(Wt.data.id)||it.has(Wt.data.id))continue;const qt=this.deserialize(Wt);qt&&(this.addOrRebuild(qt),qt.enableEditing())}}disable(){var Rt;Ut(this,st,!0),this.div.style.pointerEvents="none";const it=new Set;for(const Wt of y(this,Q).values()){if(Wt.disableEditing(),!Wt.annotationElementId||Wt.serialize()!==null){it.add(Wt.annotationElementId);continue}(Rt=this.getEditableAnnotation(Wt.annotationElementId))==null||Rt.show(),Wt.remove()}if(y(this,gt)){const Wt=y(this,gt).getEditableAnnotations();for(const qt of Wt){const{id:Ct}=qt.data;it.has(Ct)||y(this,rt).isDeletedAnnotationElement(Ct)||qt.show()}}xt(this,at,Tr).call(this),this.isEmpty&&(this.div.hidden=!0),Ut(this,st,!1)}getEditableAnnotation(it){var Rt;return((Rt=y(this,gt))==null?void 0:Rt.getEditableAnnotation(it))||null}setActiveEditor(it){y(this,rt).getActive()!==it&&y(this,rt).setActiveEditor(it)}enableClick(){this.div.addEventListener("pointerdown",y(this,X)),this.div.addEventListener("pointerup",y(this,nt))}disableClick(){this.div.removeEventListener("pointerdown",y(this,X)),this.div.removeEventListener("pointerup",y(this,nt))}attach(it){y(this,Q).set(it.id,it);const{annotationElementId:Rt}=it;Rt&&y(this,rt).isDeletedAnnotationElement(Rt)&&y(this,rt).removeDeletedAnnotationElement(it)}detach(it){var Rt;y(this,Q).delete(it.id),(Rt=y(this,U))==null||Rt.removePointerInTextLayer(it.contentDiv),!y(this,st)&&it.annotationElementId&&y(this,rt).addDeletedAnnotationElement(it)}remove(it){this.detach(it),y(this,rt).removeEditor(it),it.div.contains(document.activeElement)&&setTimeout(()=>{y(this,rt).focusMainContainer()},0),it.div.remove(),it.isAttachedToDOM=!1,y(this,J)||this.addInkEditorIfNeeded(!1)}changeParent(it){var Rt;it.parent!==this&&(it.annotationElementId&&(y(this,rt).addDeletedAnnotationElement(it.annotationElementId),$.AnnotationEditor.deleteAnnotationElement(it),it.annotationElementId=null),this.attach(it),(Rt=it.parent)==null||Rt.detach(it),it.setParent(this),it.div&&it.isAttachedToDOM&&(it.div.remove(),this.div.append(it.div)))}add(it){if(this.changeParent(it),y(this,rt).addEditor(it),this.attach(it),!it.isAttachedToDOM){const Rt=it.render();this.div.append(Rt),it.isAttachedToDOM=!0}it.fixAndSetPosition(),it.onceAdded(),y(this,rt).addToAnnotationStorage(it)}moveEditorInDOM(it){var Wt;if(!it.isAttachedToDOM)return;const{activeElement:Rt}=document;it.div.contains(Rt)&&(it._focusEventsAllowed=!1,setTimeout(()=>{it.div.contains(document.activeElement)?it._focusEventsAllowed=!0:(it.div.addEventListener("focusin",()=>{it._focusEventsAllowed=!0},{once:!0}),Rt.focus())},0)),it._structTreeParentId=(Wt=y(this,U))==null?void 0:Wt.moveElementInDOM(this.div,it.div,it.contentDiv,!0)}addOrRebuild(it){it.needsToBeRebuilt()?it.rebuild():this.add(it)}addUndoableEditor(it){const Rt=()=>it._uiManager.rebuild(it),Wt=()=>{it.remove()};this.addCommands({cmd:Rt,undo:Wt,mustExec:!1})}getNextId(){return y(this,rt).getId()}pasteEditor(it,Rt){y(this,rt).updateToolbar(it),y(this,rt).updateMode(it);const{offsetX:Wt,offsetY:qt}=xt(this,q,Pr).call(this),Ct=this.getNextId(),Yt=xt(this,tt,Cr).call(this,{parent:this,id:Ct,x:Wt,y:qt,uiManager:y(this,rt),isCentered:!0,...Rt});Yt&&this.add(Yt)}deserialize(it){switch(it.annotationType??it.annotationEditorType){case L.AnnotationEditorType.FREETEXT:return _.FreeTextEditor.deserialize(it,this,y(this,rt));case L.AnnotationEditorType.INK:return ot.InkEditor.deserialize(it,this,y(this,rt));case L.AnnotationEditorType.STAMP:return pt.StampEditor.deserialize(it,this,y(this,rt))}return null}addNewEditor(){xt(this,H,zi).call(this,xt(this,q,Pr).call(this),!0)}setSelected(it){y(this,rt).setSelected(it)}toggleSelected(it){y(this,rt).toggleSelected(it)}isSelected(it){return y(this,rt).isSelected(it)}unselect(it){y(this,rt).unselect(it)}pointerup(it){const{isMac:Rt}=L.FeatureTest.platform;if(!(it.button!==0||it.ctrlKey&&Rt)&&it.target===this.div&&y(this,V)){if(Ut(this,V,!1),!y(this,vt)){Ut(this,vt,!0);return}if(y(this,rt).getMode()===L.AnnotationEditorType.STAMP){y(this,rt).unselectAll();return}xt(this,H,zi).call(this,it,!1)}}pointerdown(it){if(y(this,V)){Ut(this,V,!1);return}const{isMac:Rt}=L.FeatureTest.platform;if(it.button!==0||it.ctrlKey&&Rt||it.target!==this.div)return;Ut(this,V,!0);const Wt=y(this,rt).getActive();Ut(this,vt,!Wt||Wt.isEmpty())}findNewParent(it,Rt,Wt){const qt=y(this,rt).findParent(Rt,Wt);return qt===null||qt===this?!1:(qt.changeParent(it),!0)}destroy(){var it,Rt;((it=y(this,rt).getActive())==null?void 0:it.parent)===this&&(y(this,rt).commitOrRemove(),y(this,rt).setActiveEditor(null));for(const Wt of y(this,Q).values())(Rt=y(this,U))==null||Rt.removePointerInTextLayer(Wt.contentDiv),Wt.setParent(null),Wt.isAttachedToDOM=!1,Wt.div.remove();this.div=null,y(this,Q).clear(),y(this,rt).removeLayer(this)}render({viewport:it}){this.viewport=it,(0,$t.setLayerDimensions)(this.div,it);for(const Rt of y(this,rt).getEditors(this.pageIndex))this.add(Rt);this.updateMode()}update({viewport:it}){y(this,rt).commitOrRemove(),this.viewport=it,(0,$t.setLayerDimensions)(this.div,{rotation:it.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:it,pageHeight:Rt}=this.viewport.rawDims;return[it,Rt]}};U=new WeakMap,vt=new WeakMap,gt=new WeakMap,nt=new WeakMap,X=new WeakMap,Q=new WeakMap,V=new WeakMap,J=new WeakMap,st=new WeakMap,rt=new WeakMap,tt=new WeakSet,Cr=function(it){switch(y(this,rt).getMode()){case L.AnnotationEditorType.FREETEXT:return new _.FreeTextEditor(it);case L.AnnotationEditorType.INK:return new ot.InkEditor(it);case L.AnnotationEditorType.STAMP:return new pt.StampEditor(it)}return null},H=new WeakSet,zi=function(it,Rt){const Wt=this.getNextId(),qt=xt(this,tt,Cr).call(this,{parent:this,id:Wt,x:it.offsetX,y:it.offsetY,uiManager:y(this,rt),isCentered:Rt});return qt&&this.add(qt),qt},q=new WeakSet,Pr=function(){const{x:it,y:Rt,width:Wt,height:qt}=this.div.getBoundingClientRect(),Ct=Math.max(0,it),Yt=Math.max(0,Rt),ne=Math.min(window.innerWidth,it+Wt),de=Math.min(window.innerHeight,Rt+qt),_e=(Ct+ne)/2-it,et=(Yt+de)/2-Rt,[w,R]=this.viewport.rotation%180===0?[_e,et]:[et,_e];return{offsetX:w,offsetY:R}},at=new WeakSet,Tr=function(){Ut(this,J,!0);for(const it of y(this,Q).values())it.isEmpty()&&it.remove();Ut(this,J,!1)},Pn(St,"_initialized",!1);let lt=St;D.AnnotationEditorLayer=lt},(x,D,_t)=>{var pt,lt,U,vt,gt,nt,X,Q,V,J,vs,rt,bs,O,_s,ct,Ci,N,kr,Y,ys,kt,xr;Object.defineProperty(D,"__esModule",{value:!0}),D.FreeTextEditor=void 0;var L=_t(1),$=_t(5),_=_t(4),ot=_t(29);const Rt=class Rt extends _.AnnotationEditor{constructor(Ct){super({...Ct,name:"freeTextEditor"});mt(this,J);mt(this,rt);mt(this,O);mt(this,ct);mt(this,N);mt(this,Y);mt(this,kt);mt(this,pt,this.editorDivBlur.bind(this));mt(this,lt,this.editorDivFocus.bind(this));mt(this,U,this.editorDivInput.bind(this));mt(this,vt,this.editorDivKeydown.bind(this));mt(this,gt,void 0);mt(this,nt,"");mt(this,X,`${this.id}-editor`);mt(this,Q,void 0);mt(this,V,null);Ut(this,gt,Ct.color||Rt._defaultColor||_.AnnotationEditor._defaultLineColor),Ut(this,Q,Ct.fontSize||Rt._defaultFontSize)}static get _keyboardManager(){const Ct=Rt.prototype,Yt=_e=>_e.isEmpty(),ne=$.AnnotationEditorUIManager.TRANSLATE_SMALL,de=$.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,L.shadow)(this,"_keyboardManager",new $.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Ct.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Ct.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Ct._translateEmpty,{args:[-ne,0],checker:Yt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Ct._translateEmpty,{args:[-de,0],checker:Yt}],[["ArrowRight","mac+ArrowRight"],Ct._translateEmpty,{args:[ne,0],checker:Yt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Ct._translateEmpty,{args:[de,0],checker:Yt}],[["ArrowUp","mac+ArrowUp"],Ct._translateEmpty,{args:[0,-ne],checker:Yt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Ct._translateEmpty,{args:[0,-de],checker:Yt}],[["ArrowDown","mac+ArrowDown"],Ct._translateEmpty,{args:[0,ne],checker:Yt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Ct._translateEmpty,{args:[0,de],checker:Yt}]]))}static initialize(Ct){_.AnnotationEditor.initialize(Ct,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Yt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Yt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Ct,Yt){switch(Ct){case L.AnnotationEditorParamsType.FREETEXT_SIZE:Rt._defaultFontSize=Yt;break;case L.AnnotationEditorParamsType.FREETEXT_COLOR:Rt._defaultColor=Yt;break}}updateParams(Ct,Yt){switch(Ct){case L.AnnotationEditorParamsType.FREETEXT_SIZE:xt(this,J,vs).call(this,Yt);break;case L.AnnotationEditorParamsType.FREETEXT_COLOR:xt(this,rt,bs).call(this,Yt);break}}static get defaultPropertiesToUpdate(){return[[L.AnnotationEditorParamsType.FREETEXT_SIZE,Rt._defaultFontSize],[L.AnnotationEditorParamsType.FREETEXT_COLOR,Rt._defaultColor||_.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[L.AnnotationEditorParamsType.FREETEXT_SIZE,y(this,Q)],[L.AnnotationEditorParamsType.FREETEXT_COLOR,y(this,gt)]]}_translateEmpty(Ct,Yt){this._uiManager.translateSelectedEditors(Ct,Yt,!0)}getInitialTranslation(){const Ct=this.parentScale;return[-Rt._internalPadding*Ct,-(Rt._internalPadding+y(this,Q))*Ct]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(L.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",y(this,vt)),this.editorDiv.addEventListener("focus",y(this,lt)),this.editorDiv.addEventListener("blur",y(this,pt)),this.editorDiv.addEventListener("input",y(this,U)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",y(this,X)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",y(this,vt)),this.editorDiv.removeEventListener("focus",y(this,lt)),this.editorDiv.removeEventListener("blur",y(this,pt)),this.editorDiv.removeEventListener("input",y(this,U)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Ct){this._focusEventsAllowed&&(super.focusin(Ct),Ct.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Ct;if(this.width){xt(this,kt,xr).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Ct=this._initialOptions)!=null&&Ct.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Ct=y(this,nt),Yt=Ut(this,nt,xt(this,O,_s).call(this).trimEnd());if(Ct===Yt)return;const ne=de=>{if(Ut(this,nt,de),!de){this.remove();return}xt(this,N,kr).call(this),this._uiManager.rebuild(this),xt(this,ct,Ci).call(this)};this.addCommands({cmd:()=>{ne(Yt)},undo:()=>{ne(Ct)},mustExec:!1}),xt(this,ct,Ci).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Ct){this.enterInEditMode()}keydown(Ct){Ct.target===this.div&&Ct.key==="Enter"&&(this.enterInEditMode(),Ct.preventDefault())}editorDivKeydown(Ct){Rt._keyboardManager.exec(this,Ct)}editorDivFocus(Ct){this.isEditing=!0}editorDivBlur(Ct){this.isEditing=!1}editorDivInput(Ct){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Ct,Yt;this.width&&(Ct=this.x,Yt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",y(this,X)),this.enableEditing(),_.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(de=>{var _e;return(_e=this.editorDiv)==null?void 0:_e.setAttribute("aria-label",de)}),_.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(de=>{var _e;return(_e=this.editorDiv)==null?void 0:_e.setAttribute("default-content",de)}),this.editorDiv.contentEditable=!0;const{style:ne}=this.editorDiv;if(ne.fontSize=`calc(${y(this,Q)}px * var(--scale-factor))`,ne.color=y(this,gt),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,$.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[de,_e]=this.parentDimensions;if(this.annotationElementId){const{position:et}=y(this,V);let[w,R]=this.getInitialTranslation();[w,R]=this.pageTranslationToScreen(w,R);const[T,B]=this.pageDimensions,[j,K]=this.pageTranslation;let ut,yt;switch(this.rotation){case 0:ut=Ct+(et[0]-j)/T,yt=Yt+this.height-(et[1]-K)/B;break;case 90:ut=Ct+(et[0]-j)/T,yt=Yt-(et[1]-K)/B,[w,R]=[R,-w];break;case 180:ut=Ct-this.width+(et[0]-j)/T,yt=Yt-(et[1]-K)/B,[w,R]=[-w,-R];break;case 270:ut=Ct+(et[0]-j-this.height*B)/T,yt=Yt+(et[1]-K-this.width*T)/B,[w,R]=[-R,w];break}this.setAt(ut*de,yt*_e,w,R)}else this.setAt(Ct*de,Yt*_e,this.width*de,this.height*_e);xt(this,N,kr).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Ct,Yt,ne){let de=null;if(Ct instanceof ot.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:et,fontColor:w},rect:R,rotation:T,id:B},textContent:j,textPosition:K,parent:{page:{pageNumber:ut}}}=Ct;if(!j||j.length===0)return null;de=Ct={annotationType:L.AnnotationEditorType.FREETEXT,color:Array.from(w),fontSize:et,value:j.join(`
`),position:K,pageIndex:ut-1,rect:R,rotation:T,id:B,deleted:!1}}const _e=super.deserialize(Ct,Yt,ne);return Ut(_e,Q,Ct.fontSize),Ut(_e,gt,L.Util.makeHexColor(...Ct.color)),Ut(_e,nt,Ct.value),_e.annotationElementId=Ct.id||null,Ut(_e,V,de),_e}serialize(Ct=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Yt=Rt._internalPadding*this.parentScale,ne=this.getRect(Yt,Yt),de=_.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:y(this,gt)),_e={annotationType:L.AnnotationEditorType.FREETEXT,color:de,fontSize:y(this,Q),value:y(this,nt),pageIndex:this.pageIndex,rect:ne,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Ct?_e:this.annotationElementId&&!xt(this,Y,ys).call(this,_e)?null:(_e.id=this.annotationElementId,_e)}};pt=new WeakMap,lt=new WeakMap,U=new WeakMap,vt=new WeakMap,gt=new WeakMap,nt=new WeakMap,X=new WeakMap,Q=new WeakMap,V=new WeakMap,J=new WeakSet,vs=function(Ct){const Yt=de=>{this.editorDiv.style.fontSize=`calc(${de}px * var(--scale-factor))`,this.translate(0,-(de-y(this,Q))*this.parentScale),Ut(this,Q,de),xt(this,ct,Ci).call(this)},ne=y(this,Q);this.addCommands({cmd:()=>{Yt(Ct)},undo:()=>{Yt(ne)},mustExec:!0,type:L.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},rt=new WeakSet,bs=function(Ct){const Yt=y(this,gt);this.addCommands({cmd:()=>{Ut(this,gt,this.editorDiv.style.color=Ct)},undo:()=>{Ut(this,gt,this.editorDiv.style.color=Yt)},mustExec:!0,type:L.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},O=new WeakSet,_s=function(){const Ct=this.editorDiv.getElementsByTagName("div");if(Ct.length===0)return this.editorDiv.innerText;const Yt=[];for(const ne of Ct)Yt.push(ne.innerText.replace(/\r\n?|\n/,""));return Yt.join(`
`)},ct=new WeakSet,Ci=function(){const[Ct,Yt]=this.parentDimensions;let ne;if(this.isAttachedToDOM)ne=this.div.getBoundingClientRect();else{const{currentLayer:de,div:_e}=this,et=_e.style.display;_e.style.display="hidden",de.div.append(this.div),ne=_e.getBoundingClientRect(),_e.remove(),_e.style.display=et}this.rotation%180===this.parentRotation%180?(this.width=ne.width/Ct,this.height=ne.height/Yt):(this.width=ne.height/Ct,this.height=ne.width/Yt),this.fixAndSetPosition()},N=new WeakSet,kr=function(){if(this.editorDiv.replaceChildren(),!!y(this,nt))for(const Ct of y(this,nt).split(`
`)){const Yt=document.createElement("div");Yt.append(Ct?document.createTextNode(Ct):document.createElement("br")),this.editorDiv.append(Yt)}},Y=new WeakSet,ys=function(Ct){const{value:Yt,fontSize:ne,color:de,rect:_e,pageIndex:et}=y(this,V);return Ct.value!==Yt||Ct.fontSize!==ne||Ct.rect.some((w,R)=>Math.abs(w-_e[R])>=1)||Ct.color.some((w,R)=>w!==de[R])||Ct.pageIndex!==et},kt=new WeakSet,xr=function(Ct=!1){if(!this.annotationElementId)return;if(xt(this,ct,Ci).call(this),!Ct&&(this.width===0||this.height===0)){setTimeout(()=>xt(this,kt,xr).call(this,!0),0);return}const Yt=Rt._internalPadding*this.parentScale;y(this,V).rect=this.getRect(Yt,Yt)},Pn(Rt,"_freeTextDefaultContent",""),Pn(Rt,"_internalPadding",0),Pn(Rt,"_defaultColor",null),Pn(Rt,"_defaultFontSize",10),Pn(Rt,"_type","freetext");let $t=Rt;D.FreeTextEditor=$t},(x,D,_t)=>{var R,B,ci,K,As,yt,zt,Bt,Gt,Jt,le,Qt,Se,Re,ce,Ce,te,jt,It,Zt,ge,fe,Oe,Ss,Ne,Ui,qe,Mr,Je,Rr,Mt,wt,ae,Kt,an,mn,Dt,Fr,Te,me,ke,Me,Es,oe,Lr;Object.defineProperty(D,"__esModule",{value:!0}),D.StampAnnotationElement=D.InkAnnotationElement=D.FreeTextAnnotationElement=D.AnnotationLayer=void 0;var L=_t(1),$=_t(6),_=_t(3),ot=_t(30),$t=_t(31),pt=_t(32);const lt=1e3,U=9,vt=new WeakSet;function gt(Pe){return{width:Pe[2]-Pe[0],height:Pe[3]-Pe[1]}}class nt{static create(dt){switch(dt.data.annotationType){case L.AnnotationType.LINK:return new Q(dt);case L.AnnotationType.TEXT:return new V(dt);case L.AnnotationType.WIDGET:switch(dt.data.fieldType){case"Tx":return new st(dt);case"Btn":return dt.data.radioButton?new O(dt):dt.data.checkBox?new tt(dt):new H(dt);case"Ch":return new ct(dt);case"Sig":return new rt(dt)}return new J(dt);case L.AnnotationType.POPUP:return new q(dt);case L.AnnotationType.FREETEXT:return new at(dt);case L.AnnotationType.LINE:return new Y(dt);case L.AnnotationType.SQUARE:return new St(dt);case L.AnnotationType.CIRCLE:return new kt(dt);case L.AnnotationType.POLYLINE:return new it(dt);case L.AnnotationType.CARET:return new Wt(dt);case L.AnnotationType.INK:return new qt(dt);case L.AnnotationType.POLYGON:return new Rt(dt);case L.AnnotationType.HIGHLIGHT:return new Ct(dt);case L.AnnotationType.UNDERLINE:return new Yt(dt);case L.AnnotationType.SQUIGGLY:return new ne(dt);case L.AnnotationType.STRIKEOUT:return new de(dt);case L.AnnotationType.STAMP:return new _e(dt);case L.AnnotationType.FILEATTACHMENT:return new et(dt);default:return new X(dt)}}}const T=class T{constructor(dt,{isRenderable:A=!1,ignoreBorder:G=!1,createQuadrilaterals:ft=!1}={}){mt(this,R,!1);this.isRenderable=A,this.data=dt.data,this.layer=dt.layer,this.linkService=dt.linkService,this.downloadManager=dt.downloadManager,this.imageResourcesPath=dt.imageResourcesPath,this.renderForms=dt.renderForms,this.svgFactory=dt.svgFactory,this.annotationStorage=dt.annotationStorage,this.enableScripting=dt.enableScripting,this.hasJSActions=dt.hasJSActions,this._fieldObjects=dt.fieldObjects,this.parent=dt.parent,A&&(this.container=this._createContainer(G)),ft&&this._createQuadrilaterals()}static _hasPopupData({titleObj:dt,contentsObj:A,richText:G}){return!!(dt!=null&&dt.str||A!=null&&A.str||G!=null&&G.str)}get hasPopupData(){return T._hasPopupData(this.data)}_createContainer(dt){const{data:A,parent:{page:G,viewport:ft}}=this,Pt=document.createElement("section");Pt.setAttribute("data-annotation-id",A.id),this instanceof J||(Pt.tabIndex=lt),Pt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Pt.setAttribute("aria-haspopup","dialog"),A.noRotate&&Pt.classList.add("norotate");const{pageWidth:Ft,pageHeight:Vt,pageX:re,pageY:ye}=ft.rawDims;if(!A.rect||this instanceof q){const{rotation:Be}=A;return!A.hasOwnCanvas&&Be!==0&&this.setRotation(Be,Pt),Pt}const{width:ve,height:Ve}=gt(A.rect),Ee=L.Util.normalizeRect([A.rect[0],G.view[3]-A.rect[1]+G.view[1],A.rect[2],G.view[3]-A.rect[3]+G.view[1]]);if(!dt&&A.borderStyle.width>0){Pt.style.borderWidth=`${A.borderStyle.width}px`;const Be=A.borderStyle.horizontalCornerRadius,Ze=A.borderStyle.verticalCornerRadius;if(Be>0||Ze>0){const pn=`calc(${Be}px * var(--scale-factor)) / calc(${Ze}px * var(--scale-factor))`;Pt.style.borderRadius=pn}else if(this instanceof O){const pn=`calc(${ve}px * var(--scale-factor)) / calc(${Ve}px * var(--scale-factor))`;Pt.style.borderRadius=pn}switch(A.borderStyle.style){case L.AnnotationBorderStyleType.SOLID:Pt.style.borderStyle="solid";break;case L.AnnotationBorderStyleType.DASHED:Pt.style.borderStyle="dashed";break;case L.AnnotationBorderStyleType.BEVELED:(0,L.warn)("Unimplemented border style: beveled");break;case L.AnnotationBorderStyleType.INSET:(0,L.warn)("Unimplemented border style: inset");break;case L.AnnotationBorderStyleType.UNDERLINE:Pt.style.borderBottomStyle="solid";break}const cn=A.borderColor||null;cn?(Ut(this,R,!0),Pt.style.borderColor=L.Util.makeHexColor(cn[0]|0,cn[1]|0,cn[2]|0)):Pt.style.borderWidth=0}Pt.style.left=`${100*(Ee[0]-re)/Ft}%`,Pt.style.top=`${100*(Ee[1]-ye)/Vt}%`;const{rotation:we}=A;return A.hasOwnCanvas||we===0?(Pt.style.width=`${100*ve/Ft}%`,Pt.style.height=`${100*Ve/Vt}%`):this.setRotation(we,Pt),Pt}setRotation(dt,A=this.container){if(!this.data.rect)return;const{pageWidth:G,pageHeight:ft}=this.parent.viewport.rawDims,{width:Pt,height:Ft}=gt(this.data.rect);let Vt,re;dt%180===0?(Vt=100*Pt/G,re=100*Ft/ft):(Vt=100*Ft/G,re=100*Pt/ft),A.style.width=`${Vt}%`,A.style.height=`${re}%`,A.setAttribute("data-main-rotation",(360-dt)%360)}get _commonActions(){const dt=(A,G,ft)=>{const Pt=ft.detail[A],Ft=Pt[0],Vt=Pt.slice(1);ft.target.style[G]=ot.ColorConverters[`${Ft}_HTML`](Vt),this.annotationStorage.setValue(this.data.id,{[G]:ot.ColorConverters[`${Ft}_rgb`](Vt)})};return(0,L.shadow)(this,"_commonActions",{display:A=>{const{display:G}=A.detail,ft=G%2===1;this.container.style.visibility=ft?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ft,noPrint:G===1||G===2})},print:A=>{this.annotationStorage.setValue(this.data.id,{noPrint:!A.detail.print})},hidden:A=>{const{hidden:G}=A.detail;this.container.style.visibility=G?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:G,noView:G})},focus:A=>{setTimeout(()=>A.target.focus({preventScroll:!1}),0)},userName:A=>{A.target.title=A.detail.userName},readonly:A=>{A.target.disabled=A.detail.readonly},required:A=>{this._setRequired(A.target,A.detail.required)},bgColor:A=>{dt("bgColor","backgroundColor",A)},fillColor:A=>{dt("fillColor","backgroundColor",A)},fgColor:A=>{dt("fgColor","color",A)},textColor:A=>{dt("textColor","color",A)},borderColor:A=>{dt("borderColor","borderColor",A)},strokeColor:A=>{dt("strokeColor","borderColor",A)},rotation:A=>{const G=A.detail.rotation;this.setRotation(G),this.annotationStorage.setValue(this.data.id,{rotation:G})}})}_dispatchEventFromSandbox(dt,A){const G=this._commonActions;for(const ft of Object.keys(A.detail)){const Pt=dt[ft]||G[ft];Pt==null||Pt(A)}}_setDefaultPropertiesFromJS(dt){if(!this.enableScripting)return;const A=this.annotationStorage.getRawValue(this.data.id);if(!A)return;const G=this._commonActions;for(const[ft,Pt]of Object.entries(A)){const Ft=G[ft];if(Ft){const Vt={detail:{[ft]:Pt},target:dt};Ft(Vt),delete A[ft]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:dt}=this.data;if(!dt)return;const[A,G,ft,Pt]=this.data.rect;if(dt.length===1){const[,{x:Ze,y:cn},{x:pn,y:On}]=dt[0];if(ft===Ze&&Pt===cn&&A===pn&&G===On)return}const{style:Ft}=this.container;let Vt;if(y(this,R)){const{borderColor:Ze,borderWidth:cn}=Ft;Ft.borderWidth=0,Vt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ze}" stroke-width="${cn}">`],this.container.classList.add("hasBorder")}const re=ft-A,ye=Pt-G,{svgFactory:ve}=this,Ve=ve.createElement("svg");Ve.classList.add("quadrilateralsContainer"),Ve.setAttribute("width",0),Ve.setAttribute("height",0);const Ee=ve.createElement("defs");Ve.append(Ee);const we=ve.createElement("clipPath"),Be=`clippath_${this.data.id}`;we.setAttribute("id",Be),we.setAttribute("clipPathUnits","objectBoundingBox"),Ee.append(we);for(const[,{x:Ze,y:cn},{x:pn,y:On}]of dt){const Tn=ve.createElement("rect"),Vn=(pn-A)/re,qn=(Pt-cn)/ye,Jn=(Ze-pn)/re,ki=(cn-On)/ye;Tn.setAttribute("x",Vn),Tn.setAttribute("y",qn),Tn.setAttribute("width",Jn),Tn.setAttribute("height",ki),we.append(Tn),Vt==null||Vt.push(`<rect vector-effect="non-scaling-stroke" x="${Vn}" y="${qn}" width="${Jn}" height="${ki}"/>`)}y(this,R)&&(Vt.push("</g></svg>')"),Ft.backgroundImage=Vt.join("")),this.container.append(Ve),this.container.style.clipPath=`url(#${Be})`}_createPopup(){const{container:dt,data:A}=this;dt.setAttribute("aria-haspopup","dialog");const G=new q({data:{color:A.color,titleObj:A.titleObj,modificationDate:A.modificationDate,contentsObj:A.contentsObj,richText:A.richText,parentRect:A.rect,borderStyle:0,id:`popup_${A.id}`,rotation:A.rotation},parent:this.parent,elements:[this]});this.parent.div.append(G.render())}render(){(0,L.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(dt,A=null){const G=[];if(this._fieldObjects){const ft=this._fieldObjects[dt];if(ft)for(const{page:Pt,id:Ft,exportValues:Vt}of ft){if(Pt===-1||Ft===A)continue;const re=typeof Vt=="string"?Vt:null,ye=document.querySelector(`[data-element-id="${Ft}"]`);if(ye&&!vt.has(ye)){(0,L.warn)(`_getElementsByName - element not allowed: ${Ft}`);continue}G.push({id:Ft,exportValue:re,domElement:ye})}return G}for(const ft of document.getElementsByName(dt)){const{exportValue:Pt}=ft,Ft=ft.getAttribute("data-element-id");Ft!==A&&vt.has(ft)&&G.push({id:Ft,exportValue:Pt,domElement:ft})}return G}show(){var dt;this.container&&(this.container.hidden=!1),(dt=this.popup)==null||dt.maybeShow()}hide(){var dt;this.container&&(this.container.hidden=!0),(dt=this.popup)==null||dt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const dt=this.getElementsToTriggerPopup();if(Array.isArray(dt))for(const A of dt)A.classList.add("highlightArea");else dt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:dt,data:{id:A}}=this;this.container.addEventListener("dblclick",()=>{var G;(G=this.linkService.eventBus)==null||G.dispatch("switchannotationeditormode",{source:this,mode:dt,editId:A})})}};R=new WeakMap;let X=T;class Q extends X{constructor(A,G=null){super(A,{isRenderable:!0,ignoreBorder:!!(G!=null&&G.ignoreBorder),createQuadrilaterals:!0});mt(this,B);mt(this,K);this.isTooltipOnly=A.data.isTooltipOnly}render(){const{data:A,linkService:G}=this,ft=document.createElement("a");ft.setAttribute("data-element-id",A.id);let Pt=!1;return A.url?(G.addLinkAttributes(ft,A.url,A.newWindow),Pt=!0):A.action?(this._bindNamedAction(ft,A.action),Pt=!0):A.attachment?(this._bindAttachment(ft,A.attachment),Pt=!0):A.setOCGState?(xt(this,K,As).call(this,ft,A.setOCGState),Pt=!0):A.dest?(this._bindLink(ft,A.dest),Pt=!0):(A.actions&&(A.actions.Action||A.actions["Mouse Up"]||A.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ft,A),Pt=!0),A.resetForm?(this._bindResetFormAction(ft,A.resetForm),Pt=!0):this.isTooltipOnly&&!Pt&&(this._bindLink(ft,""),Pt=!0)),this.container.classList.add("linkAnnotation"),Pt&&this.container.append(ft),this.container}_bindLink(A,G){A.href=this.linkService.getDestinationHash(G),A.onclick=()=>(G&&this.linkService.goToDestination(G),!1),(G||G==="")&&xt(this,B,ci).call(this)}_bindNamedAction(A,G){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeNamedAction(G),!1),xt(this,B,ci).call(this)}_bindAttachment(A,G){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>{var ft;return(ft=this.downloadManager)==null||ft.openOrDownloadData(this.container,G.content,G.filename),!1},xt(this,B,ci).call(this)}_bindJSAction(A,G){A.href=this.linkService.getAnchorUrl("");const ft=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Pt of Object.keys(G.actions)){const Ft=ft.get(Pt);Ft&&(A[Ft]=()=>{var Vt;return(Vt=this.linkService.eventBus)==null||Vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:G.id,name:Pt}}),!1})}A.onclick||(A.onclick=()=>!1),xt(this,B,ci).call(this)}_bindResetFormAction(A,G){const ft=A.onclick;if(ft||(A.href=this.linkService.getAnchorUrl("")),xt(this,B,ci).call(this),!this._fieldObjects){(0,L.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ft||(A.onclick=()=>!1);return}A.onclick=()=>{var Ve;ft==null||ft();const{fields:Pt,refs:Ft,include:Vt}=G,re=[];if(Pt.length!==0||Ft.length!==0){const Ee=new Set(Ft);for(const we of Pt){const Be=this._fieldObjects[we]||[];for(const{id:Ze}of Be)Ee.add(Ze)}for(const we of Object.values(this._fieldObjects))for(const Be of we)Ee.has(Be.id)===Vt&&re.push(Be)}else for(const Ee of Object.values(this._fieldObjects))re.push(...Ee);const ye=this.annotationStorage,ve=[];for(const Ee of re){const{id:we}=Ee;switch(ve.push(we),Ee.type){case"text":{const Ze=Ee.defaultValue||"";ye.setValue(we,{value:Ze});break}case"checkbox":case"radiobutton":{const Ze=Ee.defaultValue===Ee.exportValues;ye.setValue(we,{value:Ze});break}case"combobox":case"listbox":{const Ze=Ee.defaultValue||"";ye.setValue(we,{value:Ze});break}default:continue}const Be=document.querySelector(`[data-element-id="${we}"]`);if(Be){if(!vt.has(Be)){(0,L.warn)(`_bindResetFormAction - element not allowed: ${we}`);continue}}else continue;Be.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ve=this.linkService.eventBus)==null||Ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ve,name:"ResetForm"}})),!1}}}B=new WeakSet,ci=function(){this.container.setAttribute("data-internal-link","")},K=new WeakSet,As=function(A,G){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeSetOCGState(G),!1),xt(this,B,ci).call(this)};class V extends X{constructor(dt){super(dt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const dt=document.createElement("img");return dt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",dt.alt="[{{type}} Annotation]",dt.dataset.l10nId="text_annotation_type",dt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(dt),this.container}}class J extends X{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(dt){var A;this.data.hasOwnCanvas&&(((A=dt.previousSibling)==null?void 0:A.nodeName)==="CANVAS"&&(dt.previousSibling.hidden=!0),dt.hidden=!1)}_getKeyModifier(dt){const{isWin:A,isMac:G}=L.FeatureTest.platform;return A&&dt.ctrlKey||G&&dt.metaKey}_setEventListener(dt,A,G,ft,Pt){G.includes("mouse")?dt.addEventListener(G,Ft=>{var Vt;(Vt=this.linkService.eventBus)==null||Vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ft,value:Pt(Ft),shift:Ft.shiftKey,modifier:this._getKeyModifier(Ft)}})}):dt.addEventListener(G,Ft=>{var Vt;if(G==="blur"){if(!A.focused||!Ft.relatedTarget)return;A.focused=!1}else if(G==="focus"){if(A.focused)return;A.focused=!0}Pt&&((Vt=this.linkService.eventBus)==null||Vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ft,value:Pt(Ft)}}))})}_setEventListeners(dt,A,G,ft){var Pt,Ft,Vt;for(const[re,ye]of G)(ye==="Action"||(Pt=this.data.actions)!=null&&Pt[ye])&&((ye==="Focus"||ye==="Blur")&&(A||(A={focused:!1})),this._setEventListener(dt,A,re,ye,ft),ye==="Focus"&&!((Ft=this.data.actions)!=null&&Ft.Blur)?this._setEventListener(dt,A,"blur","Blur",null):ye==="Blur"&&!((Vt=this.data.actions)!=null&&Vt.Focus)&&this._setEventListener(dt,A,"focus","Focus",null))}_setBackgroundColor(dt){const A=this.data.backgroundColor||null;dt.style.backgroundColor=A===null?"transparent":L.Util.makeHexColor(A[0],A[1],A[2])}_setTextStyle(dt){const A=["left","center","right"],{fontColor:G}=this.data.defaultAppearanceData,ft=this.data.defaultAppearanceData.fontSize||U,Pt=dt.style;let Ft;const Vt=2,re=ye=>Math.round(10*ye)/10;if(this.data.multiLine){const ye=Math.abs(this.data.rect[3]-this.data.rect[1]-Vt),ve=Math.round(ye/(L.LINE_FACTOR*ft))||1,Ve=ye/ve;Ft=Math.min(ft,re(Ve/L.LINE_FACTOR))}else{const ye=Math.abs(this.data.rect[3]-this.data.rect[1]-Vt);Ft=Math.min(ft,re(ye/L.LINE_FACTOR))}Pt.fontSize=`calc(${Ft}px * var(--scale-factor))`,Pt.color=L.Util.makeHexColor(G[0],G[1],G[2]),this.data.textAlignment!==null&&(Pt.textAlign=A[this.data.textAlignment])}_setRequired(dt,A){A?dt.setAttribute("required",!0):dt.removeAttribute("required"),dt.setAttribute("aria-required",A)}}class st extends J{constructor(dt){const A=dt.renderForms||!dt.data.hasAppearance&&!!dt.data.fieldValue;super(dt,{isRenderable:A})}setPropertyOnSiblings(dt,A,G,ft){const Pt=this.annotationStorage;for(const Ft of this._getElementsByName(dt.name,dt.id))Ft.domElement&&(Ft.domElement[A]=G),Pt.setValue(Ft.id,{[ft]:G})}render(){var ft,Pt;const dt=this.annotationStorage,A=this.data.id;this.container.classList.add("textWidgetAnnotation");let G=null;if(this.renderForms){const Ft=dt.getValue(A,{value:this.data.fieldValue});let Vt=Ft.value||"";const re=dt.getValue(A,{charLimit:this.data.maxLen}).charLimit;re&&Vt.length>re&&(Vt=Vt.slice(0,re));let ye=Ft.formattedValue||((ft=this.data.textContent)==null?void 0:ft.join(`
`))||null;ye&&this.data.comb&&(ye=ye.replaceAll(/\s+/g,""));const ve={userValue:Vt,formattedValue:ye,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(G=document.createElement("textarea"),G.textContent=ye??Vt,this.data.doNotScroll&&(G.style.overflowY="hidden")):(G=document.createElement("input"),G.type="text",G.setAttribute("value",ye??Vt),this.data.doNotScroll&&(G.style.overflowX="hidden")),this.data.hasOwnCanvas&&(G.hidden=!0),vt.add(G),G.setAttribute("data-element-id",A),G.disabled=this.data.readOnly,G.name=this.data.fieldName,G.tabIndex=lt,this._setRequired(G,this.data.required),re&&(G.maxLength=re),G.addEventListener("input",Ee=>{dt.setValue(A,{value:Ee.target.value}),this.setPropertyOnSiblings(G,"value",Ee.target.value,"value"),ve.formattedValue=null}),G.addEventListener("resetform",Ee=>{const we=this.data.defaultFieldValue??"";G.value=ve.userValue=we,ve.formattedValue=null});let Ve=Ee=>{const{formattedValue:we}=ve;we!=null&&(Ee.target.value=we),Ee.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){G.addEventListener("focus",we=>{if(ve.focused)return;const{target:Be}=we;ve.userValue&&(Be.value=ve.userValue),ve.lastCommittedValue=Be.value,ve.commitKey=1,ve.focused=!0}),G.addEventListener("updatefromsandbox",we=>{this.showElementAndHideCanvas(we.target);const Be={value(Ze){ve.userValue=Ze.detail.value??"",dt.setValue(A,{value:ve.userValue.toString()}),Ze.target.value=ve.userValue},formattedValue(Ze){const{formattedValue:cn}=Ze.detail;ve.formattedValue=cn,cn!=null&&Ze.target!==document.activeElement&&(Ze.target.value=cn),dt.setValue(A,{formattedValue:cn})},selRange(Ze){Ze.target.setSelectionRange(...Ze.detail.selRange)},charLimit:Ze=>{var Tn;const{charLimit:cn}=Ze.detail,{target:pn}=Ze;if(cn===0){pn.removeAttribute("maxLength");return}pn.setAttribute("maxLength",cn);let On=ve.userValue;!On||On.length<=cn||(On=On.slice(0,cn),pn.value=ve.userValue=On,dt.setValue(A,{value:On}),(Tn=this.linkService.eventBus)==null||Tn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:On,willCommit:!0,commitKey:1,selStart:pn.selectionStart,selEnd:pn.selectionEnd}}))}};this._dispatchEventFromSandbox(Be,we)}),G.addEventListener("keydown",we=>{var cn;ve.commitKey=1;let Be=-1;if(we.key==="Escape"?Be=0:we.key==="Enter"&&!this.data.multiLine?Be=2:we.key==="Tab"&&(ve.commitKey=3),Be===-1)return;const{value:Ze}=we.target;ve.lastCommittedValue!==Ze&&(ve.lastCommittedValue=Ze,ve.userValue=Ze,(cn=this.linkService.eventBus)==null||cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:Ze,willCommit:!0,commitKey:Be,selStart:we.target.selectionStart,selEnd:we.target.selectionEnd}}))});const Ee=Ve;Ve=null,G.addEventListener("blur",we=>{var Ze;if(!ve.focused||!we.relatedTarget)return;ve.focused=!1;const{value:Be}=we.target;ve.userValue=Be,ve.lastCommittedValue!==Be&&((Ze=this.linkService.eventBus)==null||Ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:Be,willCommit:!0,commitKey:ve.commitKey,selStart:we.target.selectionStart,selEnd:we.target.selectionEnd}})),Ee(we)}),(Pt=this.data.actions)!=null&&Pt.Keystroke&&G.addEventListener("beforeinput",we=>{var qn;ve.lastCommittedValue=null;const{data:Be,target:Ze}=we,{value:cn,selectionStart:pn,selectionEnd:On}=Ze;let Tn=pn,Vn=On;switch(we.inputType){case"deleteWordBackward":{const Jn=cn.substring(0,pn).match(/\w*[^\w]*$/);Jn&&(Tn-=Jn[0].length);break}case"deleteWordForward":{const Jn=cn.substring(pn).match(/^[^\w]*\w*/);Jn&&(Vn+=Jn[0].length);break}case"deleteContentBackward":pn===On&&(Tn-=1);break;case"deleteContentForward":pn===On&&(Vn+=1);break}we.preventDefault(),(qn=this.linkService.eventBus)==null||qn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:cn,change:Be||"",willCommit:!1,selStart:Tn,selEnd:Vn}})}),this._setEventListeners(G,ve,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],we=>we.target.value)}if(Ve&&G.addEventListener("blur",Ve),this.data.comb){const we=(this.data.rect[2]-this.data.rect[0])/re;G.classList.add("comb"),G.style.letterSpacing=`calc(${we}px * var(--scale-factor) - 1ch)`}}else G=document.createElement("div"),G.textContent=this.data.fieldValue,G.style.verticalAlign="middle",G.style.display="table-cell";return this._setTextStyle(G),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class rt extends J{constructor(dt){super(dt,{isRenderable:!!dt.data.hasOwnCanvas})}}class tt extends J{constructor(dt){super(dt,{isRenderable:dt.renderForms})}render(){const dt=this.annotationStorage,A=this.data,G=A.id;let ft=dt.getValue(G,{value:A.exportValue===A.fieldValue}).value;typeof ft=="string"&&(ft=ft!=="Off",dt.setValue(G,{value:ft})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Pt=document.createElement("input");return vt.add(Pt),Pt.setAttribute("data-element-id",G),Pt.disabled=A.readOnly,this._setRequired(Pt,this.data.required),Pt.type="checkbox",Pt.name=A.fieldName,ft&&Pt.setAttribute("checked",!0),Pt.setAttribute("exportValue",A.exportValue),Pt.tabIndex=lt,Pt.addEventListener("change",Ft=>{const{name:Vt,checked:re}=Ft.target;for(const ye of this._getElementsByName(Vt,G)){const ve=re&&ye.exportValue===A.exportValue;ye.domElement&&(ye.domElement.checked=ve),dt.setValue(ye.id,{value:ve})}dt.setValue(G,{value:re})}),Pt.addEventListener("resetform",Ft=>{const Vt=A.defaultFieldValue||"Off";Ft.target.checked=Vt===A.exportValue}),this.enableScripting&&this.hasJSActions&&(Pt.addEventListener("updatefromsandbox",Ft=>{const Vt={value(re){re.target.checked=re.detail.value!=="Off",dt.setValue(G,{value:re.target.checked})}};this._dispatchEventFromSandbox(Vt,Ft)}),this._setEventListeners(Pt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ft=>Ft.target.checked)),this._setBackgroundColor(Pt),this._setDefaultPropertiesFromJS(Pt),this.container.append(Pt),this.container}}class O extends J{constructor(dt){super(dt,{isRenderable:dt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const dt=this.annotationStorage,A=this.data,G=A.id;let ft=dt.getValue(G,{value:A.fieldValue===A.buttonValue}).value;typeof ft=="string"&&(ft=ft!==A.buttonValue,dt.setValue(G,{value:ft}));const Pt=document.createElement("input");if(vt.add(Pt),Pt.setAttribute("data-element-id",G),Pt.disabled=A.readOnly,this._setRequired(Pt,this.data.required),Pt.type="radio",Pt.name=A.fieldName,ft&&Pt.setAttribute("checked",!0),Pt.tabIndex=lt,Pt.addEventListener("change",Ft=>{const{name:Vt,checked:re}=Ft.target;for(const ye of this._getElementsByName(Vt,G))dt.setValue(ye.id,{value:!1});dt.setValue(G,{value:re})}),Pt.addEventListener("resetform",Ft=>{const Vt=A.defaultFieldValue;Ft.target.checked=Vt!=null&&Vt===A.buttonValue}),this.enableScripting&&this.hasJSActions){const Ft=A.buttonValue;Pt.addEventListener("updatefromsandbox",Vt=>{const re={value:ye=>{const ve=Ft===ye.detail.value;for(const Ve of this._getElementsByName(ye.target.name)){const Ee=ve&&Ve.id===G;Ve.domElement&&(Ve.domElement.checked=Ee),dt.setValue(Ve.id,{value:Ee})}}};this._dispatchEventFromSandbox(re,Vt)}),this._setEventListeners(Pt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Vt=>Vt.target.checked)}return this._setBackgroundColor(Pt),this._setDefaultPropertiesFromJS(Pt),this.container.append(Pt),this.container}}class H extends Q{constructor(dt){super(dt,{ignoreBorder:dt.data.hasAppearance})}render(){const dt=super.render();dt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(dt.title=this.data.alternativeText);const A=dt.lastChild;return this.enableScripting&&this.hasJSActions&&A&&(this._setDefaultPropertiesFromJS(A),A.addEventListener("updatefromsandbox",G=>{this._dispatchEventFromSandbox({},G)})),dt}}class ct extends J{constructor(dt){super(dt,{isRenderable:dt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const dt=this.annotationStorage,A=this.data.id,G=dt.getValue(A,{value:this.data.fieldValue}),ft=document.createElement("select");vt.add(ft),ft.setAttribute("data-element-id",A),ft.disabled=this.data.readOnly,this._setRequired(ft,this.data.required),ft.name=this.data.fieldName,ft.tabIndex=lt;let Pt=this.data.combo&&this.data.options.length>0;this.data.combo||(ft.size=this.data.options.length,this.data.multiSelect&&(ft.multiple=!0)),ft.addEventListener("resetform",ve=>{const Ve=this.data.defaultFieldValue;for(const Ee of ft.options)Ee.selected=Ee.value===Ve});for(const ve of this.data.options){const Ve=document.createElement("option");Ve.textContent=ve.displayValue,Ve.value=ve.exportValue,G.value.includes(ve.exportValue)&&(Ve.setAttribute("selected",!0),Pt=!1),ft.append(Ve)}let Ft=null;if(Pt){const ve=document.createElement("option");ve.value=" ",ve.setAttribute("hidden",!0),ve.setAttribute("selected",!0),ft.prepend(ve),Ft=()=>{ve.remove(),ft.removeEventListener("input",Ft),Ft=null},ft.addEventListener("input",Ft)}const Vt=ve=>{const Ve=ve?"value":"textContent",{options:Ee,multiple:we}=ft;return we?Array.prototype.filter.call(Ee,Be=>Be.selected).map(Be=>Be[Ve]):Ee.selectedIndex===-1?null:Ee[Ee.selectedIndex][Ve]};let re=Vt(!1);const ye=ve=>{const Ve=ve.target.options;return Array.prototype.map.call(Ve,Ee=>({displayValue:Ee.textContent,exportValue:Ee.value}))};return this.enableScripting&&this.hasJSActions?(ft.addEventListener("updatefromsandbox",ve=>{const Ve={value(Ee){Ft==null||Ft();const we=Ee.detail.value,Be=new Set(Array.isArray(we)?we:[we]);for(const Ze of ft.options)Ze.selected=Be.has(Ze.value);dt.setValue(A,{value:Vt(!0)}),re=Vt(!1)},multipleSelection(Ee){ft.multiple=!0},remove(Ee){const we=ft.options,Be=Ee.detail.remove;we[Be].selected=!1,ft.remove(Be),we.length>0&&Array.prototype.findIndex.call(we,cn=>cn.selected)===-1&&(we[0].selected=!0),dt.setValue(A,{value:Vt(!0),items:ye(Ee)}),re=Vt(!1)},clear(Ee){for(;ft.length!==0;)ft.remove(0);dt.setValue(A,{value:null,items:[]}),re=Vt(!1)},insert(Ee){const{index:we,displayValue:Be,exportValue:Ze}=Ee.detail.insert,cn=ft.children[we],pn=document.createElement("option");pn.textContent=Be,pn.value=Ze,cn?cn.before(pn):ft.append(pn),dt.setValue(A,{value:Vt(!0),items:ye(Ee)}),re=Vt(!1)},items(Ee){const{items:we}=Ee.detail;for(;ft.length!==0;)ft.remove(0);for(const Be of we){const{displayValue:Ze,exportValue:cn}=Be,pn=document.createElement("option");pn.textContent=Ze,pn.value=cn,ft.append(pn)}ft.options.length>0&&(ft.options[0].selected=!0),dt.setValue(A,{value:Vt(!0),items:ye(Ee)}),re=Vt(!1)},indices(Ee){const we=new Set(Ee.detail.indices);for(const Be of Ee.target.options)Be.selected=we.has(Be.index);dt.setValue(A,{value:Vt(!0)}),re=Vt(!1)},editable(Ee){Ee.target.disabled=!Ee.detail.editable}};this._dispatchEventFromSandbox(Ve,ve)}),ft.addEventListener("input",ve=>{var Ee;const Ve=Vt(!0);dt.setValue(A,{value:Ve}),ve.preventDefault(),(Ee=this.linkService.eventBus)==null||Ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:re,changeEx:Ve,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ft,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ve=>ve.target.value)):ft.addEventListener("input",function(ve){dt.setValue(A,{value:Vt(!0)})}),this.data.combo&&this._setTextStyle(ft),this._setBackgroundColor(ft),this._setDefaultPropertiesFromJS(ft),this.container.append(ft),this.container}}class q extends X{constructor(dt){const{data:A,elements:G}=dt;super(dt,{isRenderable:X._hasPopupData(A)}),this.elements=G}render(){this.container.classList.add("popupAnnotation");const dt=new N({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),A=[];for(const G of this.elements)G.popup=dt,A.push(G.data.id),G.addHighlightArea();return this.container.setAttribute("aria-controls",A.map(G=>`${L.AnnotationPrefix}${G}`).join(",")),this.container}}class N{constructor({container:dt,color:A,elements:G,titleObj:ft,modificationDate:Pt,contentsObj:Ft,richText:Vt,parent:re,rect:ye,parentRect:ve,open:Ve}){mt(this,Oe);mt(this,Ne);mt(this,qe);mt(this,Je);mt(this,yt,null);mt(this,zt,xt(this,Oe,Ss).bind(this));mt(this,Bt,xt(this,Je,Rr).bind(this));mt(this,Gt,xt(this,qe,Mr).bind(this));mt(this,Jt,xt(this,Ne,Ui).bind(this));mt(this,le,null);mt(this,Qt,null);mt(this,Se,null);mt(this,Re,null);mt(this,ce,null);mt(this,Ce,null);mt(this,te,!1);mt(this,jt,null);mt(this,It,null);mt(this,Zt,null);mt(this,ge,null);mt(this,fe,!1);var we;Ut(this,Qt,dt),Ut(this,ge,ft),Ut(this,Se,Ft),Ut(this,Zt,Vt),Ut(this,ce,re),Ut(this,le,A),Ut(this,It,ye),Ut(this,Ce,ve),Ut(this,Re,G);const Ee=$.PDFDateString.toDateObject(Pt);Ee&&Ut(this,yt,re.l10n.get("annotation_date_string",{date:Ee.toLocaleDateString(),time:Ee.toLocaleTimeString()})),this.trigger=G.flatMap(Be=>Be.getElementsToTriggerPopup());for(const Be of this.trigger)Be.addEventListener("click",y(this,Jt)),Be.addEventListener("mouseenter",y(this,Gt)),Be.addEventListener("mouseleave",y(this,Bt)),Be.classList.add("popupTriggerArea");for(const Be of G)(we=Be.container)==null||we.addEventListener("keydown",y(this,zt));y(this,Qt).hidden=!0,Ve&&xt(this,Ne,Ui).call(this)}render(){if(y(this,jt))return;const{page:{view:dt},viewport:{rawDims:{pageWidth:A,pageHeight:G,pageX:ft,pageY:Pt}}}=y(this,ce),Ft=Ut(this,jt,document.createElement("div"));if(Ft.className="popup",y(this,le)){const Tn=Ft.style.outlineColor=L.Util.makeHexColor(...y(this,le));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Ft.style.backgroundColor=`color-mix(in srgb, ${Tn} 30%, white)`:Ft.style.backgroundColor=L.Util.makeHexColor(...y(this,le).map(qn=>Math.floor(.7*(255-qn)+qn)))}const Vt=document.createElement("span");Vt.className="header";const re=document.createElement("h1");if(Vt.append(re),{dir:re.dir,str:re.textContent}=y(this,ge),Ft.append(Vt),y(this,yt)){const Tn=document.createElement("span");Tn.classList.add("popupDate"),y(this,yt).then(Vn=>{Tn.textContent=Vn}),Vt.append(Tn)}const ye=y(this,Se),ve=y(this,Zt);if(ve!=null&&ve.str&&(!(ye!=null&&ye.str)||ye.str===ve.str))pt.XfaLayer.render({xfaHtml:ve.html,intent:"richText",div:Ft}),Ft.lastChild.classList.add("richText","popupContent");else{const Tn=this._formatContents(ye);Ft.append(Tn)}let Ve=!!y(this,Ce),Ee=Ve?y(this,Ce):y(this,It);for(const Tn of y(this,Re))if(!Ee||L.Util.intersect(Tn.data.rect,Ee)!==null){Ee=Tn.data.rect,Ve=!0;break}const we=L.Util.normalizeRect([Ee[0],dt[3]-Ee[1]+dt[1],Ee[2],dt[3]-Ee[3]+dt[1]]),Ze=Ve?Ee[2]-Ee[0]+5:0,cn=we[0]+Ze,pn=we[1],{style:On}=y(this,Qt);On.left=`${100*(cn-ft)/A}%`,On.top=`${100*(pn-Pt)/G}%`,y(this,Qt).append(Ft)}_formatContents({str:dt,dir:A}){const G=document.createElement("p");G.classList.add("popupContent"),G.dir=A;const ft=dt.split(/(?:\r\n?|\n)/);for(let Pt=0,Ft=ft.length;Pt<Ft;++Pt){const Vt=ft[Pt];G.append(document.createTextNode(Vt)),Pt<Ft-1&&G.append(document.createElement("br"))}return G}forceHide(){Ut(this,fe,this.isVisible),y(this,fe)&&(y(this,Qt).hidden=!0)}maybeShow(){y(this,fe)&&(Ut(this,fe,!1),y(this,Qt).hidden=!1)}get isVisible(){return y(this,Qt).hidden===!1}}yt=new WeakMap,zt=new WeakMap,Bt=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,le=new WeakMap,Qt=new WeakMap,Se=new WeakMap,Re=new WeakMap,ce=new WeakMap,Ce=new WeakMap,te=new WeakMap,jt=new WeakMap,It=new WeakMap,Zt=new WeakMap,ge=new WeakMap,fe=new WeakMap,Oe=new WeakSet,Ss=function(dt){dt.altKey||dt.shiftKey||dt.ctrlKey||dt.metaKey||(dt.key==="Enter"||dt.key==="Escape"&&y(this,te))&&xt(this,Ne,Ui).call(this)},Ne=new WeakSet,Ui=function(){Ut(this,te,!y(this,te)),y(this,te)?(xt(this,qe,Mr).call(this),y(this,Qt).addEventListener("click",y(this,Jt)),y(this,Qt).addEventListener("keydown",y(this,zt))):(xt(this,Je,Rr).call(this),y(this,Qt).removeEventListener("click",y(this,Jt)),y(this,Qt).removeEventListener("keydown",y(this,zt)))},qe=new WeakSet,Mr=function(){y(this,jt)||this.render(),this.isVisible?y(this,te)&&y(this,Qt).classList.add("focused"):(y(this,Qt).hidden=!1,y(this,Qt).style.zIndex=parseInt(y(this,Qt).style.zIndex)+1e3)},Je=new WeakSet,Rr=function(){y(this,Qt).classList.remove("focused"),!(y(this,te)||!this.isVisible)&&(y(this,Qt).hidden=!0,y(this,Qt).style.zIndex=parseInt(y(this,Qt).style.zIndex)-1e3)};class at extends X{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=dt.data.textContent,this.textPosition=dt.data.textPosition,this.annotationEditorType=L.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const dt=document.createElement("div");dt.classList.add("annotationTextContent"),dt.setAttribute("role","comment");for(const A of this.textContent){const G=document.createElement("span");G.textContent=A,dt.append(G)}this.container.append(dt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}D.FreeTextAnnotationElement=at;class Y extends X{constructor(A){super(A,{isRenderable:!0,ignoreBorder:!0});mt(this,Mt,null)}render(){this.container.classList.add("lineAnnotation");const A=this.data,{width:G,height:ft}=gt(A.rect),Pt=this.svgFactory.create(G,ft,!0),Ft=Ut(this,Mt,this.svgFactory.createElement("svg:line"));return Ft.setAttribute("x1",A.rect[2]-A.lineCoordinates[0]),Ft.setAttribute("y1",A.rect[3]-A.lineCoordinates[1]),Ft.setAttribute("x2",A.rect[2]-A.lineCoordinates[2]),Ft.setAttribute("y2",A.rect[3]-A.lineCoordinates[3]),Ft.setAttribute("stroke-width",A.borderStyle.width||1),Ft.setAttribute("stroke","transparent"),Ft.setAttribute("fill","transparent"),Pt.append(Ft),this.container.append(Pt),!A.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,Mt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mt=new WeakMap;class St extends X{constructor(A){super(A,{isRenderable:!0,ignoreBorder:!0});mt(this,wt,null)}render(){this.container.classList.add("squareAnnotation");const A=this.data,{width:G,height:ft}=gt(A.rect),Pt=this.svgFactory.create(G,ft,!0),Ft=A.borderStyle.width,Vt=Ut(this,wt,this.svgFactory.createElement("svg:rect"));return Vt.setAttribute("x",Ft/2),Vt.setAttribute("y",Ft/2),Vt.setAttribute("width",G-Ft),Vt.setAttribute("height",ft-Ft),Vt.setAttribute("stroke-width",Ft||1),Vt.setAttribute("stroke","transparent"),Vt.setAttribute("fill","transparent"),Pt.append(Vt),this.container.append(Pt),!A.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,wt)}addHighlightArea(){this.container.classList.add("highlightArea")}}wt=new WeakMap;class kt extends X{constructor(A){super(A,{isRenderable:!0,ignoreBorder:!0});mt(this,ae,null)}render(){this.container.classList.add("circleAnnotation");const A=this.data,{width:G,height:ft}=gt(A.rect),Pt=this.svgFactory.create(G,ft,!0),Ft=A.borderStyle.width,Vt=Ut(this,ae,this.svgFactory.createElement("svg:ellipse"));return Vt.setAttribute("cx",G/2),Vt.setAttribute("cy",ft/2),Vt.setAttribute("rx",G/2-Ft/2),Vt.setAttribute("ry",ft/2-Ft/2),Vt.setAttribute("stroke-width",Ft||1),Vt.setAttribute("stroke","transparent"),Vt.setAttribute("fill","transparent"),Pt.append(Vt),this.container.append(Pt),!A.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,ae)}addHighlightArea(){this.container.classList.add("highlightArea")}}ae=new WeakMap;class it extends X{constructor(A){super(A,{isRenderable:!0,ignoreBorder:!0});mt(this,Kt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const A=this.data,{width:G,height:ft}=gt(A.rect),Pt=this.svgFactory.create(G,ft,!0);let Ft=[];for(const re of A.vertices){const ye=re.x-A.rect[0],ve=A.rect[3]-re.y;Ft.push(ye+","+ve)}Ft=Ft.join(" ");const Vt=Ut(this,Kt,this.svgFactory.createElement(this.svgElementName));return Vt.setAttribute("points",Ft),Vt.setAttribute("stroke-width",A.borderStyle.width||1),Vt.setAttribute("stroke","transparent"),Vt.setAttribute("fill","transparent"),Pt.append(Vt),this.container.append(Pt),!A.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,Kt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kt=new WeakMap;class Rt extends it{constructor(dt){super(dt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Wt extends X{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class qt extends X{constructor(A){super(A,{isRenderable:!0,ignoreBorder:!0});mt(this,an,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=L.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const A=this.data,{width:G,height:ft}=gt(A.rect),Pt=this.svgFactory.create(G,ft,!0);for(const Ft of A.inkLists){let Vt=[];for(const ye of Ft){const ve=ye.x-A.rect[0],Ve=A.rect[3]-ye.y;Vt.push(`${ve},${Ve}`)}Vt=Vt.join(" ");const re=this.svgFactory.createElement(this.svgElementName);y(this,an).push(re),re.setAttribute("points",Vt),re.setAttribute("stroke-width",A.borderStyle.width||1),re.setAttribute("stroke","transparent"),re.setAttribute("fill","transparent"),!A.popupRef&&this.hasPopupData&&this._createPopup(),Pt.append(re)}return this.container.append(Pt),this.container}getElementsToTriggerPopup(){return y(this,an)}addHighlightArea(){this.container.classList.add("highlightArea")}}an=new WeakMap,D.InkAnnotationElement=qt;class Ct extends X{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Yt extends X{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ne extends X{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class de extends X{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class _e extends X{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}D.StampAnnotationElement=_e;class et extends X{constructor(A){var Pt;super(A,{isRenderable:!0});mt(this,Dt);mt(this,mn,null);const{filename:G,content:ft}=this.data.file;this.filename=(0,$.getFilenameFromUrl)(G,!0),this.content=ft,(Pt=this.linkService.eventBus)==null||Pt.dispatch("fileattachmentannotation",{source:this,filename:G,content:ft})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:A,data:G}=this;let ft;G.hasAppearance||G.fillAlpha===0?ft=document.createElement("div"):(ft=document.createElement("img"),ft.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(G.name)?"paperclip":"pushpin"}.svg`,G.fillAlpha&&G.fillAlpha<1&&(ft.style=`filter: opacity(${Math.round(G.fillAlpha*100)}%);`)),ft.addEventListener("dblclick",xt(this,Dt,Fr).bind(this)),Ut(this,mn,ft);const{isMac:Pt}=L.FeatureTest.platform;return A.addEventListener("keydown",Ft=>{Ft.key==="Enter"&&(Pt?Ft.metaKey:Ft.ctrlKey)&&xt(this,Dt,Fr).call(this)}),!G.popupRef&&this.hasPopupData?this._createPopup():ft.classList.add("popupTriggerArea"),A.append(ft),A}getElementsToTriggerPopup(){return y(this,mn)}addHighlightArea(){this.container.classList.add("highlightArea")}}mn=new WeakMap,Dt=new WeakSet,Fr=function(){var A;(A=this.downloadManager)==null||A.openOrDownloadData(this.container,this.content,this.filename)};class w{constructor({div:dt,accessibilityManager:A,annotationCanvasMap:G,l10n:ft,page:Pt,viewport:Ft}){mt(this,Me);mt(this,oe);mt(this,Te,null);mt(this,me,null);mt(this,ke,new Map);this.div=dt,Ut(this,Te,A),Ut(this,me,G),this.l10n=ft,this.page=Pt,this.viewport=Ft,this.zIndex=0,this.l10n||(this.l10n=$t.NullL10n)}async render(dt){const{annotations:A}=dt,G=this.div;(0,$.setLayerDimensions)(G,this.viewport);const ft=new Map,Pt={data:null,layer:G,linkService:dt.linkService,downloadManager:dt.downloadManager,imageResourcesPath:dt.imageResourcesPath||"",renderForms:dt.renderForms!==!1,svgFactory:new $.DOMSVGFactory,annotationStorage:dt.annotationStorage||new _.AnnotationStorage,enableScripting:dt.enableScripting===!0,hasJSActions:dt.hasJSActions,fieldObjects:dt.fieldObjects,parent:this,elements:null};for(const Ft of A){if(Ft.noHTML)continue;const Vt=Ft.annotationType===L.AnnotationType.POPUP;if(Vt){const ve=ft.get(Ft.id);if(!ve)continue;Pt.elements=ve}else{const{width:ve,height:Ve}=gt(Ft.rect);if(ve<=0||Ve<=0)continue}Pt.data=Ft;const re=nt.create(Pt);if(!re.isRenderable)continue;if(!Vt&&Ft.popupRef){const ve=ft.get(Ft.popupRef);ve?ve.push(re):ft.set(Ft.popupRef,[re])}re.annotationEditorType>0&&y(this,ke).set(re.data.id,re);const ye=re.render();Ft.hidden&&(ye.style.visibility="hidden"),xt(this,Me,Es).call(this,ye,Ft.id)}xt(this,oe,Lr).call(this),await this.l10n.translate(G)}update({viewport:dt}){const A=this.div;this.viewport=dt,(0,$.setLayerDimensions)(A,{rotation:dt.rotation}),xt(this,oe,Lr).call(this),A.hidden=!1}getEditableAnnotations(){return Array.from(y(this,ke).values())}getEditableAnnotation(dt){return y(this,ke).get(dt)}}Te=new WeakMap,me=new WeakMap,ke=new WeakMap,Me=new WeakSet,Es=function(dt,A){var ft;const G=dt.firstChild||dt;G.id=`${L.AnnotationPrefix}${A}`,this.div.append(dt),(ft=y(this,Te))==null||ft.moveElementInDOM(this.div,dt,G,!1)},oe=new WeakSet,Lr=function(){if(!y(this,me))return;const dt=this.div;for(const[A,G]of y(this,me)){const ft=dt.querySelector(`[data-annotation-id="${A}"]`);if(!ft)continue;const{firstChild:Pt}=ft;Pt?Pt.nodeName==="CANVAS"?Pt.replaceWith(G):Pt.before(G):ft.append(G)}y(this,me).clear()},D.AnnotationLayer=w},(x,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.ColorConverters=void 0;function _t(_){return Math.floor(Math.max(0,Math.min(1,_))*255).toString(16).padStart(2,"0")}function L(_){return Math.max(0,Math.min(255,255*_))}class ${static CMYK_G([ot,$t,pt,lt]){return["G",1-Math.min(1,.3*ot+.59*pt+.11*$t+lt)]}static G_CMYK([ot]){return["CMYK",0,0,0,1-ot]}static G_RGB([ot]){return["RGB",ot,ot,ot]}static G_rgb([ot]){return ot=L(ot),[ot,ot,ot]}static G_HTML([ot]){const $t=_t(ot);return`#${$t}${$t}${$t}`}static RGB_G([ot,$t,pt]){return["G",.3*ot+.59*$t+.11*pt]}static RGB_rgb(ot){return ot.map(L)}static RGB_HTML(ot){return`#${ot.map(_t).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([ot,$t,pt,lt]){return["RGB",1-Math.min(1,ot+lt),1-Math.min(1,pt+lt),1-Math.min(1,$t+lt)]}static CMYK_rgb([ot,$t,pt,lt]){return[L(1-Math.min(1,ot+lt)),L(1-Math.min(1,pt+lt)),L(1-Math.min(1,$t+lt))]}static CMYK_HTML(ot){const $t=this.CMYK_RGB(ot).slice(1);return this.RGB_HTML($t)}static RGB_CMYK([ot,$t,pt]){const lt=1-ot,U=1-$t,vt=1-pt,gt=Math.min(lt,U,vt);return["CMYK",lt,U,vt,gt]}}D.ColorConverters=$},(x,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.NullL10n=void 0,D.getL10nFallback=L;const _t={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};_t.print_progress_percent="{{progress}}%";function L(ot,$t){switch(ot){case"find_match_count":ot=`find_match_count[${$t.total===1?"one":"other"}]`;break;case"find_match_count_limit":ot=`find_match_count_limit[${$t.limit===1?"one":"other"}]`;break}return _t[ot]||""}function $(ot,$t){return $t?ot.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(pt,lt)=>lt in $t?$t[lt]:"{{"+lt+"}}"):ot}const _={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(ot,$t=null,pt=L(ot,$t)){return $(pt,$t)},async translate(ot){}};D.NullL10n=_},(x,D,_t)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.XfaLayer=void 0;var L=_t(25);class ${static setupStorage(ot,$t,pt,lt,U){const vt=lt.getValue($t,{value:null});switch(pt.name){case"textarea":if(vt.value!==null&&(ot.textContent=vt.value),U==="print")break;ot.addEventListener("input",gt=>{lt.setValue($t,{value:gt.target.value})});break;case"input":if(pt.attributes.type==="radio"||pt.attributes.type==="checkbox"){if(vt.value===pt.attributes.xfaOn?ot.setAttribute("checked",!0):vt.value===pt.attributes.xfaOff&&ot.removeAttribute("checked"),U==="print")break;ot.addEventListener("change",gt=>{lt.setValue($t,{value:gt.target.checked?gt.target.getAttribute("xfaOn"):gt.target.getAttribute("xfaOff")})})}else{if(vt.value!==null&&ot.setAttribute("value",vt.value),U==="print")break;ot.addEventListener("input",gt=>{lt.setValue($t,{value:gt.target.value})})}break;case"select":if(vt.value!==null){ot.setAttribute("value",vt.value);for(const gt of pt.children)gt.attributes.value===vt.value?gt.attributes.selected=!0:gt.attributes.hasOwnProperty("selected")&&delete gt.attributes.selected}ot.addEventListener("input",gt=>{const nt=gt.target.options,X=nt.selectedIndex===-1?"":nt[nt.selectedIndex].value;lt.setValue($t,{value:X})});break}}static setAttributes({html:ot,element:$t,storage:pt=null,intent:lt,linkService:U}){const{attributes:vt}=$t,gt=ot instanceof HTMLAnchorElement;vt.type==="radio"&&(vt.name=`${vt.name}-${lt}`);for(const[nt,X]of Object.entries(vt))if(X!=null)switch(nt){case"class":X.length&&ot.setAttribute(nt,X.join(" "));break;case"dataId":break;case"id":ot.setAttribute("data-element-id",X);break;case"style":Object.assign(ot.style,X);break;case"textContent":ot.textContent=X;break;default:(!gt||nt!=="href"&&nt!=="newWindow")&&ot.setAttribute(nt,X)}gt&&U.addLinkAttributes(ot,vt.href,vt.newWindow),pt&&vt.dataId&&this.setupStorage(ot,vt.dataId,$t,pt)}static render(ot){var Q;const $t=ot.annotationStorage,pt=ot.linkService,lt=ot.xfaHtml,U=ot.intent||"display",vt=document.createElement(lt.name);lt.attributes&&this.setAttributes({html:vt,element:lt,intent:U,linkService:pt});const gt=[[lt,-1,vt]],nt=ot.div;if(nt.append(vt),ot.viewport){const V=`matrix(${ot.viewport.transform.join(",")})`;nt.style.transform=V}U!=="richText"&&nt.setAttribute("class","xfaLayer xfaFont");const X=[];for(;gt.length>0;){const[V,J,st]=gt.at(-1);if(J+1===V.children.length){gt.pop();continue}const rt=V.children[++gt.at(-1)[1]];if(rt===null)continue;const{name:tt}=rt;if(tt==="#text"){const H=document.createTextNode(rt.value);X.push(H),st.append(H);continue}const O=(Q=rt==null?void 0:rt.attributes)!=null&&Q.xmlns?document.createElementNS(rt.attributes.xmlns,tt):document.createElement(tt);if(st.append(O),rt.attributes&&this.setAttributes({html:O,element:rt,storage:$t,intent:U,linkService:pt}),rt.children&&rt.children.length>0)gt.push([rt,-1,O]);else if(rt.value){const H=document.createTextNode(rt.value);L.XfaText.shouldBuildText(tt)&&X.push(H),O.append(H)}}for(const V of nt.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))V.setAttribute("readOnly",!0);return{textDivs:X}}static update(ot){const $t=`matrix(${ot.viewport.transform.join(",")})`;ot.div.style.transform=$t,ot.div.hidden=!1}}D.XfaLayer=$},(x,D,_t)=>{var lt,U,vt,gt,nt,X,Q,V,J,st,rt,tt,O,H,ct,ws,N,Cs,Y,Ps,kt,Ts,Rt,Dr,qt,ks,Yt,Ir,de,xs,et,Ms,R,Rs,B,Fs,K,Ls,yt,ei,Bt,Or,Jt,Wi,Qt,$i,Re,mi,Ce,Nr,jt,Vi,Zt,Ds,fe,Br,ze,Is,We,Os,Fe,jr,Xt,Gi,wt,vi;Object.defineProperty(D,"__esModule",{value:!0}),D.InkEditor=void 0;var L=_t(1),$=_t(4),_=_t(29),ot=_t(6),$t=_t(5);const Kt=class Kt extends $.AnnotationEditor{constructor(Dt){super({...Dt,name:"inkEditor"});mt(this,ct);mt(this,N);mt(this,Y);mt(this,kt);mt(this,Rt);mt(this,qt);mt(this,Yt);mt(this,de);mt(this,et);mt(this,R);mt(this,B);mt(this,K);mt(this,yt);mt(this,Bt);mt(this,Jt);mt(this,Qt);mt(this,Re);mt(this,Ce);mt(this,jt);mt(this,We);mt(this,Fe);mt(this,Xt);mt(this,wt);mt(this,lt,0);mt(this,U,0);mt(this,vt,this.canvasPointermove.bind(this));mt(this,gt,this.canvasPointerleave.bind(this));mt(this,nt,this.canvasPointerup.bind(this));mt(this,X,this.canvasPointerdown.bind(this));mt(this,Q,new Path2D);mt(this,V,!1);mt(this,J,!1);mt(this,st,!1);mt(this,rt,null);mt(this,tt,0);mt(this,O,0);mt(this,H,null);this.color=Dt.color||null,this.thickness=Dt.thickness||null,this.opacity=Dt.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Dt){$.AnnotationEditor.initialize(Dt,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Dt,ue){switch(Dt){case L.AnnotationEditorParamsType.INK_THICKNESS:Kt._defaultThickness=ue;break;case L.AnnotationEditorParamsType.INK_COLOR:Kt._defaultColor=ue;break;case L.AnnotationEditorParamsType.INK_OPACITY:Kt._defaultOpacity=ue/100;break}}updateParams(Dt,ue){switch(Dt){case L.AnnotationEditorParamsType.INK_THICKNESS:xt(this,ct,ws).call(this,ue);break;case L.AnnotationEditorParamsType.INK_COLOR:xt(this,N,Cs).call(this,ue);break;case L.AnnotationEditorParamsType.INK_OPACITY:xt(this,Y,Ps).call(this,ue);break}}static get defaultPropertiesToUpdate(){return[[L.AnnotationEditorParamsType.INK_THICKNESS,Kt._defaultThickness],[L.AnnotationEditorParamsType.INK_COLOR,Kt._defaultColor||$.AnnotationEditor._defaultLineColor],[L.AnnotationEditorParamsType.INK_OPACITY,Math.round(Kt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[L.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Kt._defaultThickness],[L.AnnotationEditorParamsType.INK_COLOR,this.color||Kt._defaultColor||$.AnnotationEditor._defaultLineColor],[L.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Kt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(xt(this,Jt,Wi).call(this),xt(this,Qt,$i).call(this)),this.isAttachedToDOM||(this.parent.add(this),xt(this,Re,mi).call(this)),xt(this,wt,vi).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,y(this,rt).disconnect(),Ut(this,rt,null),super.remove())}setParent(Dt){!this.parent&&Dt?this._uiManager.removeShouldRescale(this):this.parent&&Dt===null&&this._uiManager.addShouldRescale(this),super.setParent(Dt)}onScaleChanging(){const[Dt,ue]=this.parentDimensions,Te=this.width*Dt,me=this.height*ue;this.setDimensions(Te,me)}enableEditMode(){y(this,V)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",y(this,X)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",y(this,X)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){y(this,V)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Ut(this,V,!0),this.div.classList.add("disabled"),xt(this,wt,vi).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Dt){this._focusEventsAllowed&&(super.focusin(Dt),this.enableEditMode())}canvasPointerdown(Dt){Dt.button!==0||!this.isInEditMode()||y(this,V)||(this.setInForeground(),Dt.preventDefault(),Dt.type!=="mouse"&&this.div.focus(),xt(this,qt,ks).call(this,Dt.offsetX,Dt.offsetY))}canvasPointermove(Dt){Dt.preventDefault(),xt(this,Yt,Ir).call(this,Dt.offsetX,Dt.offsetY)}canvasPointerup(Dt){Dt.preventDefault(),xt(this,Bt,Or).call(this,Dt)}canvasPointerleave(Dt){xt(this,Bt,Or).call(this,Dt)}get isResizable(){return!this.isEmpty()&&y(this,V)}render(){if(this.div)return this.div;let Dt,ue;this.width&&(Dt=this.x,ue=this.y),super.render(),$.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(un=>{var oe;return(oe=this.div)==null?void 0:oe.setAttribute("aria-label",un)});const[Te,me,ke,Me]=xt(this,kt,Ts).call(this);if(this.setAt(Te,me,0,0),this.setDims(ke,Me),xt(this,Jt,Wi).call(this),this.width){const[un,oe]=this.parentDimensions;this.setAspectRatio(this.width*un,this.height*oe),this.setAt(Dt*un,ue*oe,this.width*un,this.height*oe),Ut(this,st,!0),xt(this,Re,mi).call(this),this.setDims(this.width*un,this.height*oe),xt(this,yt,ei).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return xt(this,Qt,$i).call(this),this.div}setDimensions(Dt,ue){const Te=Math.round(Dt),me=Math.round(ue);if(y(this,tt)===Te&&y(this,O)===me)return;Ut(this,tt,Te),Ut(this,O,me),this.canvas.style.visibility="hidden";const[ke,Me]=this.parentDimensions;this.width=Dt/ke,this.height=ue/Me,this.fixAndSetPosition(),y(this,V)&&xt(this,Ce,Nr).call(this,Dt,ue),xt(this,Re,mi).call(this),xt(this,yt,ei).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Dt,ue,Te){var Pt,Ft,Vt;if(Dt instanceof _.InkAnnotationElement)return null;const me=super.deserialize(Dt,ue,Te);me.thickness=Dt.thickness,me.color=L.Util.makeHexColor(...Dt.color),me.opacity=Dt.opacity;const[ke,Me]=me.pageDimensions,un=me.width*ke,oe=me.height*Me,nn=me.parentScale,Pe=Dt.thickness/2;Ut(me,V,!0),Ut(me,tt,Math.round(un)),Ut(me,O,Math.round(oe));const{paths:dt,rect:A,rotation:G}=Dt;for(let{bezier:re}of dt){re=xt(Pt=Kt,ze,Is).call(Pt,re,A,G);const ye=[];me.paths.push(ye);let ve=nn*(re[0]-Pe),Ve=nn*(re[1]-Pe);for(let we=2,Be=re.length;we<Be;we+=6){const Ze=nn*(re[we]-Pe),cn=nn*(re[we+1]-Pe),pn=nn*(re[we+2]-Pe),On=nn*(re[we+3]-Pe),Tn=nn*(re[we+4]-Pe),Vn=nn*(re[we+5]-Pe);ye.push([[ve,Ve],[Ze,cn],[pn,On],[Tn,Vn]]),ve=Tn,Ve=Vn}const Ee=xt(this,Zt,Ds).call(this,ye);me.bezierPath2D.push(Ee)}const ft=xt(Ft=me,Fe,jr).call(Ft);return Ut(me,U,Math.max($.AnnotationEditor.MIN_SIZE,ft[2]-ft[0])),Ut(me,lt,Math.max($.AnnotationEditor.MIN_SIZE,ft[3]-ft[1])),xt(Vt=me,Ce,Nr).call(Vt,un,oe),me}serialize(){if(this.isEmpty())return null;const Dt=this.getRect(0,0),ue=$.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:L.AnnotationEditorType.INK,color:ue,thickness:this.thickness,opacity:this.opacity,paths:xt(this,We,Os).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Dt),pageIndex:this.pageIndex,rect:Dt,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};lt=new WeakMap,U=new WeakMap,vt=new WeakMap,gt=new WeakMap,nt=new WeakMap,X=new WeakMap,Q=new WeakMap,V=new WeakMap,J=new WeakMap,st=new WeakMap,rt=new WeakMap,tt=new WeakMap,O=new WeakMap,H=new WeakMap,ct=new WeakSet,ws=function(Dt){const ue=this.thickness;this.addCommands({cmd:()=>{this.thickness=Dt,xt(this,wt,vi).call(this)},undo:()=>{this.thickness=ue,xt(this,wt,vi).call(this)},mustExec:!0,type:L.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},N=new WeakSet,Cs=function(Dt){const ue=this.color;this.addCommands({cmd:()=>{this.color=Dt,xt(this,yt,ei).call(this)},undo:()=>{this.color=ue,xt(this,yt,ei).call(this)},mustExec:!0,type:L.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Y=new WeakSet,Ps=function(Dt){Dt/=100;const ue=this.opacity;this.addCommands({cmd:()=>{this.opacity=Dt,xt(this,yt,ei).call(this)},undo:()=>{this.opacity=ue,xt(this,yt,ei).call(this)},mustExec:!0,type:L.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},kt=new WeakSet,Ts=function(){const{parentRotation:Dt,parentDimensions:[ue,Te]}=this;switch(Dt){case 90:return[0,Te,Te,ue];case 180:return[ue,Te,ue,Te];case 270:return[ue,0,Te,ue];default:return[0,0,ue,Te]}},Rt=new WeakSet,Dr=function(){const{ctx:Dt,color:ue,opacity:Te,thickness:me,parentScale:ke,scaleFactor:Me}=this;Dt.lineWidth=me*ke/Me,Dt.lineCap="round",Dt.lineJoin="round",Dt.miterLimit=10,Dt.strokeStyle=`${ue}${(0,$t.opacityToHex)(Te)}`},qt=new WeakSet,ks=function(Dt,ue){this.canvas.addEventListener("contextmenu",ot.noContextMenu),this.canvas.addEventListener("pointerleave",y(this,gt)),this.canvas.addEventListener("pointermove",y(this,vt)),this.canvas.addEventListener("pointerup",y(this,nt)),this.canvas.removeEventListener("pointerdown",y(this,X)),this.isEditing=!0,y(this,st)||(Ut(this,st,!0),xt(this,Re,mi).call(this),this.thickness||(this.thickness=Kt._defaultThickness),this.color||(this.color=Kt._defaultColor||$.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Kt._defaultOpacity)),this.currentPath.push([Dt,ue]),Ut(this,J,!1),xt(this,Rt,Dr).call(this),Ut(this,H,()=>{xt(this,R,Rs).call(this),y(this,H)&&window.requestAnimationFrame(y(this,H))}),window.requestAnimationFrame(y(this,H))},Yt=new WeakSet,Ir=function(Dt,ue){const[Te,me]=this.currentPath.at(-1);if(this.currentPath.length>1&&Dt===Te&&ue===me)return;const ke=this.currentPath;let Me=y(this,Q);if(ke.push([Dt,ue]),Ut(this,J,!0),ke.length<=2){Me.moveTo(...ke[0]),Me.lineTo(Dt,ue);return}ke.length===3&&(Ut(this,Q,Me=new Path2D),Me.moveTo(...ke[0])),xt(this,B,Fs).call(this,Me,...ke.at(-3),...ke.at(-2),Dt,ue)},de=new WeakSet,xs=function(){if(this.currentPath.length===0)return;const Dt=this.currentPath.at(-1);y(this,Q).lineTo(...Dt)},et=new WeakSet,Ms=function(Dt,ue){Ut(this,H,null),Dt=Math.min(Math.max(Dt,0),this.canvas.width),ue=Math.min(Math.max(ue,0),this.canvas.height),xt(this,Yt,Ir).call(this,Dt,ue),xt(this,de,xs).call(this);let Te;if(this.currentPath.length!==1)Te=xt(this,K,Ls).call(this);else{const oe=[Dt,ue];Te=[[oe,oe.slice(),oe.slice(),oe]]}const me=y(this,Q),ke=this.currentPath;this.currentPath=[],Ut(this,Q,new Path2D);const Me=()=>{this.allRawPaths.push(ke),this.paths.push(Te),this.bezierPath2D.push(me),this.rebuild()},un=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(xt(this,Jt,Wi).call(this),xt(this,Qt,$i).call(this)),xt(this,wt,vi).call(this))};this.addCommands({cmd:Me,undo:un,mustExec:!0})},R=new WeakSet,Rs=function(){if(!y(this,J))return;Ut(this,J,!1);const Dt=Math.ceil(this.thickness*this.parentScale),ue=this.currentPath.slice(-3),Te=ue.map(Me=>Me[0]),me=ue.map(Me=>Me[1]);Math.min(...Te)-Dt,Math.max(...Te)+Dt,Math.min(...me)-Dt,Math.max(...me)+Dt;const{ctx:ke}=this;ke.save(),ke.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Me of this.bezierPath2D)ke.stroke(Me);ke.stroke(y(this,Q)),ke.restore()},B=new WeakSet,Fs=function(Dt,ue,Te,me,ke,Me,un){const oe=(ue+me)/2,nn=(Te+ke)/2,Pe=(me+Me)/2,dt=(ke+un)/2;Dt.bezierCurveTo(oe+2*(me-oe)/3,nn+2*(ke-nn)/3,Pe+2*(me-Pe)/3,dt+2*(ke-dt)/3,Pe,dt)},K=new WeakSet,Ls=function(){const Dt=this.currentPath;if(Dt.length<=2)return[[Dt[0],Dt[0],Dt.at(-1),Dt.at(-1)]];const ue=[];let Te,[me,ke]=Dt[0];for(Te=1;Te<Dt.length-2;Te++){const[A,G]=Dt[Te],[ft,Pt]=Dt[Te+1],Ft=(A+ft)/2,Vt=(G+Pt)/2,re=[me+2*(A-me)/3,ke+2*(G-ke)/3],ye=[Ft+2*(A-Ft)/3,Vt+2*(G-Vt)/3];ue.push([[me,ke],re,ye,[Ft,Vt]]),[me,ke]=[Ft,Vt]}const[Me,un]=Dt[Te],[oe,nn]=Dt[Te+1],Pe=[me+2*(Me-me)/3,ke+2*(un-ke)/3],dt=[oe+2*(Me-oe)/3,nn+2*(un-nn)/3];return ue.push([[me,ke],Pe,dt,[oe,nn]]),ue},yt=new WeakSet,ei=function(){if(this.isEmpty()){xt(this,jt,Vi).call(this);return}xt(this,Rt,Dr).call(this);const{canvas:Dt,ctx:ue}=this;ue.setTransform(1,0,0,1,0,0),ue.clearRect(0,0,Dt.width,Dt.height),xt(this,jt,Vi).call(this);for(const Te of this.bezierPath2D)ue.stroke(Te)},Bt=new WeakSet,Or=function(Dt){this.canvas.removeEventListener("pointerleave",y(this,gt)),this.canvas.removeEventListener("pointermove",y(this,vt)),this.canvas.removeEventListener("pointerup",y(this,nt)),this.canvas.addEventListener("pointerdown",y(this,X)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",ot.noContextMenu)},10),xt(this,et,Ms).call(this,Dt.offsetX,Dt.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Jt=new WeakSet,Wi=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",$.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Dt=>{var ue;return(ue=this.canvas)==null?void 0:ue.setAttribute("aria-label",Dt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Qt=new WeakSet,$i=function(){Ut(this,rt,new ResizeObserver(Dt=>{const ue=Dt[0].contentRect;ue.width&&ue.height&&this.setDimensions(ue.width,ue.height)})),y(this,rt).observe(this.div)},Re=new WeakSet,mi=function(){if(!y(this,st))return;const[Dt,ue]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Dt),this.canvas.height=Math.ceil(this.height*ue),xt(this,jt,Vi).call(this)},Ce=new WeakSet,Nr=function(Dt,ue){const Te=xt(this,Xt,Gi).call(this),me=(Dt-Te)/y(this,U),ke=(ue-Te)/y(this,lt);this.scaleFactor=Math.min(me,ke)},jt=new WeakSet,Vi=function(){const Dt=xt(this,Xt,Gi).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Dt,this.translationY*this.scaleFactor+Dt)},Zt=new WeakSet,Ds=function(Dt){const ue=new Path2D;for(let Te=0,me=Dt.length;Te<me;Te++){const[ke,Me,un,oe]=Dt[Te];Te===0&&ue.moveTo(...ke),ue.bezierCurveTo(Me[0],Me[1],un[0],un[1],oe[0],oe[1])}return ue},fe=new WeakSet,Br=function(Dt,ue,Te){const[me,ke,Me,un]=ue;switch(Te){case 0:for(let oe=0,nn=Dt.length;oe<nn;oe+=2)Dt[oe]+=me,Dt[oe+1]=un-Dt[oe+1];break;case 90:for(let oe=0,nn=Dt.length;oe<nn;oe+=2){const Pe=Dt[oe];Dt[oe]=Dt[oe+1]+me,Dt[oe+1]=Pe+ke}break;case 180:for(let oe=0,nn=Dt.length;oe<nn;oe+=2)Dt[oe]=Me-Dt[oe],Dt[oe+1]+=ke;break;case 270:for(let oe=0,nn=Dt.length;oe<nn;oe+=2){const Pe=Dt[oe];Dt[oe]=Me-Dt[oe+1],Dt[oe+1]=un-Pe}break;default:throw new Error("Invalid rotation")}return Dt},ze=new WeakSet,Is=function(Dt,ue,Te){const[me,ke,Me,un]=ue;switch(Te){case 0:for(let oe=0,nn=Dt.length;oe<nn;oe+=2)Dt[oe]-=me,Dt[oe+1]=un-Dt[oe+1];break;case 90:for(let oe=0,nn=Dt.length;oe<nn;oe+=2){const Pe=Dt[oe];Dt[oe]=Dt[oe+1]-ke,Dt[oe+1]=Pe-me}break;case 180:for(let oe=0,nn=Dt.length;oe<nn;oe+=2)Dt[oe]=Me-Dt[oe],Dt[oe+1]-=ke;break;case 270:for(let oe=0,nn=Dt.length;oe<nn;oe+=2){const Pe=Dt[oe];Dt[oe]=un-Dt[oe+1],Dt[oe+1]=Me-Pe}break;default:throw new Error("Invalid rotation")}return Dt},We=new WeakSet,Os=function(Dt,ue,Te,me){var nn,Pe;const ke=[],Me=this.thickness/2,un=Dt*ue+Me,oe=Dt*Te+Me;for(const dt of this.paths){const A=[],G=[];for(let ft=0,Pt=dt.length;ft<Pt;ft++){const[Ft,Vt,re,ye]=dt[ft],ve=Dt*Ft[0]+un,Ve=Dt*Ft[1]+oe,Ee=Dt*Vt[0]+un,we=Dt*Vt[1]+oe,Be=Dt*re[0]+un,Ze=Dt*re[1]+oe,cn=Dt*ye[0]+un,pn=Dt*ye[1]+oe;ft===0&&(A.push(ve,Ve),G.push(ve,Ve)),A.push(Ee,we,Be,Ze,cn,pn),G.push(Ee,we),ft===Pt-1&&G.push(cn,pn)}ke.push({bezier:xt(nn=Kt,fe,Br).call(nn,A,me,this.rotation),points:xt(Pe=Kt,fe,Br).call(Pe,G,me,this.rotation)})}return ke},Fe=new WeakSet,jr=function(){let Dt=1/0,ue=-1/0,Te=1/0,me=-1/0;for(const ke of this.paths)for(const[Me,un,oe,nn]of ke){const Pe=L.Util.bezierBoundingBox(...Me,...un,...oe,...nn);Dt=Math.min(Dt,Pe[0]),Te=Math.min(Te,Pe[1]),ue=Math.max(ue,Pe[2]),me=Math.max(me,Pe[3])}return[Dt,Te,ue,me]},Xt=new WeakSet,Gi=function(){return y(this,V)?Math.ceil(this.thickness*this.parentScale):0},wt=new WeakSet,vi=function(Dt=!1){if(this.isEmpty())return;if(!y(this,V)){xt(this,yt,ei).call(this);return}const ue=xt(this,Fe,jr).call(this),Te=xt(this,Xt,Gi).call(this);Ut(this,U,Math.max($.AnnotationEditor.MIN_SIZE,ue[2]-ue[0])),Ut(this,lt,Math.max($.AnnotationEditor.MIN_SIZE,ue[3]-ue[1]));const me=Math.ceil(Te+y(this,U)*this.scaleFactor),ke=Math.ceil(Te+y(this,lt)*this.scaleFactor),[Me,un]=this.parentDimensions;this.width=me/Me,this.height=ke/un,this.setAspectRatio(me,ke);const oe=this.translationX,nn=this.translationY;this.translationX=-ue[0],this.translationY=-ue[1],xt(this,Re,mi).call(this),xt(this,yt,ei).call(this),Ut(this,tt,me),Ut(this,O,ke),this.setDims(me,ke);const Pe=Dt?Te/this.scaleFactor/2:0;this.translate(oe-this.translationX-Pe,nn-this.translationY-Pe)},mt(Kt,Zt),mt(Kt,fe),mt(Kt,ze),Pn(Kt,"_defaultColor",null),Pn(Kt,"_defaultOpacity",1),Pn(Kt,"_defaultThickness",1),Pn(Kt,"_type","ink");let pt=Kt;D.InkEditor=pt},(x,D,_t)=>{var pt,lt,U,vt,gt,nt,X,Q,V,J,st,Pi,tt,Ti,H,qi,q,Hr,at,Ns,St,Bs,it,zr,Wt,Xi,Ct,js;Object.defineProperty(D,"__esModule",{value:!0}),D.StampEditor=void 0;var L=_t(1),$=_t(4),_=_t(6),ot=_t(29);const ne=class ne extends $.AnnotationEditor{constructor(et){super({...et,name:"stampEditor"});mt(this,st);mt(this,tt);mt(this,H);mt(this,q);mt(this,at);mt(this,St);mt(this,it);mt(this,Wt);mt(this,Ct);mt(this,pt,null);mt(this,lt,null);mt(this,U,null);mt(this,vt,null);mt(this,gt,null);mt(this,nt,null);mt(this,X,null);mt(this,Q,null);mt(this,V,!1);mt(this,J,!1);Ut(this,vt,et.bitmapUrl),Ut(this,gt,et.bitmapFile)}static initialize(et){$.AnnotationEditor.initialize(et)}static get supportedTypes(){const et=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,L.shadow)(this,"supportedTypes",et.map(w=>`image/${w}`))}static get supportedTypesStr(){return(0,L.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(et){return this.supportedTypes.includes(et)}static paste(et,w){w.pasteEditor(L.AnnotationEditorType.STAMP,{bitmapFile:et.getAsFile()})}remove(){var et,w;y(this,lt)&&(Ut(this,pt,null),this._uiManager.imageManager.deleteId(y(this,lt)),(et=y(this,nt))==null||et.remove(),Ut(this,nt,null),(w=y(this,X))==null||w.disconnect(),Ut(this,X,null)),super.remove()}rebuild(){if(!this.parent){y(this,lt)&&xt(this,H,qi).call(this);return}super.rebuild(),this.div!==null&&(y(this,lt)&&xt(this,H,qi).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(y(this,U)||y(this,pt)||y(this,vt)||y(this,gt))}get isResizable(){return!0}render(){if(this.div)return this.div;let et,w;if(this.width&&(et=this.x,w=this.y),super.render(),this.div.hidden=!0,y(this,pt)?xt(this,q,Hr).call(this):xt(this,H,qi).call(this),this.width){const[R,T]=this.parentDimensions;this.setAt(et*R,w*T,this.width*R,this.height*T)}return this.div}static deserialize(et,w,R){if(et instanceof ot.StampAnnotationElement)return null;const T=super.deserialize(et,w,R),{rect:B,bitmapUrl:j,bitmapId:K,isSvg:ut,accessibilityData:yt}=et;K&&R.imageManager.isValidId(K)?Ut(T,lt,K):Ut(T,vt,j),Ut(T,V,ut);const[zt,Bt]=T.pageDimensions;return T.width=(B[2]-B[0])/zt,T.height=(B[3]-B[1])/Bt,yt&&(T.altTextData=yt),T}serialize(et=!1,w=null){if(this.isEmpty())return null;const R={annotationType:L.AnnotationEditorType.STAMP,bitmapId:y(this,lt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:y(this,V),structTreeParentId:this._structTreeParentId};if(et)return R.bitmapUrl=xt(this,Wt,Xi).call(this,!0),R.accessibilityData=this.altTextData,R;const{decorative:T,altText:B}=this.altTextData;if(!T&&B&&(R.accessibilityData={type:"Figure",alt:B}),w===null)return R;w.stamps||(w.stamps=new Map);const j=y(this,V)?(R.rect[2]-R.rect[0])*(R.rect[3]-R.rect[1]):null;if(!w.stamps.has(y(this,lt)))w.stamps.set(y(this,lt),{area:j,serialized:R}),R.bitmap=xt(this,Wt,Xi).call(this,!1);else if(y(this,V)){const K=w.stamps.get(y(this,lt));j>K.area&&(K.area=j,K.serialized.bitmap.close(),K.serialized.bitmap=xt(this,Wt,Xi).call(this,!1))}return R}};pt=new WeakMap,lt=new WeakMap,U=new WeakMap,vt=new WeakMap,gt=new WeakMap,nt=new WeakMap,X=new WeakMap,Q=new WeakMap,V=new WeakMap,J=new WeakMap,st=new WeakSet,Pi=function(et,w=!1){if(!et){this.remove();return}Ut(this,pt,et.bitmap),w||(Ut(this,lt,et.id),Ut(this,V,et.isSvg)),xt(this,q,Hr).call(this)},tt=new WeakSet,Ti=function(){Ut(this,U,null),this._uiManager.enableWaiting(!1),y(this,nt)&&this.div.focus()},H=new WeakSet,qi=function(){if(y(this,lt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(y(this,lt)).then(w=>xt(this,st,Pi).call(this,w,!0)).finally(()=>xt(this,tt,Ti).call(this));return}if(y(this,vt)){const w=y(this,vt);Ut(this,vt,null),this._uiManager.enableWaiting(!0),Ut(this,U,this._uiManager.imageManager.getFromUrl(w).then(R=>xt(this,st,Pi).call(this,R)).finally(()=>xt(this,tt,Ti).call(this)));return}if(y(this,gt)){const w=y(this,gt);Ut(this,gt,null),this._uiManager.enableWaiting(!0),Ut(this,U,this._uiManager.imageManager.getFromFile(w).then(R=>xt(this,st,Pi).call(this,R)).finally(()=>xt(this,tt,Ti).call(this)));return}const et=document.createElement("input");et.type="file",et.accept=ne.supportedTypesStr,Ut(this,U,new Promise(w=>{et.addEventListener("change",async()=>{if(!et.files||et.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const R=await this._uiManager.imageManager.getFromFile(et.files[0]);xt(this,st,Pi).call(this,R)}w()}),et.addEventListener("cancel",()=>{this.remove(),w()})}).finally(()=>xt(this,tt,Ti).call(this))),et.click()},q=new WeakSet,Hr=function(){const{div:et}=this;let{width:w,height:R}=y(this,pt);const[T,B]=this.pageDimensions,j=.75;if(this.width)w=this.width*T,R=this.height*B;else if(w>j*T||R>j*B){const zt=Math.min(j*T/w,j*B/R);w*=zt,R*=zt}const[K,ut]=this.parentDimensions;this.setDims(w*K/T,R*ut/B),this._uiManager.enableWaiting(!1);const yt=Ut(this,nt,document.createElement("canvas"));et.append(yt),et.hidden=!1,xt(this,it,zr).call(this,w,R),xt(this,Ct,js).call(this),y(this,J)||(this.parent.addUndoableEditor(this),Ut(this,J,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},at=new WeakSet,Ns=function(et,w){var j;const[R,T]=this.parentDimensions;this.width=et/R,this.height=w/T,this.setDims(et,w),(j=this._initialOptions)!=null&&j.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,y(this,Q)!==null&&clearTimeout(y(this,Q)),Ut(this,Q,setTimeout(()=>{Ut(this,Q,null),xt(this,it,zr).call(this,et,w)},200))},St=new WeakSet,Bs=function(et,w){const{width:R,height:T}=y(this,pt);let B=R,j=T,K=y(this,pt);for(;B>2*et||j>2*w;){const ut=B,yt=j;B>2*et&&(B=B>=16384?Math.floor(B/2)-1:Math.ceil(B/2)),j>2*w&&(j=j>=16384?Math.floor(j/2)-1:Math.ceil(j/2));const zt=new OffscreenCanvas(B,j);zt.getContext("2d").drawImage(K,0,0,ut,yt,0,0,B,j),K=zt.transferToImageBitmap()}return K},it=new WeakSet,zr=function(et,w){et=Math.ceil(et),w=Math.ceil(w);const R=y(this,nt);if(!R||R.width===et&&R.height===w)return;R.width=et,R.height=w;const T=y(this,V)?y(this,pt):xt(this,St,Bs).call(this,et,w),B=R.getContext("2d");B.filter=this._uiManager.hcmFilter,B.drawImage(T,0,0,T.width,T.height,0,0,et,w)},Wt=new WeakSet,Xi=function(et){if(et){if(y(this,V)){const T=this._uiManager.imageManager.getSvgUrl(y(this,lt));if(T)return T}const w=document.createElement("canvas");return{width:w.width,height:w.height}=y(this,pt),w.getContext("2d").drawImage(y(this,pt),0,0),w.toDataURL()}if(y(this,V)){const[w,R]=this.pageDimensions,T=Math.round(this.width*w*_.PixelsPerInch.PDF_TO_CSS_UNITS),B=Math.round(this.height*R*_.PixelsPerInch.PDF_TO_CSS_UNITS),j=new OffscreenCanvas(T,B);return j.getContext("2d").drawImage(y(this,pt),0,0,y(this,pt).width,y(this,pt).height,0,0,T,B),j.transferToImageBitmap()}return structuredClone(y(this,pt))},Ct=new WeakSet,js=function(){Ut(this,X,new ResizeObserver(et=>{const w=et[0].contentRect;w.width&&w.height&&xt(this,at,Ns).call(this,w.width,w.height)})),y(this,X).observe(this.div)},Pn(ne,"_type","stamp");let $t=ne;D.StampEditor=$t}],__webpack_module_cache__={};function __w_pdfjs_require__(x){var D=__webpack_module_cache__[x];if(D!==void 0)return D.exports;var _t=__webpack_module_cache__[x]={exports:{}};return __webpack_modules__[x](_t,_t.exports,__w_pdfjs_require__),_t.exports}var __webpack_exports__={};return(()=>{var x=__webpack_exports__;Object.defineProperty(x,"__esModule",{value:!0}),Object.defineProperty(x,"AbortException",{enumerable:!0,get:function(){return D.AbortException}}),Object.defineProperty(x,"AnnotationEditorLayer",{enumerable:!0,get:function(){return _.AnnotationEditorLayer}}),Object.defineProperty(x,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return D.AnnotationEditorParamsType}}),Object.defineProperty(x,"AnnotationEditorType",{enumerable:!0,get:function(){return D.AnnotationEditorType}}),Object.defineProperty(x,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return ot.AnnotationEditorUIManager}}),Object.defineProperty(x,"AnnotationLayer",{enumerable:!0,get:function(){return $t.AnnotationLayer}}),Object.defineProperty(x,"AnnotationMode",{enumerable:!0,get:function(){return D.AnnotationMode}}),Object.defineProperty(x,"CMapCompressionType",{enumerable:!0,get:function(){return D.CMapCompressionType}}),Object.defineProperty(x,"DOMSVGFactory",{enumerable:!0,get:function(){return L.DOMSVGFactory}}),Object.defineProperty(x,"FeatureTest",{enumerable:!0,get:function(){return D.FeatureTest}}),Object.defineProperty(x,"GlobalWorkerOptions",{enumerable:!0,get:function(){return pt.GlobalWorkerOptions}}),Object.defineProperty(x,"ImageKind",{enumerable:!0,get:function(){return D.ImageKind}}),Object.defineProperty(x,"InvalidPDFException",{enumerable:!0,get:function(){return D.InvalidPDFException}}),Object.defineProperty(x,"MissingPDFException",{enumerable:!0,get:function(){return D.MissingPDFException}}),Object.defineProperty(x,"OPS",{enumerable:!0,get:function(){return D.OPS}}),Object.defineProperty(x,"PDFDataRangeTransport",{enumerable:!0,get:function(){return _t.PDFDataRangeTransport}}),Object.defineProperty(x,"PDFDateString",{enumerable:!0,get:function(){return L.PDFDateString}}),Object.defineProperty(x,"PDFWorker",{enumerable:!0,get:function(){return _t.PDFWorker}}),Object.defineProperty(x,"PasswordResponses",{enumerable:!0,get:function(){return D.PasswordResponses}}),Object.defineProperty(x,"PermissionFlag",{enumerable:!0,get:function(){return D.PermissionFlag}}),Object.defineProperty(x,"PixelsPerInch",{enumerable:!0,get:function(){return L.PixelsPerInch}}),Object.defineProperty(x,"PromiseCapability",{enumerable:!0,get:function(){return D.PromiseCapability}}),Object.defineProperty(x,"RenderingCancelledException",{enumerable:!0,get:function(){return L.RenderingCancelledException}}),Object.defineProperty(x,"SVGGraphics",{enumerable:!0,get:function(){return _t.SVGGraphics}}),Object.defineProperty(x,"UnexpectedResponseException",{enumerable:!0,get:function(){return D.UnexpectedResponseException}}),Object.defineProperty(x,"Util",{enumerable:!0,get:function(){return D.Util}}),Object.defineProperty(x,"VerbosityLevel",{enumerable:!0,get:function(){return D.VerbosityLevel}}),Object.defineProperty(x,"XfaLayer",{enumerable:!0,get:function(){return lt.XfaLayer}}),Object.defineProperty(x,"build",{enumerable:!0,get:function(){return _t.build}}),Object.defineProperty(x,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return D.createValidAbsoluteUrl}}),Object.defineProperty(x,"getDocument",{enumerable:!0,get:function(){return _t.getDocument}}),Object.defineProperty(x,"getFilenameFromUrl",{enumerable:!0,get:function(){return L.getFilenameFromUrl}}),Object.defineProperty(x,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return L.getPdfFilenameFromUrl}}),Object.defineProperty(x,"getXfaPageViewport",{enumerable:!0,get:function(){return L.getXfaPageViewport}}),Object.defineProperty(x,"isDataScheme",{enumerable:!0,get:function(){return L.isDataScheme}}),Object.defineProperty(x,"isPdfFile",{enumerable:!0,get:function(){return L.isPdfFile}}),Object.defineProperty(x,"loadScript",{enumerable:!0,get:function(){return L.loadScript}}),Object.defineProperty(x,"noContextMenu",{enumerable:!0,get:function(){return L.noContextMenu}}),Object.defineProperty(x,"normalizeUnicode",{enumerable:!0,get:function(){return D.normalizeUnicode}}),Object.defineProperty(x,"renderTextLayer",{enumerable:!0,get:function(){return $.renderTextLayer}}),Object.defineProperty(x,"setLayerDimensions",{enumerable:!0,get:function(){return L.setLayerDimensions}}),Object.defineProperty(x,"shadow",{enumerable:!0,get:function(){return D.shadow}}),Object.defineProperty(x,"updateTextLayer",{enumerable:!0,get:function(){return $.updateTextLayer}}),Object.defineProperty(x,"version",{enumerable:!0,get:function(){return _t.version}});var D=__w_pdfjs_require__(1),_t=__w_pdfjs_require__(2),L=__w_pdfjs_require__(6),$=__w_pdfjs_require__(26),_=__w_pdfjs_require__(27),ot=__w_pdfjs_require__(5),$t=__w_pdfjs_require__(29),pt=__w_pdfjs_require__(14),lt=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;(function(x){var D=reactExports,_t=pdfExports;function L(P){var W=Object.create(null);return P&&Object.keys(P).forEach(function(ht){if(ht!=="default"){var bt=Object.getOwnPropertyDescriptor(P,ht);Object.defineProperty(W,ht,bt.get?bt:{enumerable:!0,get:function(){return P[ht]}})}}),W.default=P,Object.freeze(W)}var $,_=L(D),ot=L(_t);x.AnnotationType=void 0,($=x.AnnotationType||(x.AnnotationType={}))[$.Text=1]="Text",$[$.Link=2]="Link",$[$.FreeText=3]="FreeText",$[$.Line=4]="Line",$[$.Square=5]="Square",$[$.Circle=6]="Circle",$[$.Polygon=7]="Polygon",$[$.Polyline=8]="Polyline",$[$.Highlight=9]="Highlight",$[$.Underline=10]="Underline",$[$.Squiggly=11]="Squiggly",$[$.StrikeOut=12]="StrikeOut",$[$.Stamp=13]="Stamp",$[$.Caret=14]="Caret",$[$.Ink=15]="Ink",$[$.Popup=16]="Popup",$[$.FileAttachment=17]="FileAttachment";var $t=function(P,W){return $t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,bt){ht.__proto__=bt}||function(ht,bt){for(var Et in bt)Object.prototype.hasOwnProperty.call(bt,Et)&&(ht[Et]=bt[Et])},$t(P,W)};function pt(P,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function ht(){this.constructor=P}$t(P,W),P.prototype=W===null?Object.create(W):(ht.prototype=W.prototype,new ht)}var lt,U=function(){return U=Object.assign||function(P){for(var W,ht=1,bt=arguments.length;ht<bt;ht++)for(var Et in W=arguments[ht])Object.prototype.hasOwnProperty.call(W,Et)&&(P[Et]=W[Et]);return P},U.apply(this,arguments)};x.TextDirection=void 0,(lt=x.TextDirection||(x.TextDirection={})).RightToLeft="RTL",lt.LeftToRight="LTR";var vt,gt=_.createContext({currentTheme:"light",direction:x.TextDirection.LeftToRight,setCurrentTheme:function(){}}),nt=function(P){var W=[];return Object.keys(P).forEach(function(ht){ht&&P[ht]&&W.push(ht)}),W.join(" ")},X=typeof window<"u"?_.useLayoutEffect:_.useEffect,Q=function(P){var W=_.useRef(null),ht=P.once,bt=P.threshold,Et=P.onVisibilityChanged;return X(function(){var Tt=W.current;if(Tt){var Ht=new IntersectionObserver(function(Lt){Lt.forEach(function(At){var Nt=At.isIntersecting,Ot=At.intersectionRatio;Et({isVisible:Nt,ratio:Ot}),Nt&&ht&&(Ht.unobserve(Tt),Ht.disconnect())})},{threshold:bt||0});return Ht.observe(Tt),function(){Ht.unobserve(Tt),Ht.disconnect()}}},[]),W},V=function(P){var W=P.children,ht=P.ignoreDirection,bt=ht!==void 0&&ht,Et=P.size,Tt=Et===void 0?24:Et,Ht=_.useContext(gt).direction,Lt=!bt&&Ht===x.TextDirection.RightToLeft,At="".concat(Tt||24,"px");return _.createElement("svg",{"aria-hidden":"true",className:nt({"rpv-core__icon":!0,"rpv-core__icon--rtl":Lt}),focusable:"false",height:At,viewBox:"0 0 24 24",width:At},W)},J=function(){return _.createElement(V,{size:16},_.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},st=function(P){var W=P.children,ht=P.testId,bt=P.onClick,Et=_.useContext(gt).direction===x.TextDirection.RightToLeft,Tt=ht?{"data-testid":ht}:{};return _.createElement("button",U({className:nt({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":Et}),type:"button",onClick:bt},Tt),W)},rt=function(P){var W=P.size,ht=W===void 0?"4rem":W,bt=P.testId,Et=_.useState(!1),Tt=Et[0],Ht=Et[1],Lt=bt?{"data-testid":bt}:{},At=Q({onVisibilityChanged:function(Nt){Ht(Nt.isVisible)}});return _.createElement("div",U({},Lt,{className:nt({"rpv-core__spinner":!0,"rpv-core__spinner--animating":Tt}),ref:At,style:{height:ht,width:ht}}))},tt=function(P){var W=P.ariaLabel,ht=W===void 0?"":W,bt=P.autoFocus,Et=bt!==void 0&&bt,Tt=P.placeholder,Ht=Tt===void 0?"":Tt,Lt=P.testId,At=P.type,Nt=At===void 0?"text":At,Ot=P.value,se=Ot===void 0?"":Ot,ie=P.onChange,ee=P.onKeyDown,Ae=ee===void 0?function(){}:ee,be=_.useContext(gt).direction,pe=_.useRef(),ln=be===x.TextDirection.RightToLeft,Ue={ref:pe,"data-testid":"","aria-label":ht,className:nt({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":ln}),placeholder:Ht,value:se,onChange:function($e){return ie($e.target.value)},onKeyDown:Ae};return Lt&&(Ue["data-testid"]=Lt),X(function(){if(Et){var $e=pe.current;if($e){var Ke=window.scrollX,Le=window.scrollY;$e.focus(),window.scrollTo(Ke,Le)}}},[]),Nt==="text"?_.createElement("input",U({type:"text"},Ue)):_.createElement("input",U({type:"password"},Ue))};(function(P){P[P.ExitFullScreen=0]="ExitFullScreen",P[P.FullScreenChange=1]="FullScreenChange",P[P.FullScreenElement=2]="FullScreenElement",P[P.FullScreenEnabled=3]="FullScreenEnabled",P[P.RequestFullScreen=4]="RequestFullScreen"})(vt||(vt={}));var O,H={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},ct={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},q={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},N=typeof window<"u",at=N&&(vt.FullScreenEnabled in document&&H||ct.FullScreenEnabled in document&&ct||q.FullScreenEnabled in document&&q)||H,Y=function(){return N&&at.FullScreenEnabled in document&&document[at.FullScreenEnabled]===!0},St=function(P){return N?P[at.ExitFullScreen]():Promise.resolve({})},kt=function(){return N?document[at.FullScreenElement]:null},it=function(P,W){var ht=_.useRef(),bt=function(){ht.current&&clearTimeout(ht.current)};return _.useEffect(function(){return function(){return bt()}},[]),_.useCallback(function(){for(var Et=[],Tt=0;Tt<arguments.length;Tt++)Et[Tt]=arguments[Tt];bt(),ht.current=setTimeout(function(){P.apply(void 0,Et)},W)},[P,W])},Rt=function(){var P=_.useRef(!1);return _.useEffect(function(){return P.current=!0,function(){P.current=!1}},[]),P},Wt=function(P){var W=_.useRef(P);return _.useEffect(function(){W.current=P},[P]),W.current};(function(P){P.NotRenderedYet="NotRenderedYet",P.Rendering="Rendering",P.Rendered="Rendered"})(O||(O={}));var qt,Ct=-9999,Yt=function(P){var W=P.doc,ht=W.numPages,bt=W.loadingTask.docId,Et=_.useMemo(function(){return Array(ht).fill(null).map(function(Lt,At){return{pageIndex:At,renderStatus:O.NotRenderedYet,visibility:Ct}})},[bt]),Tt=_.useRef({currentRenderingPage:-1,startRange:0,endRange:ht-1,visibilities:Et}),Ht=function(Lt,At){Tt.current.visibilities[Lt].visibility=At};return{getHighestPriorityPage:function(){var Lt=Tt.current.visibilities.slice(Tt.current.startRange,Tt.current.endRange+1).filter(function(ie){return ie.visibility>Ct});if(!Lt.length)return-1;for(var At=Lt[0].pageIndex,Nt=Lt[Lt.length-1].pageIndex,Ot=Lt.length,se=0;se<Ot;se++){if(Lt[se].renderStatus===O.Rendering)return-1;if(Lt[se].renderStatus===O.NotRenderedYet)return Lt[se].pageIndex}return Nt+1<ht&&Tt.current.visibilities[Nt+1].renderStatus!==O.Rendered?Nt+1:At-1>=0&&Tt.current.visibilities[At-1].renderStatus!==O.Rendered?At-1:-1},isInRange:function(Lt){return Lt>=Tt.current.startRange&&Lt<=Tt.current.endRange},markNotRendered:function(){for(var Lt=0;Lt<ht;Lt++)Tt.current.visibilities[Lt].renderStatus=O.NotRenderedYet},markRendered:function(Lt){Tt.current.visibilities[Lt].renderStatus=O.Rendered},markRendering:function(Lt){Tt.current.currentRenderingPage!==-1&&Tt.current.currentRenderingPage!==Lt&&Tt.current.visibilities[Tt.current.currentRenderingPage].renderStatus===O.Rendering&&(Tt.current.visibilities[Tt.current.currentRenderingPage].renderStatus=O.NotRenderedYet),Tt.current.visibilities[Lt].renderStatus=O.Rendering,Tt.current.currentRenderingPage=Lt},setOutOfRange:function(Lt){Ht(Lt,Ct)},setRange:function(Lt,At){Tt.current.startRange=Lt,Tt.current.endRange=At;for(var Nt=0;Nt<ht;Nt++)(Nt<Lt||Nt>At)&&(Tt.current.visibilities[Nt].visibility=Ct,Tt.current.visibilities[Nt].renderStatus=O.NotRenderedYet)},setVisibility:Ht}},ne={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},de=_.createContext({l10n:ne,setL10n:function(){}}),_e=0,et=function(){return _e++},w=function(P,W,ht){var bt=function(Et){var Tt=W.current;if(Tt){var Ht=Et.target;if(Ht instanceof Element&&Ht.shadowRoot){var Lt=Et.composedPath();Lt.length>0&&!Tt.contains(Lt[0])&&ht()}else Tt.contains(Ht)||ht()}};_.useEffect(function(){if(P){var Et={capture:!0};return document.addEventListener("click",bt,Et),function(){document.removeEventListener("click",bt,Et)}}},[])},R=function(P){var W=function(ht){ht.key==="Escape"&&P()};_.useEffect(function(){return document.addEventListener("keyup",W),function(){document.removeEventListener("keyup",W)}},[])},T=function(P){var W=P.ariaControlsSuffix,ht=P.children,bt=P.closeOnClickOutside,Et=P.closeOnEscape,Tt=P.onToggle,Ht=_.useRef(),Lt=_.useContext(gt).direction===x.TextDirection.RightToLeft;return _.useEffect(function(){var At=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=At}},[]),R(function(){Ht.current&&Et&&Tt()}),w(bt,Ht,Tt),X(function(){var At=Ht.current;if(At){var Nt=.75*document.body.clientHeight;At.getBoundingClientRect().height>=Nt&&(At.style.overflow="auto",At.style.maxHeight="".concat(Nt,"px"))}},[]),_.createElement("div",{"aria-modal":"true",className:nt({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":Lt}),id:"rpv-core__modal-body-".concat(W),ref:Ht,role:"dialog",tabIndex:-1},ht)},B=function(P){var W=P.children;return _.createElement("div",{className:"rpv-core__modal-overlay"},W)};x.ToggleStatus=void 0,(qt=x.ToggleStatus||(x.ToggleStatus={})).Close="Close",qt.Open="Open",qt.Toggle="Toggle";var j,K=function(P){var W=_.useState(P),ht=W[0],bt=W[1];return{opened:ht,toggle:function(Et){switch(Et){case x.ToggleStatus.Close:bt(!1);break;case x.ToggleStatus.Open:bt(!0);break;case x.ToggleStatus.Toggle:default:bt(function(Tt){return!Tt})}}}},ut=function(P){var W=P.content,ht=P.isOpened,bt=ht!==void 0&&ht,Et=P.target,Tt=K(bt),Ht=Tt.opened,Lt=Tt.toggle;return _.createElement(_.Fragment,null,Et&&Et(Lt,Ht),Ht&&W(Lt))};x.Position=void 0,(j=x.Position||(x.Position={})).TopLeft="TOP_LEFT",j.TopCenter="TOP_CENTER",j.TopRight="TOP_RIGHT",j.RightTop="RIGHT_TOP",j.RightCenter="RIGHT_CENTER",j.RightBottom="RIGHT_BOTTOM",j.BottomLeft="BOTTOM_LEFT",j.BottomCenter="BOTTOM_CENTER",j.BottomRight="BOTTOM_RIGHT",j.LeftTop="LEFT_TOP",j.LeftCenter="LEFT_CENTER",j.LeftBottom="LEFT_BOTTOM";var yt,zt,Bt,Gt,Jt,le,Qt,Se,Re=function(P,W,ht,bt,Et){X(function(){var Tt=W.current,Ht=P.current,Lt=ht.current;if(Ht&&Tt&&Lt){var At=Lt.getBoundingClientRect(),Nt=function(ie,ee,Ae,be){var pe=ee.getBoundingClientRect(),ln=ie.getBoundingClientRect(),Ue=ln.height,$e=ln.width,Ke=0,Le=0;switch(Ae){case x.Position.TopLeft:Ke=pe.top-Ue,Le=pe.left;break;case x.Position.TopCenter:Ke=pe.top-Ue,Le=pe.left+pe.width/2-$e/2;break;case x.Position.TopRight:Ke=pe.top-Ue,Le=pe.left+pe.width-$e;break;case x.Position.RightTop:Ke=pe.top,Le=pe.left+pe.width;break;case x.Position.RightCenter:Ke=pe.top+pe.height/2-Ue/2,Le=pe.left+pe.width;break;case x.Position.RightBottom:Ke=pe.top+pe.height-Ue,Le=pe.left+pe.width;break;case x.Position.BottomLeft:Ke=pe.top+pe.height,Le=pe.left;break;case x.Position.BottomCenter:Ke=pe.top+pe.height,Le=pe.left+pe.width/2-$e/2;break;case x.Position.BottomRight:Ke=pe.top+pe.height,Le=pe.left+pe.width-$e;break;case x.Position.LeftTop:Ke=pe.top,Le=pe.left-$e;break;case x.Position.LeftCenter:Ke=pe.top+pe.height/2-Ue/2,Le=pe.left-$e;break;case x.Position.LeftBottom:Ke=pe.top+pe.height-Ue,Le=pe.left-$e}return{left:Le+(be.left||0),top:Ke+(be.top||0)}}(Ht,Tt,bt,Et),Ot=Nt.top,se=Nt.left;Ht.style.top="".concat(Ot-At.top,"px"),Ht.style.left="".concat(se-At.left,"px")}},[])},ce=function(P){var W,ht=P.customClassName,bt=P.position;return _.createElement("div",{className:nt((W={"rpv-core__arrow":!0,"rpv-core__arrow--tl":bt===x.Position.TopLeft,"rpv-core__arrow--tc":bt===x.Position.TopCenter,"rpv-core__arrow--tr":bt===x.Position.TopRight,"rpv-core__arrow--rt":bt===x.Position.RightTop,"rpv-core__arrow--rc":bt===x.Position.RightCenter,"rpv-core__arrow--rb":bt===x.Position.RightBottom,"rpv-core__arrow--bl":bt===x.Position.BottomLeft,"rpv-core__arrow--bc":bt===x.Position.BottomCenter,"rpv-core__arrow--br":bt===x.Position.BottomRight,"rpv-core__arrow--lt":bt===x.Position.LeftTop,"rpv-core__arrow--lc":bt===x.Position.LeftCenter,"rpv-core__arrow--lb":bt===x.Position.LeftBottom},W["".concat(ht)]=ht!=="",W))})},Ce=function(P){var W=P.ariaControlsSuffix,ht=P.children,bt=P.closeOnClickOutside,Et=P.offset,Tt=P.position,Ht=P.targetRef,Lt=P.onClose,At=_.useRef(),Nt=_.useRef(),Ot=_.useRef(),se=_.useContext(gt).direction===x.TextDirection.RightToLeft;w(bt,At,Lt),Re(At,Ht,Ot,Tt,Et),X(function(){var ee=Nt.current;if(ee){var Ae=.75*document.body.clientHeight;ee.getBoundingClientRect().height>=Ae&&(ee.style.overflow="auto",ee.style.maxHeight="".concat(Ae,"px"))}},[]);var ie="rpv-core__popover-body-inner-".concat(W);return _.createElement(_.Fragment,null,_.createElement("div",{ref:Ot,style:{left:0,position:"absolute",top:0}}),_.createElement("div",{"aria-describedby":ie,className:nt({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":se}),id:"rpv-core__popover-body-".concat(W),ref:At,role:"dialog",tabIndex:-1},_.createElement(ce,{customClassName:"rpv-core__popover-body-arrow",position:Tt}),_.createElement("div",{id:ie,ref:Nt},ht)))},te=function(P){var W=P.closeOnEscape,ht=P.onClose,bt=_.useRef();return R(function(){bt.current&&W&&ht()}),_.createElement("div",{className:"rpv-core__popover-overlay",ref:bt})},jt=function(P){var W=P.ariaControlsSuffix,ht=P.children,bt=P.contentRef,Et=P.offset,Tt=P.position,Ht=P.targetRef,Lt=_.useRef(),At=_.useContext(gt).direction===x.TextDirection.RightToLeft;return Re(bt,Ht,Lt,Tt,Et),_.createElement(_.Fragment,null,_.createElement("div",{ref:Lt,style:{left:0,position:"absolute",top:0}}),_.createElement("div",{className:nt({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":At}),id:"rpv-core__tooltip-body-".concat(W),ref:bt,role:"tooltip"},_.createElement(ce,{customClassName:"rpv-core__tooltip-body-arrow",position:Tt}),_.createElement("div",{className:"rpv-core__tooltip-body-content"},ht)))};x.FullScreenMode=void 0,(yt=x.FullScreenMode||(x.FullScreenMode={})).Normal="Normal",yt.Entering="Entering",yt.Entered="Entered",yt.EnteredCompletely="EnteredCompletely",yt.Exitting="Exitting",yt.Exited="Exited",x.LayerRenderStatus=void 0,(zt=x.LayerRenderStatus||(x.LayerRenderStatus={}))[zt.PreRender=0]="PreRender",zt[zt.DidRender=1]="DidRender",x.PageMode=void 0,(Bt=x.PageMode||(x.PageMode={})).Attachments="UseAttachments",Bt.Bookmarks="UseOutlines",Bt.ContentGroup="UseOC",Bt.Default="UserNone",Bt.FullScreen="FullScreen",Bt.Thumbnails="UseThumbs",x.PasswordStatus=void 0,(Gt=x.PasswordStatus||(x.PasswordStatus={})).RequiredPassword="RequiredPassword",Gt.WrongPassword="WrongPassword",x.RotateDirection=void 0,(Jt=x.RotateDirection||(x.RotateDirection={})).Backward="Backward",Jt.Forward="Forward",x.ScrollMode=void 0,(le=x.ScrollMode||(x.ScrollMode={})).Page="Page",le.Horizontal="Horizontal",le.Vertical="Vertical",le.Wrapped="Wrapped",x.SpecialZoomLevel=void 0,(Qt=x.SpecialZoomLevel||(x.SpecialZoomLevel={})).ActualSize="ActualSize",Qt.PageFit="PageFit",Qt.PageWidth="PageWidth",x.ViewMode=void 0,(Se=x.ViewMode||(x.ViewMode={})).DualPage="DualPage",Se.DualPageWithCover="DualPageWithCover",Se.SinglePage="SinglePage";var It,Zt=function(P,W){return P.reduce(function(ht,bt,Et){return Et%W?ht[ht.length-1].push(bt):ht.push([bt]),ht},[])},ge=function(P,W){switch(W[1].name){case"XYZ":return{bottomOffset:function(ht,bt){return W[3]===null?bt:W[3]},leftOffset:function(ht,bt){return W[2]===null?0:W[2]},pageIndex:P,scaleTo:W[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:P,scaleTo:x.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:W[2],leftOffset:0,pageIndex:P,scaleTo:x.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:P,scaleTo:1}}},fe=new Map,Oe=new Map,ze=function(P,W){return"".concat(P.loadingTask.docId,"___").concat(W.num,"R").concat(W.gen===0?"":W.gen)},Ne=function(P,W,ht){fe.set(ze(P,W),ht)},We=function(P,W){if(!P)return Promise.reject("The document is not loaded yet");var ht="".concat(P.loadingTask.docId,"___").concat(W),bt=Oe.get(ht);return bt?Promise.resolve(bt):new Promise(function(Et,Tt){P.getPage(W+1).then(function(Ht){Oe.set(ht,Ht),Ht.ref&&Ne(P,Ht.ref,W),Et(Ht)})})},qe=function(P,W){return new Promise(function(ht){new Promise(function(bt){typeof W=="string"?P.getDestination(W).then(function(Et){bt(Et)}):bt(W)}).then(function(bt){if(typeof bt[0]=="object"&&bt[0]!==null){var Et=bt[0],Tt=function(Lt,At){var Nt=ze(Lt,At);return fe.has(Nt)?fe.get(Nt):null}(P,Et);Tt===null?P.getPageIndex(Et).then(function(Lt){Ne(P,Et,Lt),qe(P,W).then(function(At){return ht(At)})}):ht(ge(Tt,bt))}else{var Ht=ge(bt[0],bt);ht(Ht)}})})};(function(P){P[P.Solid=1]="Solid",P[P.Dashed=2]="Dashed",P[P.Beveled=3]="Beveled",P[P.Inset=4]="Inset",P[P.Underline=5]="Underline"})(It||(It={}));var Fe,Je=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),Xt=function(P,W,ht,bt){var Et=parseInt(P,10);return Et>=W&&Et<=ht?Et:bt},Mt=function(P){return P.contentsObj?P.contentsObj.str:P.contents||""},wt=function(P){return P.titleObj?P.titleObj.str:P.title||""},ae=function(P){var W=P.annotation,ht=_.useContext(gt).direction,bt=wt(W),Et=Mt(W),Tt=ht===x.TextDirection.RightToLeft,Ht=_.useRef(),Lt="";if(W.modificationDate){var At=function(Nt){var Ot=Je.exec(Nt);if(!Ot)return null;var se=parseInt(Ot[1],10),ie=Xt(Ot[2],1,12,1)-1,ee=Xt(Ot[3],1,31,1),Ae=Xt(Ot[4],0,23,0),be=Xt(Ot[5],0,59,0),pe=Xt(Ot[6],0,59,0),ln=Ot[7]||"Z",Ue=Xt(Ot[8],0,23,0),$e=Xt(Ot[9],0,59,0);switch(ln){case"-":Ae+=Ue,be+=$e;break;case"+":Ae-=Ue,be-=$e}return new Date(Date.UTC(se,ie,ee,Ae,be,pe))}(W.modificationDate);Lt=At?"".concat(At.toLocaleDateString(),", ").concat(At.toLocaleTimeString()):""}return _.useLayoutEffect(function(){if(Ht.current){var Nt=document.querySelector('[data-annotation-id="'.concat(W.id,'"]'));if(Nt){var Ot=Nt;return Ot.style.zIndex+=1,function(){Ot.style.zIndex="".concat(parseInt(Ot.style.zIndex,10)-1)}}}},[]),_.createElement("div",{ref:Ht,className:nt({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":Tt}),style:{top:W.annotationType===x.AnnotationType.Popup?"":"100%"}},bt&&_.createElement(_.Fragment,null,_.createElement("div",{className:nt({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!Tt,"rpv-core__annotation-popup-title--rtl":Tt})},bt),_.createElement("div",{className:"rpv-core__annotation-popup-date"},Lt)),Et&&_.createElement("div",{className:"rpv-core__annotation-popup-content"},Et.split(`
`).map(function(Nt,Ot){return _.createElement(_.Fragment,{key:Ot},Nt,_.createElement("br",null))})))};(function(P){P.Click="Click",P.Hover="Hover"})(Fe||(Fe={}));var Kt,an=function(P){var W,ht=P.annotation,bt=P.children,Et=P.ignoreBorder,Tt=P.hasPopup,Ht=P.isRenderable,Lt=P.page,At=P.viewport,Nt=ht.rect,Ot=function(){var Xe=K(!1),vn=Xe.opened,gn=Xe.toggle,bn=_.useState(Fe.Hover),_n=bn[0],An=bn[1];return{opened:vn,closeOnHover:function(){_n===Fe.Hover&&gn(x.ToggleStatus.Close)},openOnHover:function(){_n===Fe.Hover&&gn(x.ToggleStatus.Open)},toggleOnClick:function(){switch(_n){case Fe.Click:vn&&An(Fe.Hover),gn(x.ToggleStatus.Toggle);break;case Fe.Hover:An(Fe.Click),gn(x.ToggleStatus.Open)}}}}(),se=Ot.closeOnHover,ie=Ot.opened,ee=Ot.openOnHover,Ae=Ot.toggleOnClick,be=(W=[Nt[0],Lt.view[3]+Lt.view[1]-Nt[1],Nt[2],Lt.view[3]+Lt.view[1]-Nt[3]],[Math.min(W[0],W[2]),Math.min(W[1],W[3]),Math.max(W[0],W[2]),Math.max(W[1],W[3])]),pe=Nt[2]-Nt[0],ln=Nt[3]-Nt[1],Ue={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!Et&&ht.borderStyle.width>0){switch(ht.borderStyle.style){case It.Dashed:Ue.borderStyle="dashed";break;case It.Solid:Ue.borderStyle="solid";break;case It.Underline:Ue=Object.assign({borderBottomStyle:"solid"},Ue);case It.Beveled:case It.Inset:}var $e=ht.borderStyle.width;Ue.borderWidth="".concat($e,"px"),ht.borderStyle.style!==It.Underline&&(pe-=2*$e,ln-=2*$e);var Ke=ht.borderStyle,Le=Ke.horizontalCornerRadius,Qe=Ke.verticalCornerRadius;(Le>0||Qe>0)&&(Ue.borderRadius="".concat(Le,"px / ").concat(Qe,"px")),ht.color?Ue.borderColor="rgb(".concat(0|ht.color[0],", ").concat(0|ht.color[1],", ").concat(0|ht.color[2],")"):Ue.borderWidth="0"}return _.createElement(_.Fragment,null,Ht&&bt({popup:{opened:ie,closeOnHover:se,openOnHover:ee,toggleOnClick:Ae},slot:{attrs:{style:Object.assign({height:"".concat(ln,"px"),left:"".concat(be[0],"px"),top:"".concat(be[1],"px"),transform:"matrix(".concat(At.transform.join(","),")"),transformOrigin:"-".concat(be[0],"px -").concat(be[1],"px"),width:"".concat(pe,"px")},Ue)},children:_.createElement(_.Fragment,null,Tt&&ie&&_.createElement(ae,{annotation:ht}))}}))},mn=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=W.hasPopup===!1,Tt=wt(W),Ht=Mt(W),Lt=!!(W.hasPopup||Tt||Ht);return _.createElement(an,{annotation:W,hasPopup:Et,ignoreBorder:!0,isRenderable:Lt,page:ht,viewport:bt},function(At){return _.createElement("div",U({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":W.id,onClick:At.popup.toggleOnClick,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),At.slot.children)})},Dt=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=W.hasPopup===!1,Tt=wt(W),Ht=Mt(W),Lt=!!(W.hasPopup||Tt||Ht),At=W.rect,Nt=At[2]-At[0],Ot=At[3]-At[1],se=W.borderStyle.width;return _.createElement(an,{annotation:W,hasPopup:Et,ignoreBorder:!0,isRenderable:Lt,page:ht,viewport:bt},function(ie){return _.createElement("div",U({},ie.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":W.id,onClick:ie.popup.toggleOnClick,onMouseEnter:ie.popup.openOnHover,onMouseLeave:ie.popup.closeOnHover}),_.createElement("svg",{height:"".concat(Ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Nt," ").concat(Ot),width:"".concat(Nt,"px")},_.createElement("circle",{cy:Ot/2,fill:"none",rx:Nt/2-se/2,ry:Ot/2-se/2,stroke:"transparent",strokeWidth:se||1})),ie.slot.children)})},ue=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=wt(W),Tt=Mt(W),Ht=!(W.hasPopup!==!1||!Et&&!Tt),Lt=function(){var At,Nt,Ot,se,ie=W.file;ie&&(At=ie.filename,Nt=ie.content,Ot=typeof Nt=="string"?"":URL.createObjectURL(new Blob([Nt],{type:""})),(se=document.createElement("a")).style.display="none",se.href=Ot||At,se.setAttribute("download",function(ee){var Ae=ee.split("/").pop();return Ae?Ae.split("#")[0].split("?")[0]:ee}(At)),document.body.appendChild(se),se.click(),document.body.removeChild(se),Ot&&URL.revokeObjectURL(Ot))};return _.createElement(an,{annotation:W,hasPopup:Ht,ignoreBorder:!0,isRenderable:!0,page:ht,viewport:bt},function(At){return _.createElement("div",U({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":W.id,onClick:At.popup.toggleOnClick,onDoubleClick:Lt,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),At.slot.children)})},Te=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=W.hasPopup===!1,Tt=wt(W),Ht=Mt(W),Lt=!!(W.hasPopup||Tt||Ht);return _.createElement(an,{annotation:W,hasPopup:Et,ignoreBorder:!0,isRenderable:Lt,page:ht,viewport:bt},function(At){return _.createElement("div",U({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":W.id,onClick:At.popup.toggleOnClick,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),At.slot.children)})},me=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=wt(W),Tt=Mt(W),Ht=!(!Et&&!Tt),Lt=!W.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(W.parentType)!==-1;return X(function(){if(W.parentId){var At=document.querySelector('[data-annotation-id="'.concat(W.parentId,'"]')),Nt=document.querySelector('[data-annotation-id="'.concat(W.id,'"]'));if(At&&Nt){var Ot=parseFloat(At.style.left),se=parseFloat(At.style.top)+parseFloat(At.style.height);Nt.style.left="".concat(Ot,"px"),Nt.style.top="".concat(se,"px"),Nt.style.transformOrigin="-".concat(Ot,"px -").concat(se,"px")}}},[]),_.createElement(an,{annotation:W,hasPopup:Lt,ignoreBorder:!1,isRenderable:Ht,page:ht,viewport:bt},function(At){return _.createElement("div",U({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":W.id}),_.createElement(ae,{annotation:W}))})},ke=function(P){var W=P.annotation,ht=P.childAnnotation,bt=P.page,Et=P.viewport,Tt=W.hasPopup===!1,Ht=wt(W),Lt=Mt(W),At=!!(W.hasPopup||Ht||Lt);if(W.quadPoints&&W.quadPoints.length>0){var Nt=W.quadPoints.map(function(Ot){return Object.assign({},W,{rect:[Ot[2].x,Ot[2].y,Ot[1].x,Ot[1].y],quadPoints:[]})});return _.createElement(_.Fragment,null,Nt.map(function(Ot,se){return _.createElement(ke,{key:se,annotation:Ot,childAnnotation:ht,page:bt,viewport:Et})}))}return _.createElement(an,{annotation:W,hasPopup:Tt,ignoreBorder:!0,isRenderable:At,page:bt,viewport:Et},function(Ot){return _.createElement(_.Fragment,null,_.createElement("div",U({},Ot.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":W.id,onClick:Ot.popup.toggleOnClick,onMouseEnter:Ot.popup.openOnHover,onMouseLeave:Ot.popup.closeOnHover}),Ot.slot.children),ht&&ht.annotationType===x.AnnotationType.Popup&&Ot.popup.opened&&_.createElement(me,{annotation:ht,page:bt,viewport:Et}))})},Me=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=W.hasPopup===!1,Tt=wt(W),Ht=Mt(W),Lt=!!(W.hasPopup||Tt||Ht),At=W.rect,Nt=At[2]-At[0],Ot=At[3]-At[1],se=W.borderStyle.width;return _.createElement(an,{annotation:W,hasPopup:Et,ignoreBorder:!0,isRenderable:Lt,page:ht,viewport:bt},function(ie){return _.createElement("div",U({},ie.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":W.id,onClick:ie.popup.toggleOnClick,onMouseEnter:ie.popup.openOnHover,onMouseLeave:ie.popup.closeOnHover}),W.inkLists&&W.inkLists.length&&_.createElement("svg",{height:"".concat(Ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Nt," ").concat(Ot),width:"".concat(Nt,"px")},W.inkLists.map(function(ee,Ae){return _.createElement("polyline",{key:Ae,fill:"none",stroke:"transparent",strokeWidth:se||1,points:ee.map(function(be){return"".concat(be.x-At[0],",").concat(At[3]-be.y)}).join(" ")})})),ie.slot.children)})},un=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=W.hasPopup===!1,Tt=wt(W),Ht=Mt(W),Lt=!!(W.hasPopup||Tt||Ht),At=W.rect,Nt=At[2]-At[0],Ot=At[3]-At[1],se=W.borderStyle.width;return _.createElement(an,{annotation:W,hasPopup:Et,ignoreBorder:!0,isRenderable:Lt,page:ht,viewport:bt},function(ie){return _.createElement("div",U({},ie.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":W.id,onClick:ie.popup.toggleOnClick,onMouseEnter:ie.popup.openOnHover,onMouseLeave:ie.popup.closeOnHover}),_.createElement("svg",{height:"".concat(Ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Nt," ").concat(Ot),width:"".concat(Nt,"px")},_.createElement("line",{stroke:"transparent",strokeWidth:se||1,x1:At[2]-W.lineCoordinates[0],x2:At[2]-W.lineCoordinates[2],y1:At[3]-W.lineCoordinates[1],y2:At[3]-W.lineCoordinates[3]})),ie.slot.children)})},oe=/^([^\w]*)(javascript|data|vbscript)/im,nn=/&#(\w+)(^\w|;)?/g,Pe=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,dt=/^([^:]+):/gm,A=function(P,W){W===void 0&&(W="about:blank");var ht,bt=(ht=P||"",ht.replace(nn,function(Lt,At){return String.fromCharCode(At)})).replace(Pe,"").trim();if(!bt)return W;var Et=bt[0];if(Et==="."||Et==="/")return bt;var Tt=bt.match(dt);if(!Tt)return bt;var Ht=Tt[0];return oe.test(Ht)?W:bt},G=function(P){var W,ht=P.annotation,bt=P.annotationContainerRef,Et=P.doc,Tt=P.outlines,Ht=P.page,Lt=P.pageIndex,At=P.scale,Nt=P.viewport,Ot=P.onExecuteNamedAction,se=P.onJumpFromLinkAnnotation,ie=P.onJumpToDest,ee=_.useRef(),Ae=Tt&&Tt.length&&ht.dest&&typeof ht.dest=="string"?(W=Tt.find(function(Ue){return Ue.dest===ht.dest}))===null||W===void 0?void 0:W.title:"",be=!!(ht.url||ht.dest||ht.action||ht.unsafeUrl),pe={};if(ht.url||ht.unsafeUrl){var ln=A(ht.url||ht.unsafeUrl,"");ln?pe={"data-target":"external",href:ln,rel:"noopener noreferrer nofollow",target:ht.newWindow?"_blank":"",title:ln}:be=!1}else pe={href:"","data-annotation-link":ht.id,onClick:function(Ue){Ue.preventDefault(),ht.action?Ot(ht.action):qe(Et,ht.dest).then(function($e){var Ke=ee.current,Le=bt.current;if(Ke&&Le){var Qe=Ke.getBoundingClientRect();Le.style.setProperty("height","100%"),Le.style.setProperty("width","100%");var Xe=Le.getBoundingClientRect();Le.style.removeProperty("height"),Le.style.removeProperty("width");var vn=(Qe.left-Xe.left)/At,gn=(Xe.bottom-Qe.bottom+Qe.height)/At;se({bottomOffset:gn,label:Ae,leftOffset:vn,pageIndex:Lt})}ie($e)})}};return Ae&&(pe=Object.assign({},pe,{title:Ae,"aria-label":Ae})),_.createElement(an,{annotation:ht,hasPopup:!1,ignoreBorder:!1,isRenderable:be,page:Ht,viewport:Nt},function(Ue){return _.createElement("div",U({},Ue.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":ht.id,"data-testid":"core__annotation--link-".concat(ht.id)}),_.createElement("a",U({ref:ee},pe)))})},ft=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=W.hasPopup===!1,Tt=wt(W),Ht=Mt(W),Lt=!!(W.hasPopup||Tt||Ht),At=W.rect,Nt=At[2]-At[0],Ot=At[3]-At[1],se=W.borderStyle.width;return _.createElement(an,{annotation:W,hasPopup:Et,ignoreBorder:!0,isRenderable:Lt,page:ht,viewport:bt},function(ie){return _.createElement("div",U({},ie.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":W.id,onClick:ie.popup.toggleOnClick,onMouseEnter:ie.popup.openOnHover,onMouseLeave:ie.popup.closeOnHover}),W.vertices&&W.vertices.length&&_.createElement("svg",{height:"".concat(Ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Nt," ").concat(Ot),width:"".concat(Nt,"px")},_.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:se||1,points:W.vertices.map(function(ee){return"".concat(ee.x-At[0],",").concat(At[3]-ee.y)}).join(" ")})),ie.slot.children)})},Pt=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=W.hasPopup===!1,Tt=wt(W),Ht=Mt(W),Lt=!!(W.hasPopup||Tt||Ht),At=W.rect,Nt=At[2]-At[0],Ot=At[3]-At[1],se=W.borderStyle.width;return _.createElement(an,{annotation:W,hasPopup:Et,ignoreBorder:!0,isRenderable:Lt,page:ht,viewport:bt},function(ie){return _.createElement("div",U({},ie.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":W.id,onClick:ie.popup.toggleOnClick,onMouseEnter:ie.popup.openOnHover,onMouseLeave:ie.popup.closeOnHover}),W.vertices&&W.vertices.length&&_.createElement("svg",{height:"".concat(Ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Nt," ").concat(Ot),width:"".concat(Nt,"px")},_.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:se||1,points:W.vertices.map(function(ee){return"".concat(ee.x-At[0],",").concat(At[3]-ee.y)}).join(" ")})),ie.slot.children)})},Ft=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=W.hasPopup===!1,Tt=wt(W),Ht=Mt(W),Lt=!!(W.hasPopup||Tt||Ht),At=W.rect,Nt=At[2]-At[0],Ot=At[3]-At[1],se=W.borderStyle.width;return _.createElement(an,{annotation:W,hasPopup:Et,ignoreBorder:!0,isRenderable:Lt,page:ht,viewport:bt},function(ie){return _.createElement("div",U({},ie.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":W.id,onClick:ie.popup.toggleOnClick,onMouseEnter:ie.popup.openOnHover,onMouseLeave:ie.popup.closeOnHover}),_.createElement("svg",{height:"".concat(Ot,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Nt," ").concat(Ot),width:"".concat(Nt,"px")},_.createElement("rect",{height:Ot-se,fill:"none",stroke:"transparent",strokeWidth:se||1,x:se/2,y:se/2,width:Nt-se})),ie.slot.children)})},Vt=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=W.hasPopup===!1,Tt=wt(W),Ht=Mt(W),Lt=!!(W.hasPopup||Tt||Ht);return _.createElement(an,{annotation:W,hasPopup:Et,ignoreBorder:!0,isRenderable:Lt,page:ht,viewport:bt},function(At){return _.createElement("div",U({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":W.id,onClick:At.popup.toggleOnClick,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),At.slot.children)})},re=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=W.hasPopup===!1,Tt=wt(W),Ht=Mt(W),Lt=!!(W.hasPopup||Tt||Ht);return _.createElement(an,{annotation:W,hasPopup:Et,ignoreBorder:!0,isRenderable:Lt,page:ht,viewport:bt},function(At){return _.createElement("div",U({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":W.id,onClick:At.popup.toggleOnClick,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),At.slot.children)})},ye=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=W.hasPopup===!1,Tt=wt(W),Ht=Mt(W),Lt=!!(W.hasPopup||Tt||Ht);return _.createElement(an,{annotation:W,hasPopup:Et,ignoreBorder:!0,isRenderable:Lt,page:ht,viewport:bt},function(At){return _.createElement("div",U({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":W.id,onClick:At.popup.toggleOnClick,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),At.slot.children)})},ve=function(){return _.createElement(V,{size:16},_.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),_.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),_.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),_.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},Ve=function(){return _.createElement(V,{size:16},_.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),_.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),_.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),_.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),_.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),_.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),_.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),_.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),_.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),_.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Ee=function(){return _.createElement(V,{size:16},_.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),_.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},we=function(){return _.createElement(V,{size:16},_.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),_.createElement("path",{d:"M6 4.5L6 0.5"}),_.createElement("path",{d:"M18 4.5L18 0.5"}),_.createElement("path",{d:"M10 4.5L10 0.5"}),_.createElement("path",{d:"M14 4.5L14 0.5"}))},Be=function(){return _.createElement(V,{size:16},_.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),_.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),_.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Ze=function(){return _.createElement(V,{size:16},_.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},cn=function(P){var W=P.annotation,ht=P.childAnnotation,bt=P.page,Et=P.viewport,Tt=W.hasPopup===!1,Ht=wt(W),Lt=Mt(W),At=!!(W.hasPopup||Ht||Lt),Nt=W.name?W.name.toLowerCase():"";return _.createElement(an,{annotation:W,hasPopup:Tt,ignoreBorder:!1,isRenderable:At,page:bt,viewport:Et},function(Ot){return _.createElement(_.Fragment,null,_.createElement("div",U({},Ot.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":W.id,onClick:Ot.popup.toggleOnClick,onMouseEnter:Ot.popup.openOnHover,onMouseLeave:Ot.popup.closeOnHover}),Nt&&_.createElement("div",{className:"rpv-core__annotation-text-icon"},Nt==="check"&&_.createElement(J,null),Nt==="comment"&&_.createElement(ve,null),Nt==="help"&&_.createElement(Ve,null),Nt==="insert"&&_.createElement(Ze,null),Nt==="key"&&_.createElement(Ee,null),Nt==="note"&&_.createElement(we,null),(Nt==="newparagraph"||Nt==="paragraph")&&_.createElement(Be,null)),Ot.slot.children),ht&&ht.annotationType===x.AnnotationType.Popup&&Ot.popup.opened&&_.createElement(me,{annotation:ht,page:bt,viewport:Et}))})},pn=function(P){var W=P.annotation,ht=P.page,bt=P.viewport,Et=W.hasPopup===!1,Tt=wt(W),Ht=Mt(W),Lt=!!(W.hasPopup||Tt||Ht);return _.createElement(an,{annotation:W,hasPopup:Et,ignoreBorder:!0,isRenderable:Lt,page:ht,viewport:bt},function(At){return _.createElement("div",U({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":W.id,onClick:At.popup.toggleOnClick,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),At.slot.children)})},On=function(P){var W=P.annotations,ht=P.doc,bt=P.outlines,Et=P.page,Tt=P.pageIndex,Ht=P.plugins,Lt=P.rotation,At=P.scale,Nt=P.onExecuteNamedAction,Ot=P.onJumpFromLinkAnnotation,se=P.onJumpToDest,ie=_.useRef(),ee=Et.getViewport({rotation:Lt,scale:At}).clone({dontFlip:!0}),Ae=W.filter(function(be){return!be.parentId});return X(function(){var be=ie.current;be&&Ht.forEach(function(pe){pe.onAnnotationLayerRender&&pe.onAnnotationLayerRender({annotations:Ae,container:be,pageIndex:Tt,rotation:Lt,scale:At})})},[]),_.createElement("div",{ref:ie,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(Tt)},Ae.map(function(be){var pe=W.find(function(ln){return ln.parentId===be.id});switch(be.annotationType){case x.AnnotationType.Caret:return _.createElement(mn,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.Circle:return _.createElement(Dt,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.FileAttachment:return _.createElement(ue,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.FreeText:return _.createElement(Te,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.Highlight:return _.createElement(ke,{key:be.id,annotation:be,childAnnotation:pe,page:Et,viewport:ee});case x.AnnotationType.Ink:return _.createElement(Me,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.Line:return _.createElement(un,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.Link:return _.createElement(G,{key:be.id,annotation:be,annotationContainerRef:ie,doc:ht,outlines:bt,page:Et,pageIndex:Tt,scale:At,viewport:ee,onExecuteNamedAction:Nt,onJumpFromLinkAnnotation:Ot,onJumpToDest:se});case x.AnnotationType.Polygon:return _.createElement(ft,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.Polyline:return _.createElement(Pt,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.Popup:return _.createElement(me,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.Square:return _.createElement(Ft,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.Squiggly:return _.createElement(Vt,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.Stamp:return _.createElement(re,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.StrikeOut:return _.createElement(ye,{key:be.id,annotation:be,page:Et,viewport:ee});case x.AnnotationType.Text:return _.createElement(cn,{key:be.id,annotation:be,childAnnotation:pe,page:Et,viewport:ee});case x.AnnotationType.Underline:return _.createElement(pn,{key:be.id,annotation:be,page:Et,viewport:ee});default:return _.createElement(_.Fragment,{key:be.id})}}))},Tn=function(P){var W=P.page,ht=P.renderAnnotations,bt=Rt(),Et=_.useState({loading:!0,annotations:[]}),Tt=Et[0],Ht=Et[1];return _.useEffect(function(){W.getAnnotations({intent:"display"}).then(function(Lt){bt.current&&Ht({loading:!1,annotations:Lt})})},[]),Tt.loading?_.createElement(_.Fragment,null):ht(Tt.annotations)},Vn=function(P){var W=P.doc,ht=P.outlines,bt=P.page,Et=P.pageIndex,Tt=P.plugins,Ht=P.rotation,Lt=P.scale,At=P.onExecuteNamedAction,Nt=P.onJumpFromLinkAnnotation,Ot=P.onJumpToDest;return _.createElement(Tn,{page:bt,renderAnnotations:function(se){return _.createElement(On,{annotations:se,doc:W,outlines:ht,page:bt,pageIndex:Et,plugins:Tt,rotation:Ht,scale:Lt,onExecuteNamedAction:At,onJumpFromLinkAnnotation:Nt,onJumpToDest:Ot})}})},qn=function(P,W){var ht=P%W;return ht===0?P:Math.floor(P-ht)},Jn=function(P){var W=P.canvasLayerRef,ht=P.height,bt=P.page,Et=P.pageIndex,Tt=P.plugins,Ht=P.rotation,Lt=P.scale,At=P.width,Nt=P.onRenderCanvasCompleted,Ot=_.useRef();return X(function(){var se=Ot.current;se&&se.cancel();var ie=W.current;ie.removeAttribute("data-testid"),Tt.forEach(function(Xe){Xe.onCanvasLayerRender&&Xe.onCanvasLayerRender({ele:ie,pageIndex:Et,rotation:Ht,scale:Lt,status:x.LayerRenderStatus.PreRender})});var ee=bt.getViewport({rotation:Ht,scale:Lt}),Ae=window.devicePixelRatio||1,be=Math.sqrt(16777216/(ee.width*ee.height)),pe=Ae>be;pe?ie.style.transform="scale(1, 1)":ie.style.removeProperty("transform");var ln=Math.min(be,Ae),Ue=function(Xe,vn){var gn,bn;if(Math.floor(Xe)===Xe)return[Xe,1];var _n=1/Xe;if(_n>vn)return[1,vn];if(Math.floor(_n)===_n)return[1,_n];for(var An=Xe>1?_n:Xe,Nn=0,Mn=1,Bn=1,Fn=1;;){var Dn=Nn+Bn,In=Mn+Fn;if(In>vn)break;An<=Dn/In?(Bn=(gn=[Dn,In])[0],Fn=gn[1]):(Nn=(bn=[Dn,In])[0],Mn=bn[1])}return An<(Nn/Mn+Bn/Fn)/2?An===Xe?[Nn,Mn]:[Mn,Nn]:An===Xe?[Bn,Fn]:[Fn,Bn]}(ln,8),$e=Ue[0],Ke=Ue[1];ie.width=qn(ee.width*ln,$e),ie.height=qn(ee.height*ln,$e),ie.style.width="".concat(qn(ee.width,Ke),"px"),ie.style.height="".concat(qn(ee.height,Ke),"px"),ie.hidden=!0;var Le=ie.getContext("2d",{alpha:!1}),Qe=pe||Ae!==1?[ln,0,0,ln,0,0]:null;return Ot.current=bt.render({canvasContext:Le,transform:Qe,viewport:ee}),Ot.current.promise.then(function(){ie.hidden=!1,ie.setAttribute("data-testid","core__canvas-layer-".concat(Et)),Tt.forEach(function(Xe){Xe.onCanvasLayerRender&&Xe.onCanvasLayerRender({ele:ie,pageIndex:Et,rotation:Ht,scale:Lt,status:x.LayerRenderStatus.DidRender})}),Nt()},function(){Nt()}),function(){ie&&(ie.width=0,ie.height=0)}},[]),_.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(ht,"px"),width:"".concat(At,"px")}},_.createElement("canvas",{ref:W}))},ki=function(P){var W=P.height,ht=P.page,bt=P.rotation,Et=P.scale,Tt=P.width,Ht=_.useRef();return X(function(){var Lt=Ht.current,At=ht.getViewport({rotation:bt,scale:Et});ht.getOperatorList().then(function(Nt){(function(){var Ot=Ht.current;Ot&&(Ot.innerHTML="")})(),new ot.SVGGraphics(ht.commonObjs,ht.objs).getSVG(Nt,At).then(function(Ot){Ot.style.height="".concat(W,"px"),Ot.style.width="".concat(Tt,"px"),Lt.appendChild(Ot)})})},[]),_.createElement("div",{className:"rpv-core__svg-layer",ref:Ht})},Hs=function(P){var W=P.containerRef,ht=P.page,bt=P.pageIndex,Et=P.plugins,Tt=P.rotation,Ht=P.scale,Lt=P.onRenderTextCompleted,At=_.useRef(),Nt=function(){var Ot=W.current;Ot&&([].slice.call(Ot.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(se){return Ot.removeChild(se)}),[].slice.call(Ot.querySelectorAll('br[role="presentation"]')).forEach(function(se){return Ot.removeChild(se)}))};return X(function(){var Ot=At.current;Ot&&Ot.cancel();var se=W.current;if(se){se.removeAttribute("data-testid");var ie=ht.getViewport({rotation:Tt,scale:Ht});return Et.forEach(function(ee){ee.onTextLayerRender&&ee.onTextLayerRender({ele:se,pageIndex:bt,scale:Ht,status:x.LayerRenderStatus.PreRender})}),ht.getTextContent().then(function(ee){Nt(),At.current=ot.renderTextLayer({container:se,textContent:ee,textContentSource:ee,viewport:ie}),At.current.promise.then(function(){se.setAttribute("data-testid","core__text-layer-".concat(bt)),[].slice.call(se.children).forEach(function(Ae){Ae.classList.contains("rpv-core__text-layer-text--not")||Ae.classList.add("rpv-core__text-layer-text")}),Et.forEach(function(Ae){Ae.onTextLayerRender&&Ae.onTextLayerRender({ele:se,pageIndex:bt,scale:Ht,status:x.LayerRenderStatus.DidRender})}),Lt()},function(){se.removeAttribute("data-testid"),Lt()})}),function(){var ee;Nt(),(ee=At.current)===null||ee===void 0||ee.cancel()}}},[]),_.createElement("div",{className:"rpv-core__text-layer",ref:W})},zs=function(P){var W=P.doc,ht=P.measureRef,bt=P.outlines,Et=P.pageIndex,Tt=P.pageRotation,Ht=P.pageSize,Lt=P.plugins,At=P.renderPage,Nt=P.renderQueueKey,Ot=P.rotation,se=P.scale,ie=P.shouldRender,ee=P.viewMode,Ae=P.onExecuteNamedAction,be=P.onJumpFromLinkAnnotation,pe=P.onJumpToDest,ln=P.onRenderCompleted,Ue=P.onRotatePage,$e=Rt(),Ke=_.useState(null),Le=Ke[0],Qe=Ke[1],Xe=_.useState(!1),vn=Xe[0],gn=Xe[1],bn=_.useState(!1),_n=bn[0],An=bn[1],Nn=_.useRef(),Mn=_.useRef(),Bn=Math.abs(Ot+Tt)%180==0,Fn=Ht.pageWidth*se,Dn=Ht.pageHeight*se,In=Bn?Fn:Dn,Ln=Bn?Dn:Fn,$n=(Ht.rotation+Ot+Tt)%360,Qn=_.useRef(0),Zn=At||function(zn){return _.createElement(_.Fragment,null,zn.canvasLayer.children,zn.textLayer.children,zn.annotationLayer.children)};return _.useEffect(function(){Qe(null),gn(!1),An(!1)},[Tt,Ot,se]),_.useEffect(function(){ie&&$e.current&&!Le&&We(W,Et).then(function(zn){$e.current&&(Qn.current=Nt,Qe(zn))})},[ie,Le]),_.useEffect(function(){vn&&_n&&(Nt!==Qn.current?(Qe(null),gn(!1),An(!1)):ln(Et))},[vn,_n]),_.createElement("div",{className:nt({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":ee===x.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":ee===x.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":ee===x.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(Et),ref:ht,style:{height:"".concat(Ln,"px"),width:"".concat(In,"px")}},Le?_.createElement(_.Fragment,null,Zn({annotationLayer:{attrs:{},children:_.createElement(Vn,{doc:W,outlines:bt,page:Le,pageIndex:Et,plugins:Lt,rotation:$n,scale:se,onExecuteNamedAction:Ae,onJumpFromLinkAnnotation:be,onJumpToDest:pe})},canvasLayer:{attrs:{},children:_.createElement(Jn,{canvasLayerRef:Nn,height:Ln,page:Le,pageIndex:Et,plugins:Lt,rotation:$n,scale:se,width:In,onRenderCanvasCompleted:function(){$e.current&&gn(!0)}})},canvasLayerRendered:vn,doc:W,height:Ln,pageIndex:Et,rotation:$n,scale:se,svgLayer:{attrs:{},children:_.createElement(ki,{height:Ln,page:Le,rotation:$n,scale:se,width:In})},textLayer:{attrs:{},children:_.createElement(Hs,{containerRef:Mn,page:Le,pageIndex:Et,plugins:Lt,rotation:$n,scale:se,onRenderTextCompleted:function(){$e.current&&An(!0)}})},textLayerRendered:_n,width:In,markRendered:ln,onRotatePage:function(zn){return Ue(Et,zn)}}),Lt.map(function(zn,Gn){return zn.renderPageLayer?_.createElement(_.Fragment,{key:Gn},zn.renderPageLayer({canvasLayerRef:Nn,canvasLayerRendered:vn,doc:W,height:Ln,pageIndex:Et,rotation:$n,scale:se,textLayerRef:Mn,textLayerRendered:_n,width:In})):_.createElement(_.Fragment,{key:Gn})})):_.createElement(rt,{testId:"core__page-layer-loading-".concat(Et)}))},Us=function(P,W){var ht=W.rect;return P.height!==ht.height||P.width!==ht.width?ht:P};(function(P){P.Horizontal="Horizontal",P.Vertical="Vertical",P.Both="Both"})(Kt||(Kt={}));var Ws=function(P){return 1-Math.pow(1-P,4)},xi=1e-4,Ur={left:0,top:0},Wr={capture:!1,passive:!0},$s=function(P){var W=P.elementRef,ht=P.enableSmoothScroll,bt=P.isRtl,Et=P.scrollDirection,Tt=P.onSmoothScroll,Ht=_.useState(Ur),Lt=Ht[0],At=Ht[1],Nt=_.useState(W.current),Ot=Nt[0],se=Nt[1],ie=bt?-1:1,ee=_.useRef(Et);ee.current=Et;var Ae=_.useRef(Ur),be=_.useRef(!0),pe=_.useCallback(function(){be.current=!0,ht&&At(Ae.current),Tt(!1)},[]),ln=_.useCallback(function(){if(Ot){switch(ee.current){case Kt.Horizontal:Ae.current={left:ie*Ot.scrollLeft,top:0};break;case Kt.Both:Ae.current={left:ie*Ot.scrollLeft,top:Ot.scrollTop};break;case Kt.Vertical:default:Ae.current={left:0,top:Ot.scrollTop}}ht&&!be.current||At(Ae.current)}},[Ot]);X(function(){se(W.current)}),X(function(){if(Ot)return Ot.addEventListener("scroll",ln,Wr),function(){Ot.removeEventListener("scroll",ln,Wr)}},[Ot]);var Ue=_.useCallback(function($e,Ke){var Le=W.current;if(!Le)return Promise.resolve();var Qe={left:0,top:0};switch(ee.current){case Kt.Horizontal:Qe.left=ie*$e.left;break;case Kt.Both:Qe.left=ie*$e.left,Qe.top=$e.top;break;case Kt.Vertical:default:Qe.top=$e.top}return Ke?(be.current=!1,Tt(!0),new Promise(function(Xe,vn){(function(gn,bn,_n,An,Nn,Mn){Nn===void 0&&(Nn=function(Gn){return Gn}),Mn===void 0&&(Mn=function(){});var Bn=0,Fn=0,Dn=!1;switch(bn){case Kt.Horizontal:Fn=gn.scrollLeft,Bn=0;case Kt.Both:Fn=gn.scrollLeft,Bn=gn.scrollTop;break;case Kt.Vertical:default:Fn=0,Bn=gn.scrollTop}var In=function(){Dn||(Dn=!0,gn.scrollLeft=_n.left,gn.scrollTop=_n.top,Mn())};if(Math.abs(Bn-_n.top)<=xi&&bn===Kt.Vertical)In();else if(Math.abs(Fn-_n.left)<=xi&&bn===Kt.Horizontal)In();else{var Ln,$n=-1,Qn=Fn-_n.left,Zn=Bn-_n.top,zn=function(Gn){$n===-1&&($n=Gn);var ti=Gn-$n,Ye=Math.min(ti/An,1),Ge=Nn(Ye),De={left:Fn-Qn*Ge,top:Bn-Zn*Ge};switch(bn){case Kt.Horizontal:gn.scrollLeft=De.left;break;case Kt.Both:gn.scrollLeft=De.left,gn.scrollTop=De.top;break;case Kt.Vertical:default:gn.scrollTop=De.top}Math.abs(De.top-_n.top)<=xi&&Math.abs(De.left-_n.left)<=xi&&!Dn&&(window.cancelAnimationFrame(Ln),In()),ti<An?Ln=window.requestAnimationFrame(zn):window.cancelAnimationFrame(Ln)};Ln=window.requestAnimationFrame(zn)}})(Le,ee.current,Qe,400,Ws,function(){pe(),Xe()})})):new Promise(function(Xe,vn){switch(ee.current){case Kt.Horizontal:Le.scrollLeft=Qe.left;break;case Kt.Both:Le.scrollLeft=Qe.left,Le.scrollTop=Qe.top;break;case Kt.Vertical:default:Le.scrollTop=Qe.top}Xe()})},[W]);return{scrollOffset:Lt,scrollTo:Ue}},bi=function(P,W,ht){return Math.max(P,Math.min(ht,W))},Vs=function(P,W){if(W!==x.ViewMode.DualPageWithCover)return 0;if(!function(Et){var Tt=Et.length;if(Tt===1)return!1;for(var Ht=1;Ht<Tt;Ht++)if(Et[Ht].height!==Et[0].height||Et[Ht].width!==Et[0].width)return!0;return!1}(P))return 2*P[0].width;var ht=Zt(P.slice(1),2).map(function(Et){return Et.length===2?Et[0].width+Et[1].width:Et[0].width}),bt=[P[0].width].concat(ht);return Math.max.apply(Math,bt)},Gs={left:0,top:0},qs={left:0,top:0},Yi={left:0,top:0},Xs={left:0,top:0},Ys={height:0,width:0},$r={left:0,top:0},Vr="data-virtual-index",Ks=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Zs=function(P){var W=P.enableSmoothScroll,ht=P.isRtl,bt=P.numberOfItems,Et=P.parentRef,Tt=P.setRenderRange,Ht=P.sizes,Lt=P.scrollMode,At=P.viewMode,Nt=_.useState(!1),Ot=Nt[0],se=Nt[1],ie=_.useCallback(function(Ye){return se(Ye)},[]),ee=_.useRef(Lt);ee.current=Lt;var Ae=_.useRef(At);Ae.current=At;var be=Lt===x.ScrollMode.Wrapped||At===x.ViewMode.DualPageWithCover||At===x.ViewMode.DualPage?Kt.Both:Lt===x.ScrollMode.Horizontal?Kt.Horizontal:Kt.Vertical,pe=$s({elementRef:Et,enableSmoothScroll:W,isRtl:ht,scrollDirection:be,onSmoothScroll:ie}),ln=pe.scrollOffset,Ue=pe.scrollTo,$e=function(Ye){var Ge=Ye.elementRef,De=_.useState(Ge.current),je=De[0],Ie=De[1],tn=_.useRef(!1),en=_.useReducer(Us,{height:0,width:0}),He=en[0],xe=en[1];return X(function(){Ge.current!==je&&Ie(Ge.current)}),X(function(){if(je&&!tn.current){tn.current=!0;var rn=je.getBoundingClientRect(),hn=rn.height,kn=rn.width;xe({rect:{height:hn,width:kn}})}},[je]),_.useEffect(function(){if(je){var rn=new ResizeObserver(function(hn,kn){hn.forEach(function(wn){if(wn.target===je){var Un=wn.contentRect,Xn=Un.height,on=Un.width;xe({rect:{height:Xn,width:on}})}})});return rn.observe(je),function(){rn.unobserve(je)}}},[je]),He}({elementRef:Et}),Ke=_.useRef({scrollOffset:$r,measurements:[]});Ke.current.scrollOffset=ln;var Le=_.useMemo(function(){return Array(bt).fill(-1)},[]),Qe=_.useState(Le),Xe=Qe[0],vn=Qe[1],gn=_.useMemo(function(){var Ye=new IntersectionObserver(function(Ge){Ge.forEach(function(De){var je=De.isIntersecting?De.intersectionRatio:-1,Ie=De.target.getAttribute(Vr);if(Ie){var tn=parseInt(Ie,10);0<=tn&&tn<bt&&vn(function(en){return en[tn]=je,function(He,xe,rn){if(rn||arguments.length===2)for(var hn,kn=0,wn=xe.length;kn<wn;kn++)!hn&&kn in xe||(hn||(hn=Array.prototype.slice.call(xe,0,kn)),hn[kn]=xe[kn]);return He.concat(hn||Array.prototype.slice.call(xe))}([],en,!0)})}})},{threshold:Ks});return Ye},[]),bn=_.useMemo(function(){return Lt===x.ScrollMode.Page&&At===x.ViewMode.SinglePage?function(Ye,Ge,De){for(var je=[],Ie=0;Ie<Ye;Ie++){var tn={height:Math.max(Ge.height,De[Ie].height),width:Math.max(Ge.width,De[Ie].width)},en=Ie===0?Xs:je[Ie-1].end,He={left:en.left+tn.width,top:en.top+tn.height};je[Ie]={index:Ie,start:en,size:tn,end:He,visibility:-1}}return je}(bt,$e,Ht):At===x.ViewMode.DualPageWithCover?function(Ye,Ge,De,je){for(var Ie=[],tn=0,en=0,He=Yi,xe=0;xe<Ye;xe++){var rn=xe===0?{height:je===x.ScrollMode.Page?Math.max(Ge.height,De[xe].height):De[xe].height,width:je===x.ScrollMode.Page?Math.max(Ge.width,De[xe].width):De[xe].width}:{height:je===x.ScrollMode.Page?Math.max(Ge.height,De[xe].height):De[xe].height,width:Math.max(Ge.width/2,De[xe].width)};je===x.ScrollMode.Page?He=xe===0?Yi:{left:xe%2==0?rn.width:0,top:Math.floor((xe-1)/2)*rn.height+Ie[0].end.top}:xe===0?(He=Yi,tn=De[0].height,en=0):xe%2==1?(He={left:0,top:tn+=en},en=xe===Ye-1?De[xe].height:Math.max(De[xe].height,De[xe+1].height)):He={left:Ie[xe-1].end.left,top:tn};var hn={left:He.left+rn.width,top:He.top+rn.height};Ie[xe]={index:xe,start:He,size:rn,end:hn,visibility:-1}}return Ie}(bt,$e,Ht,Lt):At===x.ViewMode.DualPage?function(Ye,Ge,De,je){for(var Ie=[],tn=0,en=0,He=qs,xe=0;xe<Ye;xe++){var rn={height:je===x.ScrollMode.Page?Math.max(Ge.height,De[xe].height):De[xe].height,width:Math.max(Ge.width/2,De[xe].width)};je===x.ScrollMode.Page?He={left:xe%2==0?0:rn.width,top:Math.floor(xe/2)*rn.height}:xe%2==0?(He={left:0,top:tn+=en},en=xe===Ye-1?De[xe].height:Math.max(De[xe].height,De[xe+1].height)):He={left:Ie[xe-1].end.left,top:tn};var hn={left:He.left+rn.width,top:He.top+rn.height};Ie[xe]={index:xe,start:He,size:rn,end:hn,visibility:-1}}return Ie}(bt,$e,Ht,Lt):function(Ye,Ge,De,je){for(var Ie=[],tn=0,en={left:0,top:0},He=0,xe=Gs,rn=0;rn<Ye;rn++){var hn=De[rn];if(rn===0)tn=hn.width,en={left:0,top:0},He=hn.height;else switch(je){case x.ScrollMode.Wrapped:(tn+=hn.width)<Ge.width?(xe={left:Ie[rn-1].end.left,top:en.top},He=Math.max(He,hn.height)):(tn=hn.width,en={left:(xe={left:en.left,top:en.top+He}).left,top:xe.top},He=hn.height);break;case x.ScrollMode.Horizontal:case x.ScrollMode.Vertical:default:xe=Ie[rn-1].end}var kn={left:xe.left+hn.width,top:xe.top+hn.height};Ie[rn]={index:rn,start:xe,size:hn,end:kn,visibility:-1}}return Ie}(bt,$e,Ht,Lt)},[Lt,Ht,At,$e]),_n=bn[bt-1]?{height:bn[bt-1].end.top,width:bn[bt-1].end.left}:Ys;Ke.current.measurements=bn;var An=_.useMemo(function(){var Ye=function(rn,hn,kn,wn){var Un=0;switch(rn){case Kt.Horizontal:Un=wn.left;break;case Kt.Vertical:default:Un=wn.top}var Xn=hn.length-1,on=function(En,ni,hi,Ri){for(;En<=ni;){var oi=(En+ni)/2|0,_i=Ri(oi);if(_i<hi)En=oi+1;else{if(!(_i>hi))return oi;ni=oi-1}}return En>0?En-1:0}(0,Xn,Un,function(En){switch(rn){case Kt.Horizontal:return hn[En].start.left;case Kt.Both:case Kt.Vertical:default:return hn[En].start.top}});if(rn===Kt.Both)for(var Wn=hn[on].start.top;on-1>=0&&hn[on-1].start.top===Wn&&hn[on-1].start.left>=wn.left;)on--;for(var xn=on;xn<=Xn;){var Rn={top:hn[xn].start.top-wn.top,left:hn[xn].start.left-wn.left},jn={height:kn.height-Rn.top,width:kn.width-Rn.left};if(rn===Kt.Horizontal&&jn.width<0||rn===Kt.Vertical&&jn.height<0||rn===Kt.Both&&(jn.width<0||jn.height<0))break;xn++}return{start:on,end:xn}}(be,bn,$e,ln),Ge=Ye.start,De=Ye.end,je=Xe.slice(bi(0,bt,Ge),bi(0,bt,De)),Ie=Ge+je.reduce(function(rn,hn,kn,wn){return hn>wn[rn]?kn:rn},0),tn=Ie=bi(0,bt-1,Ie),en=Tt({endPage:De,numPages:bt,startPage:Ge}),He=en.startPage,xe=en.endPage;switch(He=Math.max(He,0),xe=Math.min(xe,bt-1),At){case x.ViewMode.DualPageWithCover:Ie>0&&(tn=Ie%2==1?Ie:Ie-1),He=He===0?0:He%2==1?He:He-1,bt-(xe=xe%2==1?xe-1:xe)<=2&&(xe=bt-1);break;case x.ViewMode.DualPage:tn=Ie%2==0?Ie:Ie-1,He=He%2==0?He:He-1,xe=xe%2==1?xe:xe-1;break;case x.ViewMode.SinglePage:default:tn=Ie}return{startPage:He,endPage:xe,maxVisbilityIndex:tn}},[bn,$e,ln,At,Xe]),Nn=An.startPage,Mn=An.endPage,Bn=An.maxVisbilityIndex,Fn=_.useMemo(function(){for(var Ye=[],Ge=function(je){var Ie=bn[je],tn=U(U({},Ie),{visibility:Xe[je]!==void 0?Xe[je]:-1,measureRef:function(en){en&&(en.setAttribute(Vr,"".concat(je)),gn.observe(en))}});Ye.push(tn)},De=Nn;De<=Mn;De++)Ge(De);return Ye},[Nn,Mn,Xe,bn]),Dn=_.useCallback(function(Ye,Ge){var De=Ke.current.measurements[bi(0,bt-1,Ye)],je=ee.current===x.ScrollMode.Page?$r:Ge;return De?Ue({left:je.left+De.start.left,top:je.top+De.start.top},W):Promise.resolve()},[Ue,W]),In=_.useCallback(function(Ye,Ge){var De=Ke.current.measurements,je=De[Ye].start,Ie=De.find(function(en){return en.start.top-je.top>1e-12});if(!Ie)return Promise.resolve();var tn=Ie.index;switch(Ae.current){case x.ViewMode.DualPage:tn=tn%2==0?tn:tn+1;break;case x.ViewMode.DualPageWithCover:tn=tn%2==1?tn:tn+1}return Dn(tn,Ge)},[]),Ln=_.useCallback(function(Ye,Ge){for(var De=Ke.current.measurements,je=De[Ye].start,Ie=Ye,tn=!1,en=bt-1;en>=0;en--)if(je.top-De[en].start.top>1e-12){tn=!0,Ie=De[en].index;break}if(!tn)return Promise.resolve();switch(Ae.current){case x.ViewMode.DualPage:Ie=Ie%2==0?Ie:Ie-1;break;case x.ViewMode.DualPageWithCover:Ie=Ie%2==0?Ie-1:Ie}return Ie===Ye&&(Ie=Ye-1),Dn(Ie,Ge)},[]),$n=_.useCallback(function(Ye,Ge){if(Ae.current===x.ViewMode.DualPageWithCover||Ae.current===x.ViewMode.DualPage)return In(Ye,Ge);switch(ee.current){case x.ScrollMode.Wrapped:return In(Ye,Ge);case x.ScrollMode.Horizontal:case x.ScrollMode.Vertical:default:return Dn(Ye+1,Ge)}},[]),Qn=_.useCallback(function(Ye,Ge){if(Ae.current===x.ViewMode.DualPageWithCover||Ae.current===x.ViewMode.DualPage)return Ln(Ye,Ge);switch(ee.current){case x.ScrollMode.Wrapped:return Ln(Ye,Ge);case x.ScrollMode.Horizontal:case x.ScrollMode.Vertical:default:return Dn(Ye-1,Ge)}},[]),Zn=_.useCallback(function(){return function(Ye,Ge){switch(Ge){case x.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Ye.width,"px")};case x.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Ye.height,"px"),width:"100%"}}}(_n,ee.current)},[_n]),zn=_.useCallback(function(Ye){return function(Ge,De,je){return je!==x.ScrollMode.Page?{}:{height:"".concat(De.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Ge.start.top,"px)")}}(Ye,$e,ee.current)},[$e]),Gn=_.useCallback(function(Ye){return function(Ge,De,je,Ie,tn){var en,He,xe,rn,hn,kn,wn,Un=De?"right":"left",Xn=De?-1:1,on=je.length,Wn=Ge.start.left*Xn,xn=Ge.size,Rn=xn.height,jn=xn.width;if(Ie===x.ViewMode.DualPageWithCover){var En=tn===x.ScrollMode.Page?0:Ge.start.top;return Ge.index===0||on%2==0&&Ge.index===on-1?((en={height:"".concat(Rn,"px"),minWidth:"".concat(Vs(je,Ie),"px"),width:"100%"})[Un]=0,en.position="absolute",en.top=0,en.transform="translate(".concat(Wn,"px, ").concat(En,"px)"),en):((He={height:"".concat(Rn,"px"),width:"".concat(jn,"px")})[Un]=0,He.position="absolute",He.top=0,He.transform="translate(".concat(Wn,"px, ").concat(En,"px)"),He)}if(Ie===x.ViewMode.DualPage)return(xe={height:"".concat(Rn,"px"),width:"".concat(jn,"px")})[Un]=0,xe.position="absolute",xe.top=0,xe.transform="translate(".concat(Wn,"px, ").concat(tn===x.ScrollMode.Page?0:Ge.start.top,"px)"),xe;switch(tn){case x.ScrollMode.Horizontal:return(rn={height:"100%",width:"".concat(jn,"px")})[Un]=0,rn.position="absolute",rn.top=0,rn.transform="translateX(".concat(Wn,"px)"),rn;case x.ScrollMode.Page:return(hn={height:"".concat(Rn,"px"),width:"".concat(jn,"px")})[Un]=0,hn.position="absolute",hn.top=0,hn;case x.ScrollMode.Wrapped:return(kn={height:"".concat(Rn,"px"),width:"".concat(jn,"px")})[Un]=0,kn.position="absolute",kn.top=0,kn.transform="translate(".concat(Wn,"px, ").concat(Ge.start.top,"px)"),kn;case x.ScrollMode.Vertical:default:return(wn={height:"".concat(Rn,"px"),width:"100%"})[Un]=0,wn.position="absolute",wn.top=0,wn.transform="translateY(".concat(Ge.start.top,"px)"),wn}}(Ye,ht,Ht,Ae.current,ee.current)},[ht,Ht]),ti=_.useCallback(function(Ye,Ge){var De=Ke.current,je=De.measurements,Ie=De.scrollOffset,tn=je[bi(0,bt-1,Ge)];if(tn){var en=ee.current===x.ScrollMode.Page?{left:tn.start.left,top:tn.start.top}:{left:Ie.left*Ye,top:Ie.top*Ye};return Ue(en,!1)}return Promise.resolve()},[]);return _.useEffect(function(){return function(){gn.disconnect()}},[]),{boundingClientRect:$e,isSmoothScrolling:Ot,startPage:Nn,endPage:Mn,maxVisbilityIndex:Bn,virtualItems:Fn,getContainerStyles:Zn,getItemContainerStyles:zn,getItemStyles:Gn,scrollToItem:Dn,scrollToNextItem:$n,scrollToPreviousItem:Qn,zoom:ti}},Ki=function(P,W,ht,bt,Et,Tt){var Ht=ht;switch(!0){case(Et===x.ViewMode.DualPageWithCover&&Tt>=3):case(Et===x.ViewMode.DualPage&&Tt>=3):Ht=2*ht;break;default:Ht=ht}switch(bt){case x.SpecialZoomLevel.ActualSize:return 1;case x.SpecialZoomLevel.PageFit:return Math.min((P.clientWidth-17)/Ht,(P.clientHeight-16)/W);case x.SpecialZoomLevel.PageWidth:return(P.clientWidth-17)/Ht}},Js=function(P){var W,ht,bt=P.getCurrentPage,Et=(W=50,ht=_.useRef([]),_.useEffect(function(){return function(){ht.current=[]}},[]),{push:function(Nt){var Ot=ht.current;Ot.length+1>W&&Ot.shift(),Ot.push(Nt),ht.current=Ot},map:function(Nt){return ht.current.map(function(Ot){return Nt(Ot)})},pop:function(){var Nt=ht.current;if(Nt.length===0)return null;var Ot=Nt.pop();return ht.current=Nt,Ot}}),Tt=function(Nt){var Ot=_.useRef([]);return _.useEffect(function(){return function(){Ot.current=[]}},[]),{dequeue:function(){var se=Ot.current;if(se.length===0)return null;var ie=se.shift();return Ot.current=se,ie||null},enqueue:function(se){var ie=Ot.current;ie.length+1>Nt&&ie.pop(),Ot.current=[se].concat(ie)},map:function(se){return Ot.current.map(function(ie){return se(ie)})}}}(50),Ht=function(){var Nt=Tt.dequeue();return Nt&&Et.push(Nt),Nt&&Nt.pageIndex===bt()?Ht():Nt},Lt=function(){var Nt=Et.pop();return Nt&&Tt.enqueue(Nt),Nt&&Nt.pageIndex===bt()?Lt():Nt},At=_.useCallback(function(Nt){Et.push(Nt)},[]);return{getNextDestination:Ht,getPreviousDestination:Lt,markVisitedDestination:At}},Gr=function(P){var W=[];return P.map(function(ht){W=W.concat(ht).concat(function(bt){var Et=[];return bt.items&&bt.items.length>0&&(Et=Et.concat(Gr(bt.items))),Et}(ht))}),W},qr={capture:!1,passive:!0},Qs={height:0,width:0},Zi={height:0,width:0},ta=function(P){var W=P.getCurrentPage,ht=P.getCurrentScrollMode,bt=P.jumpToPage,Et=P.targetRef,Tt=_.useState(x.FullScreenMode.Normal),Ht=Tt[0],Lt=Tt[1],At=function(){var Xe=_.useState(Qs),vn=Xe[0],gn=Xe[1],bn=it(function(){gn({height:window.innerHeight,width:window.innerWidth})},100);return X(function(){return window.addEventListener("resize",bn,qr),function(){window.removeEventListener("resize",bn,qr)}},[]),vn}(),Nt=_.useState(Zi),Ot=Nt[0],se=Nt[1],ie=_.useRef(Zi),ee=_.useRef(W()),Ae=_.useRef(Zi),be=_.useState(Et.current),pe=be[0],ln=be[1],Ue=_.useRef();X(function(){Et.current!==pe&&ln(Et.current)},[]),X(function(){if(pe){var Xe=new ResizeObserver(function(vn){vn.forEach(function(gn){var bn=gn.target.getBoundingClientRect(),_n=bn.height,An=bn.width;se({height:_n,width:An})})});return Xe.observe(pe),function(){Xe.unobserve(pe),Xe.disconnect()}}},[pe]);var $e=_.useCallback(function(Xe){var vn=kt();return vn&&vn!==Xe?(Lt(x.FullScreenMode.Normal),St(vn)):Promise.resolve()},[]),Ke=_.useCallback(function(Xe){Xe&&Y()&&(ln(Xe),$e(Xe).then(function(){Ue.current=Xe,Lt(x.FullScreenMode.Entering),function(vn){N&&vn[at.RequestFullScreen]()}(Xe)}))},[]),Le=_.useCallback(function(){kt()&&(Lt(x.FullScreenMode.Exitting),St(document))},[]),Qe=_.useCallback(function(){pe&&kt()!==pe&&Lt(x.FullScreenMode.Exitting)},[pe]);return _.useEffect(function(){switch(Ht){case x.FullScreenMode.Entering:Ue.current&&(Ue.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),ee.current=W(),ie.current={height:window.innerHeight,width:window.innerWidth};break;case x.FullScreenMode.Entered:ht()===x.ScrollMode.Page?bt(ee.current).then(function(){Lt(x.FullScreenMode.EnteredCompletely)}):Lt(x.FullScreenMode.EnteredCompletely);break;case x.FullScreenMode.Exitting:Ue.current&&(Ue.current.style.backgroundColor="",Ue.current=null),ee.current=W();break;case x.FullScreenMode.Exited:Lt(x.FullScreenMode.Normal),ht()===x.ScrollMode.Page&&bt(ee.current)}},[Ht]),_.useEffect(function(){if(Ht!==x.FullScreenMode.Normal)return Ht===x.FullScreenMode.Entering&&At.height===Ot.height&&At.width===Ot.width&&At.height>0&&At.width>0&&(Ae.current.height===0||At.height==Ae.current.height)?(Ae.current={height:window.innerHeight,width:window.innerWidth},void Lt(x.FullScreenMode.Entered)):void(Ht===x.FullScreenMode.Exitting&&ie.current.height===At.height&&ie.current.width===At.width&&At.height>0&&At.width>0&&Lt(x.FullScreenMode.Exited))},[Ht,At,Ot]),_.useEffect(function(){var Xe;return Xe=Qe,N&&document.addEventListener(at.FullScreenChange,Xe),function(){(function(vn){N&&document.removeEventListener(at.FullScreenChange,vn)})(Qe)}},[pe]),{enterFullScreenMode:Ke,exitFullScreenMode:Le,fullScreenMode:Ht}},ea={buildPageStyles:function(){return{}},transformSize:function(P){return P.size}},ui={left:0,top:0},na=function(P){var W=P.currentFile,ht=P.defaultScale,bt=P.doc,Et=P.enableSmoothScroll,Tt=P.initialPage,Ht=P.initialRotation,Lt=P.initialScale,At=P.pageLayout,Nt=P.pageSizes,Ot=P.plugins,se=P.renderPage,ie=P.scrollMode,ee=P.setRenderRange,Ae=P.viewMode,be=P.viewerState,pe=P.onDocumentLoad,ln=P.onOpenFile,Ue=P.onPageChange,$e=P.onRotate,Ke=P.onRotatePage,Le=P.onZoom,Qe=bt.numPages,Xe=bt.loadingTask.docId,vn=_.useContext(de).l10n,gn=_.useContext(gt),bn=gn.direction===x.TextDirection.RightToLeft,_n=_.useRef(),An=_.useRef(),Nn=_.useState(Tt),Mn=Nn[0],Bn=Nn[1],Fn=_.useRef(null),Dn=Js({getCurrentPage:function(){return on.current.pageIndex}}),In=_.useState(Ht),Ln=In[0],$n=In[1],Qn=Wt(Ln),Zn=_.useState(!1),zn=Zn[0],Gn=Zn[1],ti=_.useState(new Map),Ye=ti[0],Ge=ti[1],De=_.useState(ie),je=De[0],Ie=De[1],tn=Wt(je),en=_.useState(Ae),He=en[0],xe=en[1],rn=Wt(He),hn=function(he){var sn=Rt(),dn=_.useState([]),Sn=dn[0],yn=dn[1];return _.useEffect(function(){he.getOutline().then(function(fn){if(sn.current&&fn!==null){var Hn=Gr(fn);yn(Hn)}})},[]),Sn}(bt),kn=_.useState(Lt),wn=kn[0],Un=kn[1],Xn=Wt(wn),on=_.useRef(be),Wn=_.useRef(typeof ht=="string"?ht:null),xn=_.useRef(-1),Rn=_.useRef(-1),jn=_.useRef(Tt),En=ta({getCurrentPage:function(){return on.current.pageIndex},getCurrentScrollMode:function(){return on.current.scrollMode},jumpToPage:function(he){return ri(he)},targetRef:An}),ni=_.useState(-1),hi=ni[0],Ri=ni[1],oi=_.useState(0),_i=oi[0],la=oi[1],Yn=Yt({doc:bt});_.useEffect(function(){return function(){fe.clear(),Oe.clear()}},[Xe]);var Zr=_.useMemo(function(){return Object.assign({},ea,At)},[]),ca=_.useMemo(function(){return Array(Qe).fill(0).map(function(he,sn){var dn=[Nt[sn].pageHeight,Nt[sn].pageWidth],Sn=Math.abs(Ln)%180==0?{height:dn[0],width:dn[1]}:{height:dn[1],width:dn[0]},yn={height:Sn.height*wn,width:Sn.width*wn};return Zr.transformSize({numPages:Qe,pageIndex:sn,size:yn})})},[Ln,wn]),Cn=Zs({enableSmoothScroll:Et,isRtl:bn,numberOfItems:Qe,parentRef:An,scrollMode:je,setRenderRange:ee,sizes:ca,viewMode:He}),ua=it(function(){!Wn.current||on.current.fullScreenMode!==x.FullScreenMode.Normal||Tt>0&&jn.current===Tt||li(Wn.current)},200);(function(he){var sn=he.targetRef,dn=he.onResize;X(function(){var Sn=new ResizeObserver(function(fn){fn.forEach(function(Hn){dn(Hn.target)})}),yn=sn.current;if(yn)return Sn.observe(yn),function(){Sn.unobserve(yn)}},[])})({targetRef:An,onResize:ua});var ii=function(he){var sn=he;Ot.forEach(function(dn){dn.onViewerStateChange&&(sn=dn.onViewerStateChange(sn))}),on.current=sn},ha=function(){return An.current},da=function(){return on.current},fa=_.useCallback(function(he){Dn.markVisitedDestination(he)},[]),tr=_.useCallback(function(he){var sn=he.pageIndex,dn=he.bottomOffset,Sn=he.leftOffset,yn=he.scaleTo,fn=An.current,Hn=on.current;return fn&&Hn?new Promise(function(si,ar){We(bt,sn).then(function(Fi){var ai=Fi.getViewport({scale:1}),Li=0,ss=(typeof dn=="function"?dn(ai.width,ai.height):dn)||0,Di=(typeof Sn=="function"?Sn(ai.width,ai.height):Sn)||0,di=Hn.scale;switch(yn){case x.SpecialZoomLevel.PageFit:Li=0,Di=0,li(x.SpecialZoomLevel.PageFit);break;case x.SpecialZoomLevel.PageWidth:di=Ki(fn,Nt[sn].pageHeight,Nt[sn].pageWidth,x.SpecialZoomLevel.PageWidth,Ae,Qe),Li=(ai.height-ss)*di,Di*=di,li(di);break;default:Li=(ai.height-ss)*di,Di*=di}switch(Hn.scrollMode){case x.ScrollMode.Horizontal:Cn.scrollToItem(sn,{left:Di,top:0}).then(function(){si()});break;case x.ScrollMode.Vertical:default:Cn.scrollToItem(sn,{left:0,top:Li}).then(function(){si()})}})}):Promise.resolve()},[]),Jr=_.useCallback(function(he){return Dn.markVisitedDestination(he),tr(he)},[]),pa=_.useCallback(function(){var he=Dn.getNextDestination();return he?tr(he):Promise.resolve()},[]),ga=_.useCallback(function(){var he=Dn.getPreviousDestination();return he?tr(he):Promise.resolve()},[]),ma=_.useCallback(function(){return Cn.scrollToNextItem(on.current.pageIndex,ui)},[]),ri=_.useCallback(function(he){return 0<=he&&he<Qe?Cn.scrollToItem(he,ui):Promise.resolve()},[]),va=_.useCallback(function(){return Cn.scrollToPreviousItem(on.current.pageIndex,ui)},[]),Qr=_.useCallback(function(he){var sn,dn;(sn=he.name,dn=sn.split(/\./).pop(),dn?dn.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(Sn){var yn=new FileReader;yn.readAsArrayBuffer(he),yn.onload=function(){var fn=new Uint8Array(yn.result);Sn(fn)}}).then(function(Sn){ln(he.name,Sn)})},[ln]),ts=_.useCallback(function(he){var sn=he===x.RotateDirection.Backward?-90:90,dn=on.current.rotation,Sn=dn===360||dn===-360?sn:dn+sn;Yn.markNotRendered(),$n(Sn),ii(U(U({},on.current),{rotation:Sn})),$e({direction:he,doc:bt,rotation:Sn})},[]),er=_.useCallback(function(he,sn){var dn=sn===x.RotateDirection.Backward?-90:90,Sn=on.current.pagesRotation,yn=(Sn.has(he)?Sn.get(he):Ht)+dn,fn=Sn.set(he,yn);Ge(fn),Gn(function(Hn){return!Hn}),ii(U(U({},on.current),{pagesRotation:fn,rotatedPage:he})),Ke({direction:sn,doc:bt,pageIndex:he,rotation:yn}),Yn.markRendering(he),Ri(he)},[]),es=_.useCallback(function(he){ii(U(U({},on.current),{scrollMode:he})),Ie(he)},[]),ns=_.useCallback(function(he){ii(U(U({},on.current),{viewMode:he})),xe(he)},[]),li=_.useCallback(function(he){var sn=An.current,dn=on.current.pageIndex;if(!(dn<0||dn>=Qe)){var Sn=Nt[dn].pageHeight,yn=Nt[dn].pageWidth,fn=sn?typeof he=="string"?Ki(sn,Sn,yn,he,on.current.viewMode,Qe):he:1;Wn.current=typeof he=="string"?he:null,fn!==on.current.scale&&(la(function(Hn){return Hn+1}),Yn.markNotRendered(),Un(fn),Le({doc:bt,scale:fn}),ii(U(U({},on.current),{scale:fn})))}},[]),ba=_.useCallback(function(he){En.enterFullScreenMode(he)},[]),_a=_.useCallback(function(){En.exitFullScreenMode()},[]);_.useEffect(function(){ii(U(U({},on.current),{fullScreenMode:En.fullScreenMode}))},[En.fullScreenMode]),_.useEffect(function(){var he={enterFullScreenMode:ba,exitFullScreenMode:_a,getPagesContainer:ha,getViewerState:da,jumpToDestination:Jr,jumpToNextDestination:pa,jumpToPreviousDestination:ga,jumpToNextPage:ma,jumpToPreviousPage:va,jumpToPage:ri,openFile:Qr,rotate:ts,rotatePage:er,setViewerState:ii,switchScrollMode:es,switchViewMode:ns,zoom:li};return Ot.forEach(function(sn){sn.install&&sn.install(he)}),function(){Ot.forEach(function(sn){sn.uninstall&&sn.uninstall(he)})}},[Xe]),_.useEffect(function(){pe({doc:bt,file:W}),Ot.forEach(function(he){he.onDocumentLoad&&he.onDocumentLoad({doc:bt,file:W})})},[Xe]);var nr,ir,rr,is=Cn.boundingClientRect;nr=function(){Tt&&ri(Tt)},ir=is.height>0&&is.width>0,rr=_.useRef(!1),X(function(){ir&&!rr.current&&(rr.current=!0,nr())},[nr,ir]),X(function(){var he=on.current.pageIndex;he>-1&&tn!==je&&Cn.scrollToItem(he,ui).then(function(){En.fullScreenMode===x.FullScreenMode.EnteredCompletely&&(Et||Yn.markNotRendered(),xn.current=-1)})},[je]),X(function(){var he=on.current.pageIndex;he>-1&&Qn!==Ln&&Cn.scrollToItem(he,ui)},[Ln]),X(function(){Xn!=0&&Xn!=on.current.scale&&Cn.zoom(on.current.scale/Xn,on.current.pageIndex).then(function(){En.fullScreenMode===x.FullScreenMode.EnteredCompletely&&(Rn.current=-1)})},[wn]),X(function(){if(rn!==on.current.viewMode){var he=Cn.startPage,sn=Cn.endPage,dn=Cn.virtualItems;Yn.markNotRendered(),Yn.setRange(he,sn);for(var Sn=function(fn){var Hn=dn.find(function(si){return si.index===fn});Hn&&Yn.setVisibility(fn,Hn.visibility)},yn=he;yn<=sn;yn++)Sn(yn);sr()}},[He]),X(function(){var he=on.current.pageIndex;he>-1&&rn!==He&&Cn.scrollToItem(he,ui)},[He]),X(function(){var he=on.current.pageIndex;he>0&&he===Tt&&jn.current===Tt&&Wn.current&&(jn.current=-1,li(Wn.current))},[Mn]),_.useEffect(function(){Cn.isSmoothScrolling||Fn.current!==null&&Fn.current===Mn||(Fn.current=Mn,Ue({currentPage:Mn,doc:bt}))},[Mn,Cn.isSmoothScrolling]),_.useEffect(function(){En.fullScreenMode===x.FullScreenMode.Entering&&on.current.scrollMode===x.ScrollMode.Page&&(xn.current=on.current.pageIndex),En.fullScreenMode===x.FullScreenMode.EnteredCompletely&&on.current.scrollMode===x.ScrollMode.Page&&Et&&(xn.current=-1),En.fullScreenMode===x.FullScreenMode.EnteredCompletely&&Wn.current&&(Rn.current=on.current.pageIndex,li(Wn.current))},[En.fullScreenMode]),_.useEffect(function(){if(En.fullScreenMode!==x.FullScreenMode.Entering&&En.fullScreenMode!==x.FullScreenMode.Exitting&&!Cn.isSmoothScrolling){var he=Cn.startPage,sn=Cn.endPage,dn=Cn.maxVisbilityIndex,Sn=Cn.virtualItems,yn=dn,fn=En.fullScreenMode===x.FullScreenMode.Entered||En.fullScreenMode===x.FullScreenMode.EnteredCompletely;if(!(fn&&yn!==xn.current&&xn.current>-1||fn&&yn!==Rn.current&&Rn.current>-1)){Bn(yn),ii(U(U({},on.current),{pageIndex:yn})),Yn.setRange(he,sn);for(var Hn=function(ar){var Fi=Sn.find(function(ai){return ai.index===ar});Fi&&Yn.setVisibility(ar,Fi.visibility)},si=he;si<=sn;si++)Hn(si);sr()}}},[Cn.startPage,Cn.endPage,Cn.isSmoothScrolling,Cn.maxVisbilityIndex,En.fullScreenMode,zn,Ln,wn]);var ya=_.useCallback(function(he){Yn.markRendered(he),sr()},[_i]),sr=function(){var he=Yn.getHighestPriorityPage();he>-1&&Yn.isInRange(he)&&(Yn.markRendering(he),Ri(he))},Aa=function(he){var sn=Mn-1,dn=Mn+1;switch(he){case"FirstPage":ri(0);break;case"LastPage":ri(Qe-1);break;case"NextPage":dn<Qe&&ri(dn);break;case"PrevPage":sn>=0&&ri(sn)}},Sa=_.useCallback(function(){var he=Cn.virtualItems,sn=[];switch(He){case x.ViewMode.DualPage:sn=Zt(he,2);break;case x.ViewMode.DualPageWithCover:he.length&&(sn=he[0].index===0?[[he[0]]].concat(Zt(he.slice(1),2)):Zt(he,2));break;case x.ViewMode.SinglePage:default:sn=Zt(he,1)}var dn=vn&&vn.core?vn.core.pageLabel:"Page {{pageIndex}}",Sn={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:_n,style:{height:"100%"}},children:_.createElement(_.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:nt({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":je===x.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":bn,"rpv-core__inner-pages--single":je===x.ScrollMode.Page,"rpv-core__inner-pages--vertical":je===x.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":je===x.ScrollMode.Wrapped}),ref:An,style:{height:"100%",position:"relative"}},children:_.createElement("div",{"data-testid":"core__inner-current-page-".concat(Mn),style:Object.assign({"--scale-factor":wn},Cn.getContainerStyles())},sn.map(function(yn){return _.createElement("div",{className:nt({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":je===x.ScrollMode.Page}),style:Cn.getItemContainerStyles(yn[0]),key:"".concat(yn[0].index,"-").concat(He)},yn.map(function(fn){var Hn=He===x.ViewMode.DualPageWithCover&&(fn.index===0||Qe%2==0&&fn.index===Qe-1);return _.createElement("div",{"aria-label":dn.replace("{{pageIndex}}","".concat(fn.index+1)),className:nt({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":He===x.ViewMode.DualPage&&fn.index%2==0,"rpv-core__inner-page--dual-odd":He===x.ViewMode.DualPage&&fn.index%2==1,"rpv-core__inner-page--dual-cover":Hn,"rpv-core__inner-page--dual-cover-even":He===x.ViewMode.DualPageWithCover&&!Hn&&fn.index%2==0,"rpv-core__inner-page--dual-cover-odd":He===x.ViewMode.DualPageWithCover&&!Hn&&fn.index%2==1,"rpv-core__inner-page--single":He===x.ViewMode.SinglePage&&je===x.ScrollMode.Page}),role:"region",key:"".concat(fn.index,"-").concat(He),style:Object.assign({},Cn.getItemStyles(fn),Zr.buildPageStyles({numPages:Qe,pageIndex:fn.index,scrollMode:je,viewMode:He}))},_.createElement(zs,{doc:bt,measureRef:fn.measureRef,outlines:hn,pageIndex:fn.index,pageRotation:Ye.has(fn.index)?Ye.get(fn.index):0,pageSize:Nt[fn.index],plugins:Ot,renderPage:se,renderQueueKey:_i,rotation:Ln,scale:wn,shouldRender:hi===fn.index,viewMode:He,onExecuteNamedAction:Aa,onJumpFromLinkAnnotation:fa,onJumpToDest:Jr,onRenderCompleted:ya,onRotatePage:er}))}))}))}};return Ot.forEach(function(yn){yn.renderViewer&&(Sn=yn.renderViewer({containerRef:_n,doc:bt,pagesContainerRef:An,pagesRotation:Ye,pageSizes:Nt,rotation:Ln,slot:Sn,themeContext:gn,jumpToPage:ri,openFile:Qr,rotate:ts,rotatePage:er,switchScrollMode:es,switchViewMode:ns,zoom:li}))}),Sn},[Ot,Cn]),rs=_.useCallback(function(he){return _.createElement("div",U({},he.attrs,{style:he.attrs&&he.attrs.style?he.attrs.style:{}}),he.children,he.subSlot&&rs(he.subSlot))},[]);return rs(Sa())},Xr=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],ia=function(P){var W=P.defaultScale,ht=P.doc,bt=P.render,Et=P.scrollMode,Tt=P.viewMode,Ht=_.useRef(),Lt=_.useState({pageSizes:[],scale:0}),At=Lt[0],Nt=Lt[1];return _.useLayoutEffect(function(){var Ot=Array(ht.numPages).fill(0).map(function(se,ie){return new Promise(function(ee,Ae){We(ht,ie).then(function(be){var pe=be.getViewport({scale:1});ee({pageHeight:pe.height,pageWidth:pe.width,rotation:pe.rotation})})})});Promise.all(Ot).then(function(se){var ie=Ht.current;if(ie&&se.length!==0){var ee=se[0].pageWidth,Ae=se[0].pageHeight,be=ie.parentElement,pe=(be.clientWidth-45)/ee,ln=(be.clientHeight-45)/Ae,Ue=pe;switch(Et){case x.ScrollMode.Horizontal:Ue=Math.min(pe,ln);break;case x.ScrollMode.Vertical:default:Ue=pe}var $e,Ke,Le=W?typeof W=="string"?Ki(be,Ae,ee,W,Tt,ht.numPages):W:($e=Ue,(Ke=Xr.findIndex(function(Qe){return Qe>=$e}))===-1||Ke===0?$e:Xr[Ke-1]);Nt({pageSizes:se,scale:Le})}})},[ht.loadingTask.docId]),At.pageSizes.length===0||At.scale===0?_.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:Ht},_.createElement(rt,null)):bt(At.pageSizes,At.scale)},Mi=function(){},Ji=function(P){function W(ht,bt){var Et=P.call(this)||this;return Et.verifyPassword=ht,Et.passwordStatus=bt,Et}return pt(W,P),W}(Mi),ra=function(P){var W=P.passwordStatus,ht=P.renderProtectedView,bt=P.verifyPassword,Et=P.onDocumentAskPassword,Tt=_.useContext(de).l10n,Ht=_.useState(""),Lt=Ht[0],At=Ht[1],Nt=_.useContext(gt).direction===x.TextDirection.RightToLeft,Ot=function(){return bt(Lt)};return _.useEffect(function(){Et&&Et({verifyPassword:bt})},[]),ht?ht({passwordStatus:W,verifyPassword:bt}):_.createElement("div",{className:"rpv-core__asking-password-wrapper"},_.createElement("div",{className:nt({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":Nt})},_.createElement("div",{className:"rpv-core__asking-password-message"},W===x.PasswordStatus.RequiredPassword&&Tt.core.askingPassword.requirePasswordToOpen,W===x.PasswordStatus.WrongPassword&&Tt.core.wrongPassword.tryAgain),_.createElement("div",{className:"rpv-core__asking-password-body"},_.createElement("div",{className:nt({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!Nt,"rpv-core__asking-password-input--rtl":Nt})},_.createElement(tt,{testId:"core__asking-password-input",type:"password",value:Lt,onChange:At,onKeyDown:function(se){se.key==="Enter"&&Ot()}})),_.createElement(st,{onClick:Ot},Tt.core.askingPassword.submit))))},Yr=function(P){function W(ht){var bt=P.call(this)||this;return bt.doc=ht,bt}return pt(W,P),W}(Mi),Kr=function(P){function W(ht){var bt=P.call(this)||this;return bt.error=ht,bt}return pt(W,P),W}(Mi),Qi=function(P){function W(ht){var bt=P.call(this)||this;return bt.percentages=ht,bt}return pt(W,P),W}(Mi),sa=function(P){var W=P.characterMap,ht=P.file,bt=P.httpHeaders,Et=P.render,Tt=P.renderError,Ht=P.renderLoader,Lt=P.renderProtectedView,At=P.transformGetDocumentParams,Nt=P.withCredentials,Ot=P.onDocumentAskPassword,se=_.useContext(gt).direction===x.TextDirection.RightToLeft,ie=_.useState(new Qi(0)),ee=ie[0],Ae=ie[1],be=_.useRef(""),pe=Rt();return _.useEffect(function(){be.current="",Ae(new Qi(0));var ln=new ot.PDFWorker({name:"PDFWorker_".concat(Date.now())}),Ue=Object.assign({httpHeaders:bt,withCredentials:Nt,worker:ln},typeof ht=="string"?{url:ht}:{data:ht},W?{cMapUrl:W.url,cMapPacked:W.isCompressed}:{}),$e=At?At(Ue):Ue,Ke=ot.getDocument($e);return Ke.onPassword=function(Le,Qe){switch(Qe){case ot.PasswordResponses.NEED_PASSWORD:pe.current&&Ae(new Ji(Le,x.PasswordStatus.RequiredPassword));break;case ot.PasswordResponses.INCORRECT_PASSWORD:pe.current&&Ae(new Ji(Le,x.PasswordStatus.WrongPassword))}},Ke.onProgress=function(Le){var Qe=Le.total>0?Math.min(100,100*Le.loaded/Le.total):100;pe.current&&be.current===""&&Ae(new Qi(Qe))},Ke.promise.then(function(Le){be.current=Le.loadingTask.docId,pe.current&&Ae(new Yr(Le))},function(Le){return pe.current&&!ln.destroyed&&Ae(new Kr({message:Le.message||"Cannot load document",name:Le.name}))}),function(){Ke.destroy(),ln.destroy()}},[ht]),ee instanceof Ji?_.createElement(ra,{passwordStatus:ee.passwordStatus,renderProtectedView:Lt,verifyPassword:ee.verifyPassword,onDocumentAskPassword:Ot}):ee instanceof Yr?Et(ee.doc):ee instanceof Kr?Tt?Tt(ee.error):_.createElement("div",{className:nt({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":se})},_.createElement("div",{className:"rpv-core__doc-error-text"},ee.error.message)):_.createElement("div",{"data-testid":"core__doc-loading",className:nt({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":se})},Ht?Ht(ee.percentages):_.createElement(rt,null))},aa=function(P,W){var ht=_.useMemo(function(){return P==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":P},[]),bt=_.useState(ht),Et=bt[0],Tt=bt[1],Ht=Wt(Et);return _.useEffect(function(){if(P==="auto"){var Lt=window.matchMedia("(prefers-color-scheme: dark)"),At=function(Nt){Tt(Nt.matches?"dark":"light")};return Lt.addEventListener("change",At),function(){return Lt.removeEventListener("change",At)}}},[]),_.useEffect(function(){Et!==Ht&&W&&W(Et)},[Et]),_.useEffect(function(){P!==Et&&Tt(P)},[P]),{currentTheme:Et,setCurrentTheme:Tt}},oa=function(P){return{startPage:P.startPage-3,endPage:P.endPage+3}};x.Button=function(P){var W=P.children,ht=P.testId,bt=P.onClick,Et=_.useContext(gt).direction===x.TextDirection.RightToLeft,Tt=ht?{"data-testid":ht}:{};return _.createElement("button",U({className:nt({"rpv-core__button":!0,"rpv-core__button--rtl":Et}),type:"button",onClick:bt},Tt),W)},x.Icon=V,x.LazyRender=function(P){var W=P.attrs,ht=P.children,bt=P.testId,Et=_.useState(!1),Tt=Et[0],Ht=Et[1],Lt=bt?U(U({},W),{"data-testid":bt}):W,At=Q({once:!0,onVisibilityChanged:function(Nt){Nt.isVisible&&Ht(!0)}});return _.createElement("div",U({ref:At},Lt),Tt&&ht)},x.LocalizationContext=de,x.Menu=function(P){var W=P.children,ht=_.useRef(),bt=_.useRef([]),Et=_.useContext(gt).direction===x.TextDirection.RightToLeft,Tt=function(Lt){if(ht.current)switch(Lt.key){case"Tab":Lt.preventDefault();break;case"ArrowDown":Lt.preventDefault(),Ht(function(At,Nt){return Nt+1});break;case"ArrowUp":Lt.preventDefault(),Ht(function(At,Nt){return Nt-1});break;case"End":Lt.preventDefault(),Ht(function(At,Nt){return At.length-1});break;case"Home":Lt.preventDefault(),Ht(function(At,Nt){return 0})}},Ht=function(Lt){if(ht.current){var At=bt.current,Nt=At.findIndex(function(se){return se.getAttribute("tabindex")==="0"}),Ot=Math.min(At.length-1,Math.max(0,Lt(At,Nt)));Nt>=0&&Nt<=At.length-1&&At[Nt].setAttribute("tabindex","-1"),At[Ot].setAttribute("tabindex","0"),At[Ot].focus()}};return X(function(){var Lt=ht.current;if(Lt){var At=function(Nt){var Ot=[];return Nt.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(se){if(se instanceof HTMLElement){var ie=se.parentElement;(ie===Nt||window.getComputedStyle(ie).display!=="none")&&Ot.push(se)}}),Ot}(Lt);bt.current=At}},[]),X(function(){return document.addEventListener("keydown",Tt),function(){document.removeEventListener("keydown",Tt)}},[]),_.createElement("div",{ref:ht,"aria-orientation":"vertical",className:nt({"rpv-core__menu":!0,"rpv-core__menu--rtl":Et}),role:"menu",tabIndex:0},W)},x.MenuDivider=function(){return _.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},x.MenuItem=function(P){var W=P.checked,ht=W!==void 0&&W,bt=P.children,Et=P.icon,Tt=Et===void 0?null:Et,Ht=P.isDisabled,Lt=Ht!==void 0&&Ht,At=P.testId,Nt=P.onClick,Ot=_.useContext(gt).direction===x.TextDirection.RightToLeft,se=At?{"data-testid":At}:{};return _.createElement("button",U({className:nt({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":Lt,"rpv-core__menu-item--ltr":!Ot,"rpv-core__menu-item--rtl":Ot}),role:"menuitem",tabIndex:-1,type:"button",onClick:Nt},se),_.createElement("div",{className:nt({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!Ot,"rpv-core__menu-item-icon--rtl":Ot})},Tt),_.createElement("div",{className:nt({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!Ot,"rpv-core__menu-item-label--rtl":Ot})},bt),_.createElement("div",{className:nt({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!Ot,"rpv-core__menu-item-check--rtl":Ot})},ht&&_.createElement(J,null)))},x.MinimalButton=function(P){var W=P.ariaLabel,ht=W===void 0?"":W,bt=P.ariaKeyShortcuts,Et=bt===void 0?"":bt,Tt=P.children,Ht=P.isDisabled,Lt=Ht!==void 0&&Ht,At=P.isSelected,Nt=At!==void 0&&At,Ot=P.testId,se=P.onClick,ie=_.useContext(gt).direction===x.TextDirection.RightToLeft,ee=Ot?{"data-testid":Ot}:{};return _.createElement("button",U({"aria-label":ht},Et&&{"aria-keyshortcuts":Et},Lt&&{"aria-disabled":!0},{className:nt({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":Lt,"rpv-core__minimal-button--rtl":ie,"rpv-core__minimal-button--selected":Nt}),type:"button",onClick:se},ee),Tt)},x.Modal=function(P){var W=P.ariaControlsSuffix,ht=P.closeOnClickOutside,bt=P.closeOnEscape,Et=P.content,Tt=P.isOpened,Ht=Tt!==void 0&&Tt,Lt=P.target,At=W||"".concat(et());return _.createElement(ut,{target:Lt?function(Nt,Ot){return _.createElement("div",{"aria-expanded":Ot?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(At)},Lt(Nt,Ot))}:null,content:function(Nt){return _.createElement(B,null,_.createElement(T,{ariaControlsSuffix:At,closeOnClickOutside:ht,closeOnEscape:bt,onToggle:Nt},Et(Nt)))},isOpened:Ht})},x.Popover=function(P){var W=P.ariaHasPopup,ht=W===void 0?"dialog":W,bt=P.ariaControlsSuffix,Et=P.closeOnClickOutside,Tt=P.closeOnEscape,Ht=P.content,Lt=P.lockScroll,At=Lt===void 0||Lt,Nt=P.offset,Ot=P.position,se=P.target,ie=K(!1),ee=ie.opened,Ae=ie.toggle,be=_.useRef(),pe=_.useMemo(function(){return bt||"".concat(et())},[]);return _.createElement("div",{ref:be,"aria-expanded":ee?"true":"false","aria-haspopup":ht,"aria-controls":"rpv-core__popver-body-".concat(pe)},se(Ae,ee),ee&&_.createElement(_.Fragment,null,At&&_.createElement(te,{closeOnEscape:Tt,onClose:Ae}),_.createElement(Ce,{ariaControlsSuffix:pe,closeOnClickOutside:Et,offset:Nt,position:Ot,targetRef:be,onClose:Ae},Ht(Ae))))},x.PrimaryButton=st,x.ProgressBar=function(P){var W=P.progress,ht=_.useContext(gt).direction===x.TextDirection.RightToLeft;return _.createElement("div",{className:nt({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":ht})},_.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(W,"%")}},W,"%"))},x.Separator=function(){return _.createElement("div",{className:"rpv-core__separator"})},x.Spinner=rt,x.Splitter=function(P){var W=P.constrain,ht=_.useContext(gt).direction===x.TextDirection.RightToLeft,bt=_.useRef(),Et=_.useRef(),Tt=_.useRef(),Ht=_.useRef(0),Lt=_.useRef(0),At=_.useRef(0),Nt=_.useRef(0),Ot={capture:!0},se=function(ee){var Ae=bt.current,be=Et.current,pe=Tt.current;if(Ae&&be&&pe){var ln=Nt.current,Ue=ee.clientX-Ht.current,$e=At.current+(ht?-Ue:Ue),Ke=Ae.parentElement.getBoundingClientRect().width,Le=100*$e/Ke;if(Ae.classList.add("rpv-core__splitter--resizing"),W){var Qe=Ke-$e-ln;if(!W({firstHalfPercentage:Le,firstHalfSize:$e,secondHalfPercentage:100*Qe/Ke,secondHalfSize:Qe}))return}be.style.width="".concat(Le,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),be.classList.add("rpv-core__splitter-sibling--resizing"),pe.classList.add("rpv-core__splitter-sibling--resizing")}},ie=function(ee){var Ae=bt.current,be=Et.current,pe=Tt.current;Ae&&be&&pe&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),Ae.classList.remove("rpv-core__splitter--resizing"),be.classList.remove("rpv-core__splitter-sibling--resizing"),pe.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",se,Ot),document.removeEventListener("mouseup",ie,Ot))};return _.useEffect(function(){var ee=bt.current;ee&&(Nt.current=ee.getBoundingClientRect().width,Et.current=ee.previousElementSibling,Tt.current=ee.nextElementSibling)},[]),_.createElement("div",{ref:bt,className:"rpv-core__splitter",onMouseDown:function(ee){var Ae=Et.current;Ae&&(Ht.current=ee.clientX,Lt.current=ee.clientY,At.current=Ae.getBoundingClientRect().width,document.addEventListener("mousemove",se,Ot),document.addEventListener("mouseup",ie,Ot))}})},x.TextBox=tt,x.ThemeContext=gt,x.Tooltip=function(P){var W=P.ariaControlsSuffix,ht=P.content,bt=P.offset,Et=P.position,Tt=P.target,Ht=K(!1),Lt=Ht.opened,At=Ht.toggle,Nt=_.useRef(),Ot=_.useRef(),se=_.useMemo(function(){return W||"".concat(et())},[]);R(function(){Nt.current&&document.activeElement&&Nt.current.contains(document.activeElement)&&ee()});var ie=function(){At(x.ToggleStatus.Open)},ee=function(){At(x.ToggleStatus.Close)};return _.createElement(_.Fragment,null,_.createElement("div",{ref:Nt,"aria-describedby":"rpv-core__tooltip-body-".concat(se),onBlur:function(Ae){Ae.relatedTarget instanceof HTMLElement&&Ae.currentTarget.parentElement&&Ae.currentTarget.parentElement.contains(Ae.relatedTarget)?Ot.current&&(Ot.current.style.display="none"):ee()},onFocus:ie,onMouseEnter:ie,onMouseLeave:ee},Tt),Lt&&_.createElement(jt,{ariaControlsSuffix:se,contentRef:Ot,offset:bt,position:Et,targetRef:Nt},ht()))},x.Viewer=function(P){var W=P.characterMap,ht=P.defaultScale,bt=P.enableSmoothScroll,Et=bt===void 0||bt,Tt=P.fileUrl,Ht=P.httpHeaders,Lt=Ht===void 0?{}:Ht,At=P.initialPage,Nt=At===void 0?0:At,Ot=P.pageLayout,se=P.initialRotation,ie=se===void 0?0:se,ee=P.localization,Ae=P.plugins,be=Ae===void 0?[]:Ae,pe=P.renderError,ln=P.renderLoader,Ue=P.renderPage,$e=P.renderProtectedView,Ke=P.scrollMode,Le=Ke===void 0?x.ScrollMode.Vertical:Ke,Qe=P.setRenderRange,Xe=Qe===void 0?oa:Qe,vn=P.transformGetDocumentParams,gn=P.theme,bn=gn===void 0?{direction:x.TextDirection.LeftToRight,theme:"light"}:gn,_n=P.viewMode,An=_n===void 0?x.ViewMode.SinglePage:_n,Nn=P.withCredentials,Mn=Nn!==void 0&&Nn,Bn=P.onDocumentAskPassword,Fn=P.onDocumentLoad,Dn=Fn===void 0?function(){}:Fn,In=P.onPageChange,Ln=In===void 0?function(){}:In,$n=P.onRotate,Qn=$n===void 0?function(){}:$n,Zn=P.onRotatePage,zn=Zn===void 0?function(){}:Zn,Gn=P.onSwitchTheme,ti=Gn===void 0?function(){}:Gn,Ye=P.onZoom,Ge=Ye===void 0?function(){}:Ye,De=_.useState({data:Tt,name:typeof Tt=="string"?Tt:"",shouldLoad:!1}),je=De[0],Ie=De[1],tn=function(xn,Rn){Ie({data:Rn,name:xn,shouldLoad:!0})},en=_.useState(!1),He=en[0],xe=en[1],rn=Wt(je);_.useEffect(function(){var xn,Rn,jn,En;xn=rn.data,En=typeof(Rn=Tt),(jn=typeof xn)=="string"&&En==="string"&&xn===Rn||jn==="object"&&En==="object"&&xn.length===Rn.length&&xn.every(function(ni,hi){return ni===Rn[hi]})||Ie({data:Tt,name:typeof Tt=="string"?Tt:"",shouldLoad:He})},[Tt,He]);var hn=Q({onVisibilityChanged:function(xn){xe(xn.isVisible),xn.isVisible&&Ie(function(Rn){return Object.assign({},Rn,{shouldLoad:!0})})}}),kn=typeof bn=="string"?{direction:x.TextDirection.LeftToRight,theme:bn}:bn,wn=_.useState(ee||ne),Un=wn[0],Xn=wn[1],on={l10n:Un,setL10n:Xn},Wn=Object.assign({},{direction:kn.direction},aa(kn.theme||"light",ti));return _.useEffect(function(){ee&&Xn(ee)},[ee]),_.createElement(de.Provider,{value:on},_.createElement(gt.Provider,{value:Wn},_.createElement("div",{ref:hn,className:"rpv-core__viewer rpv-core__viewer--".concat(Wn.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},je.shouldLoad&&_.createElement(sa,{characterMap:W,file:je.data,httpHeaders:Lt,render:function(xn){return _.createElement(ia,{defaultScale:ht,doc:xn,render:function(Rn,jn){return _.createElement(na,{currentFile:{data:je.data,name:je.name},defaultScale:ht,doc:xn,enableSmoothScroll:Et,initialPage:Nt,initialRotation:ie,initialScale:jn,pageLayout:Ot,pageSizes:Rn,plugins:be,renderPage:Ue,scrollMode:Le,setRenderRange:Xe,viewMode:An,viewerState:{file:je,fullScreenMode:x.FullScreenMode.Normal,pageIndex:-1,pageHeight:Rn[0].pageHeight,pageWidth:Rn[0].pageWidth,pagesRotation:new Map,rotation:ie,scale:jn,scrollMode:Le,viewMode:An},onDocumentLoad:Dn,onOpenFile:tn,onPageChange:Ln,onRotate:Qn,onRotatePage:zn,onZoom:Ge})},scrollMode:Le,viewMode:An})},renderError:pe,renderLoader:ln,renderProtectedView:$e,transformGetDocumentParams:vn,withCredentials:Mn,onDocumentAskPassword:Bn}))))},x.Worker=function(P){var W=P.children,ht=P.workerUrl;return ot.GlobalWorkerOptions.workerSrc=ht,_.createElement(_.Fragment,null,W)},x.chunk=Zt,x.classNames=nt,x.createStore=function(P){var W=P||{},ht={},bt=function(Tt,Ht){var Lt;W=U(U({},W),((Lt={})[Tt]=Ht,Lt)),(ht[Tt]||[]).forEach(function(At){return At(W[Tt])})},Et=function(Tt){return W[Tt]};return{subscribe:function(Tt,Ht){ht[Tt]=(ht[Tt]||[]).concat(Ht)},unsubscribe:function(Tt,Ht){ht[Tt]=(ht[Tt]||[]).filter(function(Lt){return Lt!==Ht})},update:function(Tt,Ht){bt(Tt,Ht)},updateCurrentValue:function(Tt,Ht){var Lt=Et(Tt);Lt!==void 0&&bt(Tt,Ht(Lt))},get:function(Tt){return Et(Tt)}}},x.getDestination=qe,x.getPage=We,x.isFullScreenEnabled=Y,x.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},x.useDebounceCallback=it,x.useIntersectionObserver=Q,x.useIsMounted=Rt,x.useIsomorphicLayoutEffect=X,x.usePrevious=Wt,x.useRenderQueue=Yt})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$2.exports=core_min;var libExports$2=lib$2.exports,lib$1={exports:{}},fullScreen_min={},e$1=libExports$2;function t$1(x){var D=Object.create(null);return x&&Object.keys(x).forEach(function(_t){if(_t!=="default"){var L=Object.getOwnPropertyDescriptor(x,_t);Object.defineProperty(D,_t,L.get?L:{enumerable:!0,get:function(){return x[_t]}})}}),D.default=x,Object.freeze(D)}var n$1=t$1(reactExports),r$1=function(){return n$1.createElement(e$1.Icon,{size:16},n$1.createElement("path",{d:"M11.5 23.499L11.5 14.499"}),n$1.createElement("path",{d:"M7.5 18.499L11.5 14.499 15.5 18.499"}),n$1.createElement("path",{d:"M11.5 1.499L11.5 10.499"}),n$1.createElement("path",{d:"M7.5 6.499L11.5 10.499 15.5 6.499"}),n$1.createElement("path",{d:"M20.5 12.499L1.5 12.499"}))},l$1=function(){return n$1.createElement(e$1.Icon,{size:16},n$1.createElement("path",{d:"M0.5 12L23.5 12"}),n$1.createElement("path",{d:"M11.5 1L11.5 23"}),n$1.createElement("path",{d:"M8.5 4L11.5 1 14.5 4"}),n$1.createElement("path",{d:"M20.5 9L23.5 12 20.5 15"}),n$1.createElement("path",{d:"M3.5 15L0.5 12 3.5 9"}),n$1.createElement("path",{d:"M14.5 20L11.5 23 8.5 20"}))},c$1=function(){return c$1=Object.assign||function(x){for(var D,_t=1,L=arguments.length;_t<L;_t++)for(var $ in D=arguments[_t])Object.prototype.hasOwnProperty.call(D,$)&&(x[$]=D[$]);return x},c$1.apply(this,arguments)},u$1={left:0,top:8},o$1=function(x){var D=x.enableShortcuts,_t=x.onClick,L=n$1.useContext(e$1.LocalizationContext).l10n,$=L&&L.fullScreen?L.fullScreen.enterFullScreen:"Full screen",_=D?e$1.isMac()?"Meta+Ctrl+F":"F11":"";return n$1.createElement(e$1.Tooltip,{ariaControlsSuffix:"full-screen-enter",position:e$1.Position.BottomCenter,target:n$1.createElement(e$1.MinimalButton,{ariaKeyShortcuts:_,ariaLabel:$,isDisabled:!e$1.isFullScreenEnabled(),testId:"full-screen__enter-button",onClick:_t},n$1.createElement(l$1,null)),content:function(){return $},offset:u$1})},i$1={left:0,top:8},a$1=function(x){var D=x.onClick,_t=n$1.useContext(e$1.LocalizationContext).l10n,L=_t&&_t.fullScreen?_t.fullScreen.exitFullScreen:"Exit full screen";return n$1.createElement(e$1.Tooltip,{ariaControlsSuffix:"full-screen-exit",position:e$1.Position.BottomCenter,target:n$1.createElement(e$1.MinimalButton,{ariaKeyShortcuts:"Esc",ariaLabel:L,testId:"full-screen__exit-button-with-tooltip",onClick:D},n$1.createElement(r$1,null)),content:function(){return L},offset:i$1})},f$1=function(x,D){var _t=n$1.useState(D.get("fullScreenMode")),L=_t[0],$=_t[1],_=n$1.useCallback(function(ot){$(ot)},[]);return n$1.useEffect(function(){return D.subscribe("fullScreenMode",_),function(){D.unsubscribe("fullScreenMode",_)}},[]),{enterFullScreen:function(){var ot=D.get("getPagesContainer");if(ot){var $t=x(ot());D.get("enterFullScreenMode")($t)}},exitFullScreen:function(){D.get("exitFullScreenMode")()},isFullScreen:L===e$1.FullScreenMode.Entering||L===e$1.FullScreenMode.EnteredCompletely}},s$1=function(x){var D=x.children,_t=x.enableShortcuts,L=x.getFullScreenTarget,$=x.store,_=f$1(L,$),ot=_.enterFullScreen,$t=_.exitFullScreen,pt=_.isFullScreen;return(D||function(lt){return pt?n$1.createElement(a$1,{onClick:lt.onClick}):n$1.createElement(o$1,{enableShortcuts:_t,onClick:lt.onClick})})({onClick:pt?$t:ot})},S$1=function(x){var D=x.onClick,_t=n$1.useContext(e$1.LocalizationContext).l10n,L=_t&&_t.fullScreen?_t.fullScreen.enterFullScreen:"Full screen";return n$1.createElement(e$1.MenuItem,{icon:n$1.createElement(l$1,null),isDisabled:!e$1.isFullScreenEnabled(),testId:"full-screen__enter-menu",onClick:D},L)},d$1=function(x){var D=x.onClick,_t=n$1.useContext(e$1.LocalizationContext).l10n,L=n$1.useContext(e$1.ThemeContext).direction===e$1.TextDirection.RightToLeft,$=_t&&_t.fullScreen?_t.fullScreen.exitFullScreen:"Exit full screen";return n$1.createElement("div",{className:e$1.classNames({"rpv-full-screen__exit-button":!0,"rpv-full-screen__exit-button--ltr":!L,"rpv-full-screen__exit-button--rtl":L})},n$1.createElement(e$1.MinimalButton,{ariaLabel:$,testId:"full-screen__exit-button",onClick:D},n$1.createElement(r$1,null)))},m$1=function(x){var D=x.children,_t=x.getFullScreenTarget,L=x.store,$=f$1(_t,L),_=$.enterFullScreen,ot=$.exitFullScreen,$t=$.isFullScreen;return $t&&(D||function(pt){return n$1.createElement(d$1,{onClick:pt.onClick})})({onClick:$t?ot:_})},E$1=function(x){var D=x.store,_t=x.onEnterFullScreen,L=x.onExitFullScreen,$=n$1.useState(D.get("fullScreenMode")),_=$[0],ot=$[1],$t=n$1.useCallback(function(pt){ot(pt)},[]);return n$1.useEffect(function(){switch(_){case e$1.FullScreenMode.EnteredCompletely:_t(D.get("zoom"));break;case e$1.FullScreenMode.Exited:L(D.get("zoom"))}},[_]),n$1.useEffect(function(){return D.subscribe("fullScreenMode",$t),function(){D.unsubscribe("fullScreenMode",$t)}},[]),(_===e$1.FullScreenMode.Entering||_===e$1.FullScreenMode.Entered)&&n$1.createElement("div",{className:"rpv-full-screen__overlay"},n$1.createElement(e$1.Spinner,null))},F=function(x){var D=x.containerRef,_t=x.getFullScreenTarget,L=x.store,$=f$1(_t,L).enterFullScreen,_=function(ot){if(!ot.shiftKey&&!ot.altKey&&(e$1.isMac()?ot.metaKey&&ot.ctrlKey&&ot.key==="f":ot.key==="F11")){var $t=D.current;$t&&document.activeElement&&$t.contains(document.activeElement)&&(ot.preventDefault(),$())}};return n$1.useEffect(function(){if(D.current)return document.addEventListener("keydown",_),function(){document.removeEventListener("keydown",_)}},[D.current]),n$1.createElement(n$1.Fragment,null)};fullScreen_min.ExitFullScreenIcon=r$1,fullScreen_min.FullScreenIcon=l$1,fullScreen_min.fullScreenPlugin=function(x){var D=(x==null?void 0:x.getFullScreenTarget)||function(ot){return ot},_t=n$1.useMemo(function(){return Object.assign({},{enableShortcuts:!0,onEnterFullScreen:function(){},onExitFullScreen:function(){}},x)},[]),L=n$1.useMemo(function(){return e$1.createStore({enterFullScreenMode:function(){},exitFullScreenMode:function(){},fullScreenMode:e$1.FullScreenMode.Normal,zoom:function(){}})},[]),$=function(ot){return n$1.createElement(s$1,c$1({},ot,{enableShortcuts:_t.enableShortcuts,getFullScreenTarget:D,store:L}))},_=function(){return n$1.createElement(m$1,{getFullScreenTarget:D,store:L},x==null?void 0:x.renderExitFullScreenButton)};return{install:function(ot){L.update("enterFullScreenMode",ot.enterFullScreenMode),L.update("exitFullScreenMode",ot.exitFullScreenMode),L.update("getPagesContainer",ot.getPagesContainer),L.update("zoom",ot.zoom)},onViewerStateChange:function(ot){return L.update("fullScreenMode",ot.fullScreenMode),ot},renderViewer:function(ot){var $t=ot.slot;return $t.subSlot&&($t.subSlot.children=n$1.createElement(n$1.Fragment,null,_t.enableShortcuts&&n$1.createElement(F,{containerRef:ot.containerRef,getFullScreenTarget:D,store:L}),n$1.createElement(E$1,{store:L,onEnterFullScreen:_t.onEnterFullScreen,onExitFullScreen:_t.onExitFullScreen}),n$1.createElement(_,null),$t.subSlot.children)),$t},EnterFullScreen:$,EnterFullScreenButton:function(){return n$1.createElement($,null,function(ot){return n$1.createElement(o$1,c$1({enableShortcuts:_t.enableShortcuts},ot))})},EnterFullScreenMenuItem:function(ot){return n$1.createElement($,null,function($t){return n$1.createElement(S$1,{onClick:function(){$t.onClick(),ot.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$1.exports=fullScreen_min;var libExports$1=lib$1.exports,lib={exports:{}},zoom_min={},e=libExports$2;function t(x){var D=Object.create(null);return x&&Object.keys(x).forEach(function(_t){if(_t!=="default"){var L=Object.getOwnPropertyDescriptor(x,_t);Object.defineProperty(D,_t,L.get?L:{enumerable:!0,get:function(){return x[_t]}})}}),D.default=x,Object.freeze(D)}var n=t(reactExports),o=function(){return n.createElement(e.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10
            M10.5,5.499v10`}))},r=function(){return n.createElement(e.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10`}))},c=function(){return c=Object.assign||function(x){for(var D,_t=1,L=arguments.length;_t<L;_t++)for(var $ in D=arguments[_t])Object.prototype.hasOwnProperty.call(D,$)&&(x[$]=D[$]);return x},c.apply(this,arguments)},a=function(x){var D=n.useState(x.get("scale")||0),_t=D[0],L=D[1],$=function(_){L(_)};return n.useEffect(function(){return x.subscribe("scale",$),function(){x.unsubscribe("scale",$)}},[]),{scale:_t}},u=function(x){var D=x.children,_t=x.store;return(D||function(L){return n.createElement(n.Fragment,null,"".concat(Math.round(100*L.scale),"%"))})({scale:a(_t).scale})},l={passive:!1},i=null,s=function(x){var D=x.pagesContainerRef,_t=x.store,L=e.useDebounceCallback(function(_){var ot=_t.get("zoom");ot&&ot(_)},40),$=function(_){if(_.ctrlKey){_.preventDefault();var ot=_.target.getBoundingClientRect(),$t=1-_.deltaY/100,pt=_.clientX-ot.left,lt=_.clientY-ot.top,U=_t.get("scale"),vt=(i||(i=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(pt,lt).scale($t).translate(-pt,-lt).scale(U);L(vt.a)}};return e.useIsomorphicLayoutEffect(function(){var _=D.current;if(_)return _.addEventListener("wheel",$,l),function(){_.removeEventListener("wheel",$)}},[]),n.createElement(n.Fragment,null)},m=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],f=function(x){return m.find(function(D){return D>x})||x},v=function(x){var D=m.findIndex(function(_t){return _t>=x});return D===-1||D===0?x:m[D-1]},p=function(x){var D=x.containerRef,_t=x.store,L=function($){if(!$.shiftKey&&!$.altKey&&(e.isMac()?$.metaKey:$.ctrlKey)){var _=D.current;if(_&&document.activeElement&&_.contains(document.activeElement)){var ot=_t.get("zoom");if(ot){var $t=_t.get("scale")||1,pt=1;switch($.key){case"-":pt=v($t);break;case"=":pt=f($t);break;case"0":pt=1;break;default:pt=$t}pt!==$t&&($.preventDefault(),ot(pt))}}}};return n.useEffect(function(){if(D.current)return document.addEventListener("keydown",L),function(){document.removeEventListener("keydown",L)}},[D.current]),n.createElement(n.Fragment,null)},z=[.5,.75,1,1.25,1.5,2,3,4],E={left:0,top:8},d=function(x){var D=x.levels,_t=D===void 0?z:D,L=x.scale,$=x.onZoom,_=n.useContext(e.LocalizationContext).l10n,ot=n.useContext(e.ThemeContext).direction===e.TextDirection.RightToLeft,$t=_&&_.zoom?_.zoom.zoomDocument:"Zoom document";return n.createElement(e.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:e.Position.BottomCenter,target:function(pt){return n.createElement(e.MinimalButton,{ariaLabel:$t,testId:"zoom__popover-target",onClick:function(){pt()}},n.createElement("span",{className:"rpv-zoom__popover-target"},n.createElement("span",{"data-testid":"zoom__popover-target-scale",className:e.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!ot,"rpv-zoom__popover-target-scale--rtl":ot})},Math.round(100*L),"%"),n.createElement("span",{className:"rpv-zoom__popover-target-arrow"})))},content:function(pt){return n.createElement(e.Menu,null,Object.keys(e.SpecialZoomLevel).map(function(lt){var U=lt;return n.createElement(e.MenuItem,{key:U,onClick:function(){pt(),$(U)}},function(vt){switch(vt){case e.SpecialZoomLevel.ActualSize:return _&&_.zoom?_.zoom.actualSize:"Actual size";case e.SpecialZoomLevel.PageFit:return _&&_.zoom?_.zoom.pageFit:"Page fit";case e.SpecialZoomLevel.PageWidth:return _&&_.zoom?_.zoom.pageWidth:"Page width"}}(U))}),n.createElement(e.MenuDivider,null),_t.map(function(lt){return n.createElement(e.MenuItem,{key:lt,onClick:function(){pt(),$(lt)}},"".concat(Math.round(100*lt),"%"))}))},offset:E,closeOnClickOutside:!0,closeOnEscape:!0})},g=function(x){var D=x.children,_t=x.levels,L=x.store;return(D||function($){return n.createElement(d,{levels:_t,scale:$.scale,onZoom:$.onZoom})})({scale:a(L).scale,onZoom:function($){var _=L.get("zoom");_&&_($)}})},C={left:0,top:8},h=function(x){var D=x.enableShortcuts,_t=x.onClick,L=n.useContext(e.LocalizationContext).l10n,$=L&&L.zoom?L.zoom.zoomIn:"Zoom in",_=D?e.isMac()?"Meta+=":"Ctrl+=":"";return n.createElement(e.Tooltip,{ariaControlsSuffix:"zoom-in",position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaKeyShortcuts:_,ariaLabel:$,testId:"zoom__in-button",onClick:_t},n.createElement(o,null)),content:function(){return $},offset:C})},b=function(x){var D=x.children,_t=x.enableShortcuts,L=x.store,$=a(L).scale;return(D||h)({enableShortcuts:_t,onClick:function(){var _=L.get("zoom");_&&_(f($))}})},k=function(x){var D=x.onClick,_t=n.useContext(e.LocalizationContext).l10n,L=_t&&_t.zoom?_t.zoom.zoomIn:"Zoom in";return n.createElement(e.MenuItem,{icon:n.createElement(o,null),testId:"zoom__in-menu",onClick:D},L)},S={left:0,top:8},M=function(x){var D=x.enableShortcuts,_t=x.onClick,L=n.useContext(e.LocalizationContext).l10n,$=L&&L.zoom?L.zoom.zoomOut:"Zoom out",_=D?e.isMac()?"Meta+-":"Ctrl+-":"";return n.createElement(e.Tooltip,{ariaControlsSuffix:"zoom-out",position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaKeyShortcuts:_,ariaLabel:$,testId:"zoom__out-button",onClick:_t},n.createElement(r,null)),content:function(){return $},offset:S})},I=function(x){var D=x.children,_t=x.enableShortcuts,L=x.store,$=a(L).scale;return(D||M)({enableShortcuts:_t,onClick:function(){var _=L.get("zoom");_&&_(v($))}})},Z=function(x){var D=x.onClick,_t=n.useContext(e.LocalizationContext).l10n,L=_t&&_t.zoom?_t.zoom.zoomOut:"Zoom out";return n.createElement(e.MenuItem,{icon:n.createElement(r,null),testId:"zoom__out-menu",onClick:D},L)};zoom_min.ZoomInIcon=o,zoom_min.ZoomOutIcon=r,zoom_min.zoomPlugin=function(x){var D=n.useMemo(function(){return Object.assign({},{enableShortcuts:!0},x)},[]),_t=n.useMemo(function(){return e.createStore({})},[]),L=function(ot){return n.createElement(b,c({enableShortcuts:D.enableShortcuts},ot,{store:_t}))},$=function(ot){return n.createElement(I,c({enableShortcuts:D.enableShortcuts},ot,{store:_t}))},_=function(ot){return n.createElement(g,c({},ot,{store:_t}))};return{renderViewer:function(ot){var $t=ot.slot;if(!D.enableShortcuts)return $t;var pt={children:n.createElement(n.Fragment,null,n.createElement(p,{containerRef:ot.containerRef,store:_t}),n.createElement(s,{pagesContainerRef:ot.pagesContainerRef,store:_t}),$t.children)};return c(c({},$t),pt)},install:function(ot){_t.update("zoom",ot.zoom)},onViewerStateChange:function(ot){return _t.update("scale",ot.scale),ot},zoomTo:function(ot){var $t=_t.get("zoom");$t&&$t(ot)},CurrentScale:function(ot){return n.createElement(u,c({},ot,{store:_t}))},ZoomIn:L,ZoomInButton:function(){return n.createElement(L,null,function(ot){return n.createElement(h,c({},ot))})},ZoomInMenuItem:function(ot){return n.createElement(L,null,function($t){return n.createElement(k,{onClick:function(){$t.onClick(),ot.onClick()}})})},ZoomOut:$,ZoomOutButton:function(){return n.createElement($,null,function(ot){return n.createElement(M,c({},ot))})},ZoomOutMenuItem:function(ot){return n.createElement($,null,function($t){return n.createElement(Z,{onClick:function(){$t.onClick(),ot.onClick()}})})},Zoom:_,ZoomPopover:function(ot){return n.createElement(_,null,function($t){return n.createElement(d,c({levels:ot==null?void 0:ot.levels},$t))})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=zoom_min;var libExports=lib.exports;function BsArrowsFullscreen(x){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707m4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707m0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707m-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707"},child:[]}]})(x)}function LuZoomIn(x){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",x2:"16.65",y1:"21",y2:"16.65"},child:[]},{tag:"line",attr:{x1:"11",x2:"11",y1:"8",y2:"14"},child:[]},{tag:"line",attr:{x1:"8",x2:"14",y1:"11",y2:"11"},child:[]}]})(x)}function LuZoomOut(x){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",x2:"16.65",y1:"21",y2:"16.65"},child:[]},{tag:"line",attr:{x1:"8",x2:"14",y1:"11",y2:"11"},child:[]}]})(x)}var define_import_meta_env_default={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const PdfPriever=()=>{const x=libExports$1.fullScreenPlugin(),{EnterFullScreen:D}=x,_t=libExports.zoomPlugin(),{CurrentScale:L,ZoomIn:$,ZoomOut:_}=_t,ot=reactResponsiveExports.useMediaQuery({query:`(max-width: ${mediaBreakpoints.sm}px)`});console.log("import.meta.env.VITE_CV_PATH",define_import_meta_env_default.VITE_CV_PATH);const[,$t]=useDownloadPdf(define_import_meta_env_default.VITE_CV_PATH,"Evgen-Nikolenko-FullStack-CV.pdf");return jsxRuntimeExports.jsx(libExports$2.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:jsxRuntimeExports.jsxs("div",{className:"h-full overflow-hidden p-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-start justify-center",children:[jsxRuntimeExports.jsx(D,{children:pt=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ot?jsxRuntimeExports.jsxs("button",{onClick:$t,title:"download",className:"btn mb-2 mr-2 h-8",children:[jsxRuntimeExports.jsx(IoMdDownload,{})," "]}):jsxRuntimeExports.jsx("button",{title:"fullscreen",className:"btn mb-2 mr-2 h-8",onClick:pt.onClick,children:jsxRuntimeExports.jsx(BsArrowsFullscreen,{})})})}),jsxRuntimeExports.jsxs("div",{className:"flex h-8 flex-row pb-2",children:[jsxRuntimeExports.jsx(_,{children:pt=>jsxRuntimeExports.jsx("button",{title:"zoom out",className:"btn h-8",onClick:pt.onClick,children:jsxRuntimeExports.jsx(LuZoomOut,{})})}),jsxRuntimeExports.jsx("div",{className:"h-8 px-2 pt-1 text-textEditorColor",children:jsxRuntimeExports.jsx(L,{children:pt=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:`${Math.round(pt.scale*100)}%`})})}),jsxRuntimeExports.jsx($,{children:pt=>jsxRuntimeExports.jsx("button",{title:"zoom in",className:"btn h-8",onClick:pt.onClick,children:jsxRuntimeExports.jsx(LuZoomIn,{})})})]})]}),jsxRuntimeExports.jsx(libExports$2.Viewer,{fileUrl:define_import_meta_env_default.VITE_CV_PATH,plugins:[_t,x]})]})})};export{PdfPriever,PdfPriever as default};
